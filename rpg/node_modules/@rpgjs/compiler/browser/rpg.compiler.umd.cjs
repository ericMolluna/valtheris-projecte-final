(function(Ze,pe){typeof exports=="object"&&typeof module<"u"?pe(exports):typeof define=="function"&&define.amd?define(["exports"],pe):(Ze=typeof globalThis<"u"?globalThis:Ze||self,pe(Ze.RpgCompiler={}))})(this,function(Ze){"use strict";const pe={existsSync:(...e)=>window.fs.existsSync(...e),readFileSync:(...e)=>window.fs.readFileSync(...e),readdirSync:(...e)=>window.fs.readdirSync(...e),copyFileSync:(...e)=>window.fs.copyFileSync(...e)},Oa=e=>window.imagesLoaded[e];var Ra=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ft={},Na={get exports(){return Ft},set exports(e){Ft=e}},$s={},Ae={},gt={},Ut={},W={},zt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends t{constructor(E){if(super(),!e.IDENTIFIER.test(E))throw new Error("CodeGen: name must be a valid identifier");this.str=E}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=r;class n extends t{constructor(E){super(),this._items=typeof E=="string"?[E]:E}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const E=this._items[0];return E===""||E==='""'}get str(){var E;return(E=this._str)!==null&&E!==void 0?E:this._str=this._items.reduce((P,A)=>`${P}${A}`,"")}get names(){var E;return(E=this._names)!==null&&E!==void 0?E:this._names=this._items.reduce((P,A)=>(A instanceof r&&(P[A.str]=(P[A.str]||0)+1),P),{})}}e._Code=n,e.nil=new n("");function s(m,...E){const P=[m[0]];let A=0;for(;A<E.length;)u(P,E[A]),P.push(m[++A]);return new n(P)}e._=s;const o=new n("+");function a(m,...E){const P=[b(m[0])];let A=0;for(;A<E.length;)P.push(o),u(P,E[A]),P.push(o,b(m[++A]));return p(P),new n(P)}e.str=a;function u(m,E){E instanceof n?m.push(...E._items):E instanceof r?m.push(E):m.push(d(E))}e.addCodeArg=u;function p(m){let E=1;for(;E<m.length-1;){if(m[E]===o){const P=c(m[E-1],m[E+1]);if(P!==void 0){m.splice(E-1,3,P);continue}m[E++]="+"}E++}}function c(m,E){if(E==='""')return m;if(m==='""')return E;if(typeof m=="string")return E instanceof r||m[m.length-1]!=='"'?void 0:typeof E!="string"?`${m.slice(0,-1)}${E}"`:E[0]==='"'?m.slice(0,-1)+E.slice(1):void 0;if(typeof E=="string"&&E[0]==='"'&&!(m instanceof r))return`"${m}${E.slice(1)}`}function i(m,E){return E.emptyStr()?m:m.emptyStr()?E:a`${m}${E}`}e.strConcat=i;function d(m){return typeof m=="number"||typeof m=="boolean"||m===null?m:b(Array.isArray(m)?m.join(","):m)}function w(m){return new n(b(m))}e.stringify=w;function b(m){return JSON.stringify(m).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=b;function h(m){return typeof m=="string"&&e.IDENTIFIER.test(m)?new n(`.${m}`):s`[${m}]`}e.getProperty=h;function y(m){if(typeof m=="string"&&e.IDENTIFIER.test(m))return new n(`${m}`);throw new Error(`CodeGen: invalid export name: ${m}, use explicit $id name mapping`)}e.getEsmExportName=y;function _(m){return new n(m.toString())}e.regexpCode=_})(zt);var tn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=zt;class r extends Error{constructor(c){super(`CodeGen: "code" for ${c} not defined`),this.value=c.value}}var n;(function(p){p[p.Started=0]="Started",p[p.Completed=1]="Completed"})(n=e.UsedValueState||(e.UsedValueState={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class s{constructor({prefixes:c,parent:i}={}){this._names={},this._prefixes=c,this._parent=i}toName(c){return c instanceof t.Name?c:this.name(c)}name(c){return new t.Name(this._newName(c))}_newName(c){const i=this._names[c]||this._nameGroup(c);return`${c}${i.index++}`}_nameGroup(c){var i,d;if(!((d=(i=this._parent)===null||i===void 0?void 0:i._prefixes)===null||d===void 0)&&d.has(c)||this._prefixes&&!this._prefixes.has(c))throw new Error(`CodeGen: prefix "${c}" is not allowed in this scope`);return this._names[c]={prefix:c,index:0}}}e.Scope=s;class o extends t.Name{constructor(c,i){super(i),this.prefix=c}setValue(c,{property:i,itemIndex:d}){this.value=c,this.scopePath=(0,t._)`.${new t.Name(i)}[${d}]`}}e.ValueScopeName=o;const a=(0,t._)`\n`;class u extends s{constructor(c){super(c),this._values={},this._scope=c.scope,this.opts={...c,_n:c.lines?a:t.nil}}get(){return this._scope}name(c){return new o(c,this._newName(c))}value(c,i){var d;if(i.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const w=this.toName(c),{prefix:b}=w,h=(d=i.key)!==null&&d!==void 0?d:i.ref;let y=this._values[b];if(y){const E=y.get(h);if(E)return E}else y=this._values[b]=new Map;y.set(h,w);const _=this._scope[b]||(this._scope[b]=[]),m=_.length;return _[m]=i.ref,w.setValue(i,{property:b,itemIndex:m}),w}getValue(c,i){const d=this._values[c];if(d)return d.get(i)}scopeRefs(c,i=this._values){return this._reduceValues(i,d=>{if(d.scopePath===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return(0,t._)`${c}${d.scopePath}`})}scopeCode(c=this._values,i,d){return this._reduceValues(c,w=>{if(w.value===void 0)throw new Error(`CodeGen: name "${w}" has no value`);return w.value.code},i,d)}_reduceValues(c,i,d={},w){let b=t.nil;for(const h in c){const y=c[h];if(!y)continue;const _=d[h]=d[h]||new Map;y.forEach(m=>{if(_.has(m))return;_.set(m,n.Started);let E=i(m);if(E){const P=this.opts.es5?e.varKinds.var:e.varKinds.const;b=(0,t._)`${b}${P} ${m} = ${E};${this.opts._n}`}else if(E=w==null?void 0:w(m))b=(0,t._)`${b}${E}${this.opts._n}`;else throw new r(m);_.set(m,n.Completed)})}return b}}e.ValueScope=u})(tn),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=zt,r=tn;var n=zt;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return n.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return n.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return n.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}});var s=tn;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return s.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return s.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return s.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return s.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class o{optimizeNodes(){return this}optimizeNames(l,v){return this}}class a extends o{constructor(l,v,j){super(),this.varKind=l,this.name=v,this.rhs=j}render({es5:l,_n:v}){const j=l?r.varKinds.var:this.varKind,z=this.rhs===void 0?"":` = ${this.rhs}`;return`${j} ${this.name}${z};`+v}optimizeNames(l,v){if(l[this.name.str])return this.rhs&&(this.rhs=oe(this.rhs,l,v)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class u extends o{constructor(l,v,j){super(),this.lhs=l,this.rhs=v,this.sideEffects=j}render({_n:l}){return`${this.lhs} = ${this.rhs};`+l}optimizeNames(l,v){if(!(this.lhs instanceof t.Name&&!l[this.lhs.str]&&!this.sideEffects))return this.rhs=oe(this.rhs,l,v),this}get names(){const l=this.lhs instanceof t.Name?{}:{...this.lhs.names};return he(l,this.rhs)}}class p extends u{constructor(l,v,j,z){super(l,j,z),this.op=v}render({_n:l}){return`${this.lhs} ${this.op}= ${this.rhs};`+l}}class c extends o{constructor(l){super(),this.label=l,this.names={}}render({_n:l}){return`${this.label}:`+l}}class i extends o{constructor(l){super(),this.label=l,this.names={}}render({_n:l}){return`break${this.label?` ${this.label}`:""};`+l}}class d extends o{constructor(l){super(),this.error=l}render({_n:l}){return`throw ${this.error};`+l}get names(){return this.error.names}}class w extends o{constructor(l){super(),this.code=l}render({_n:l}){return`${this.code};`+l}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(l,v){return this.code=oe(this.code,l,v),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class b extends o{constructor(l=[]){super(),this.nodes=l}render(l){return this.nodes.reduce((v,j)=>v+j.render(l),"")}optimizeNodes(){const{nodes:l}=this;let v=l.length;for(;v--;){const j=l[v].optimizeNodes();Array.isArray(j)?l.splice(v,1,...j):j?l[v]=j:l.splice(v,1)}return l.length>0?this:void 0}optimizeNames(l,v){const{nodes:j}=this;let z=j.length;for(;z--;){const V=j[z];V.optimizeNames(l,v)||(Ne(l,V.names),j.splice(z,1))}return j.length>0?this:void 0}get names(){return this.nodes.reduce((l,v)=>B(l,v.names),{})}}class h extends b{render(l){return"{"+l._n+super.render(l)+"}"+l._n}}class y extends b{}class _ extends h{}_.kind="else";class m extends h{constructor(l,v){super(v),this.condition=l}render(l){let v=`if(${this.condition})`+super.render(l);return this.else&&(v+="else "+this.else.render(l)),v}optimizeNodes(){super.optimizeNodes();const l=this.condition;if(l===!0)return this.nodes;let v=this.else;if(v){const j=v.optimizeNodes();v=this.else=Array.isArray(j)?new _(j):j}if(v)return l===!1?v instanceof m?v:v.nodes:this.nodes.length?this:new m(ft(l),v instanceof m?[v]:v.nodes);if(!(l===!1||!this.nodes.length))return this}optimizeNames(l,v){var j;if(this.else=(j=this.else)===null||j===void 0?void 0:j.optimizeNames(l,v),!!(super.optimizeNames(l,v)||this.else))return this.condition=oe(this.condition,l,v),this}get names(){const l=super.names;return he(l,this.condition),this.else&&B(l,this.else.names),l}}m.kind="if";class E extends h{}E.kind="for";class P extends E{constructor(l){super(),this.iteration=l}render(l){return`for(${this.iteration})`+super.render(l)}optimizeNames(l,v){if(super.optimizeNames(l,v))return this.iteration=oe(this.iteration,l,v),this}get names(){return B(super.names,this.iteration.names)}}class A extends E{constructor(l,v,j,z){super(),this.varKind=l,this.name=v,this.from=j,this.to=z}render(l){const v=l.es5?r.varKinds.var:this.varKind,{name:j,from:z,to:V}=this;return`for(${v} ${j}=${z}; ${j}<${V}; ${j}++)`+super.render(l)}get names(){const l=he(super.names,this.from);return he(l,this.to)}}class k extends E{constructor(l,v,j,z){super(),this.loop=l,this.varKind=v,this.name=j,this.iterable=z}render(l){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(l)}optimizeNames(l,v){if(super.optimizeNames(l,v))return this.iterable=oe(this.iterable,l,v),this}get names(){return B(super.names,this.iterable.names)}}class S extends h{constructor(l,v,j){super(),this.name=l,this.args=v,this.async=j}render(l){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(l)}}S.kind="func";class C extends b{render(l){return"return "+super.render(l)}}C.kind="return";class M extends h{render(l){let v="try"+super.render(l);return this.catch&&(v+=this.catch.render(l)),this.finally&&(v+=this.finally.render(l)),v}optimizeNodes(){var l,v;return super.optimizeNodes(),(l=this.catch)===null||l===void 0||l.optimizeNodes(),(v=this.finally)===null||v===void 0||v.optimizeNodes(),this}optimizeNames(l,v){var j,z;return super.optimizeNames(l,v),(j=this.catch)===null||j===void 0||j.optimizeNames(l,v),(z=this.finally)===null||z===void 0||z.optimizeNames(l,v),this}get names(){const l=super.names;return this.catch&&B(l,this.catch.names),this.finally&&B(l,this.finally.names),l}}class F extends h{constructor(l){super(),this.error=l}render(l){return`catch(${this.error})`+super.render(l)}}F.kind="catch";class L extends h{render(l){return"finally"+super.render(l)}}L.kind="finally";class x{constructor(l,v={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...v,_n:v.lines?`
`:""},this._extScope=l,this._scope=new r.Scope({parent:l}),this._nodes=[new y]}toString(){return this._root.render(this.opts)}name(l){return this._scope.name(l)}scopeName(l){return this._extScope.name(l)}scopeValue(l,v){const j=this._extScope.value(l,v);return(this._values[j.prefix]||(this._values[j.prefix]=new Set)).add(j),j}getScopeValue(l,v){return this._extScope.getValue(l,v)}scopeRefs(l){return this._extScope.scopeRefs(l,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(l,v,j,z){const V=this._scope.toName(v);return j!==void 0&&z&&(this._constants[V.str]=j),this._leafNode(new a(l,V,j)),V}const(l,v,j){return this._def(r.varKinds.const,l,v,j)}let(l,v,j){return this._def(r.varKinds.let,l,v,j)}var(l,v,j){return this._def(r.varKinds.var,l,v,j)}assign(l,v,j){return this._leafNode(new u(l,v,j))}add(l,v){return this._leafNode(new p(l,e.operators.ADD,v))}code(l){return typeof l=="function"?l():l!==t.nil&&this._leafNode(new w(l)),this}object(...l){const v=["{"];for(const[j,z]of l)v.length>1&&v.push(","),v.push(j),(j!==z||this.opts.es5)&&(v.push(":"),(0,t.addCodeArg)(v,z));return v.push("}"),new t._Code(v)}if(l,v,j){if(this._blockNode(new m(l)),v&&j)this.code(v).else().code(j).endIf();else if(v)this.code(v).endIf();else if(j)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(l){return this._elseNode(new m(l))}else(){return this._elseNode(new _)}endIf(){return this._endBlockNode(m,_)}_for(l,v){return this._blockNode(l),v&&this.code(v).endFor(),this}for(l,v){return this._for(new P(l),v)}forRange(l,v,j,z,V=this.opts.es5?r.varKinds.var:r.varKinds.let){const Y=this._scope.toName(l);return this._for(new A(V,Y,v,j),()=>z(Y))}forOf(l,v,j,z=r.varKinds.const){const V=this._scope.toName(l);if(this.opts.es5){const Y=v instanceof t.Name?v:this.var("_arr",v);return this.forRange("_i",0,(0,t._)`${Y}.length`,Z=>{this.var(V,(0,t._)`${Y}[${Z}]`),j(V)})}return this._for(new k("of",z,V,v),()=>j(V))}forIn(l,v,j,z=this.opts.es5?r.varKinds.var:r.varKinds.const){if(this.opts.ownProperties)return this.forOf(l,(0,t._)`Object.keys(${v})`,j);const V=this._scope.toName(l);return this._for(new k("in",z,V,v),()=>j(V))}endFor(){return this._endBlockNode(E)}label(l){return this._leafNode(new c(l))}break(l){return this._leafNode(new i(l))}return(l){const v=new C;if(this._blockNode(v),this.code(l),v.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(C)}try(l,v,j){if(!v&&!j)throw new Error('CodeGen: "try" without "catch" and "finally"');const z=new M;if(this._blockNode(z),this.code(l),v){const V=this.name("e");this._currNode=z.catch=new F(V),v(V)}return j&&(this._currNode=z.finally=new L,this.code(j)),this._endBlockNode(F,L)}throw(l){return this._leafNode(new d(l))}block(l,v){return this._blockStarts.push(this._nodes.length),l&&this.code(l).endBlock(v),this}endBlock(l){const v=this._blockStarts.pop();if(v===void 0)throw new Error("CodeGen: not in self-balancing block");const j=this._nodes.length-v;if(j<0||l!==void 0&&j!==l)throw new Error(`CodeGen: wrong number of nodes: ${j} vs ${l} expected`);return this._nodes.length=v,this}func(l,v=t.nil,j,z){return this._blockNode(new S(l,v,j)),z&&this.code(z).endFunc(),this}endFunc(){return this._endBlockNode(S)}optimize(l=1){for(;l-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(l){return this._currNode.nodes.push(l),this}_blockNode(l){this._currNode.nodes.push(l),this._nodes.push(l)}_endBlockNode(l,v){const j=this._currNode;if(j instanceof l||v&&j instanceof v)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${v?`${l.kind}/${v.kind}`:l.kind}"`)}_elseNode(l){const v=this._currNode;if(!(v instanceof m))throw new Error('CodeGen: "else" without "if"');return this._currNode=v.else=l,this}get _root(){return this._nodes[0]}get _currNode(){const l=this._nodes;return l[l.length-1]}set _currNode(l){const v=this._nodes;v[v.length-1]=l}}e.CodeGen=x;function B(R,l){for(const v in l)R[v]=(R[v]||0)+(l[v]||0);return R}function he(R,l){return l instanceof t._CodeOrName?B(R,l.names):R}function oe(R,l,v){if(R instanceof t.Name)return j(R);if(!z(R))return R;return new t._Code(R._items.reduce((V,Y)=>(Y instanceof t.Name&&(Y=j(Y)),Y instanceof t._Code?V.push(...Y._items):V.push(Y),V),[]));function j(V){const Y=v[V.str];return Y===void 0||l[V.str]!==1?V:(delete l[V.str],Y)}function z(V){return V instanceof t._Code&&V._items.some(Y=>Y instanceof t.Name&&l[Y.str]===1&&v[Y.str]!==void 0)}}function Ne(R,l){for(const v in l)R[v]=(R[v]||0)-(l[v]||0)}function ft(R){return typeof R=="boolean"||typeof R=="number"||R===null?!R:(0,t._)`!${D(R)}`}e.not=ft;const Nt=O(e.operators.AND);function or(...R){return R.reduce(Nt)}e.and=or;const Tt=O(e.operators.OR);function U(...R){return R.reduce(Tt)}e.or=U;function O(R){return(l,v)=>l===t.nil?v:v===t.nil?l:(0,t._)`${D(l)} ${R} ${D(v)}`}function D(R){return R instanceof t.Name?R:(0,t._)`(${R})`}}(W);var te={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.checkStrictMode=e.getErrorPath=e.Type=e.useFunc=e.setEvaluated=e.evaluatedPropsToName=e.mergeEvaluated=e.eachItem=e.unescapeJsonPointer=e.escapeJsonPointer=e.escapeFragment=e.unescapeFragment=e.schemaRefOrVal=e.schemaHasRulesButRef=e.schemaHasRules=e.checkUnknownRules=e.alwaysValidSchema=e.toHash=void 0;const t=W,r=zt;function n(S){const C={};for(const M of S)C[M]=!0;return C}e.toHash=n;function s(S,C){return typeof C=="boolean"?C:Object.keys(C).length===0?!0:(o(S,C),!a(C,S.self.RULES.all))}e.alwaysValidSchema=s;function o(S,C=S.schema){const{opts:M,self:F}=S;if(!M.strictSchema||typeof C=="boolean")return;const L=F.RULES.keywords;for(const x in C)L[x]||k(S,`unknown keyword: "${x}"`)}e.checkUnknownRules=o;function a(S,C){if(typeof S=="boolean")return!S;for(const M in S)if(C[M])return!0;return!1}e.schemaHasRules=a;function u(S,C){if(typeof S=="boolean")return!S;for(const M in S)if(M!=="$ref"&&C.all[M])return!0;return!1}e.schemaHasRulesButRef=u;function p({topSchemaRef:S,schemaPath:C},M,F,L){if(!L){if(typeof M=="number"||typeof M=="boolean")return M;if(typeof M=="string")return(0,t._)`${M}`}return(0,t._)`${S}${C}${(0,t.getProperty)(F)}`}e.schemaRefOrVal=p;function c(S){return w(decodeURIComponent(S))}e.unescapeFragment=c;function i(S){return encodeURIComponent(d(S))}e.escapeFragment=i;function d(S){return typeof S=="number"?`${S}`:S.replace(/~/g,"~0").replace(/\//g,"~1")}e.escapeJsonPointer=d;function w(S){return S.replace(/~1/g,"/").replace(/~0/g,"~")}e.unescapeJsonPointer=w;function b(S,C){if(Array.isArray(S))for(const M of S)C(M);else C(S)}e.eachItem=b;function h({mergeNames:S,mergeToName:C,mergeValues:M,resultToName:F}){return(L,x,B,he)=>{const oe=B===void 0?x:B instanceof t.Name?(x instanceof t.Name?S(L,x,B):C(L,x,B),B):x instanceof t.Name?(C(L,B,x),x):M(x,B);return he===t.Name&&!(oe instanceof t.Name)?F(L,oe):oe}}e.mergeEvaluated={props:h({mergeNames:(S,C,M)=>S.if((0,t._)`${M} !== true && ${C} !== undefined`,()=>{S.if((0,t._)`${C} === true`,()=>S.assign(M,!0),()=>S.assign(M,(0,t._)`${M} || {}`).code((0,t._)`Object.assign(${M}, ${C})`))}),mergeToName:(S,C,M)=>S.if((0,t._)`${M} !== true`,()=>{C===!0?S.assign(M,!0):(S.assign(M,(0,t._)`${M} || {}`),_(S,M,C))}),mergeValues:(S,C)=>S===!0?!0:{...S,...C},resultToName:y}),items:h({mergeNames:(S,C,M)=>S.if((0,t._)`${M} !== true && ${C} !== undefined`,()=>S.assign(M,(0,t._)`${C} === true ? true : ${M} > ${C} ? ${M} : ${C}`)),mergeToName:(S,C,M)=>S.if((0,t._)`${M} !== true`,()=>S.assign(M,C===!0?!0:(0,t._)`${M} > ${C} ? ${M} : ${C}`)),mergeValues:(S,C)=>S===!0?!0:Math.max(S,C),resultToName:(S,C)=>S.var("items",C)})};function y(S,C){if(C===!0)return S.var("props",!0);const M=S.var("props",(0,t._)`{}`);return C!==void 0&&_(S,M,C),M}e.evaluatedPropsToName=y;function _(S,C,M){Object.keys(M).forEach(F=>S.assign((0,t._)`${C}${(0,t.getProperty)(F)}`,!0))}e.setEvaluated=_;const m={};function E(S,C){return S.scopeValue("func",{ref:C,code:m[C.code]||(m[C.code]=new r._Code(C.code))})}e.useFunc=E;var P;(function(S){S[S.Num=0]="Num",S[S.Str=1]="Str"})(P=e.Type||(e.Type={}));function A(S,C,M){if(S instanceof t.Name){const F=C===P.Num;return M?F?(0,t._)`"[" + ${S} + "]"`:(0,t._)`"['" + ${S} + "']"`:F?(0,t._)`"/" + ${S}`:(0,t._)`"/" + ${S}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return M?(0,t.getProperty)(S).toString():"/"+d(S)}e.getErrorPath=A;function k(S,C,M=S.opts.strictSchema){if(M){if(C=`strict mode: ${C}`,M===!0)throw new Error(C);S.self.logger.warn(C)}}e.checkStrictMode=k})(te);var ke={};Object.defineProperty(ke,"__esModule",{value:!0});const _e=W,Ta={data:new _e.Name("data"),valCxt:new _e.Name("valCxt"),instancePath:new _e.Name("instancePath"),parentData:new _e.Name("parentData"),parentDataProperty:new _e.Name("parentDataProperty"),rootData:new _e.Name("rootData"),dynamicAnchors:new _e.Name("dynamicAnchors"),vErrors:new _e.Name("vErrors"),errors:new _e.Name("errors"),this:new _e.Name("this"),self:new _e.Name("self"),scope:new _e.Name("scope"),json:new _e.Name("json"),jsonPos:new _e.Name("jsonPos"),jsonLen:new _e.Name("jsonLen"),jsonPart:new _e.Name("jsonPart")};ke.default=Ta,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=W,r=te,n=ke;e.keywordError={message:({keyword:_})=>(0,t.str)`must pass "${_}" keyword validation`},e.keyword$DataError={message:({keyword:_,schemaType:m})=>m?(0,t.str)`"${_}" keyword must be ${m} ($data)`:(0,t.str)`"${_}" keyword is invalid ($data)`};function s(_,m=e.keywordError,E,P){const{it:A}=_,{gen:k,compositeRule:S,allErrors:C}=A,M=d(_,m,E);P??(S||C)?p(k,M):c(A,(0,t._)`[${M}]`)}e.reportError=s;function o(_,m=e.keywordError,E){const{it:P}=_,{gen:A,compositeRule:k,allErrors:S}=P,C=d(_,m,E);p(A,C),k||S||c(P,n.default.vErrors)}e.reportExtraError=o;function a(_,m){_.assign(n.default.errors,m),_.if((0,t._)`${n.default.vErrors} !== null`,()=>_.if(m,()=>_.assign((0,t._)`${n.default.vErrors}.length`,m),()=>_.assign(n.default.vErrors,null)))}e.resetErrorsCount=a;function u({gen:_,keyword:m,schemaValue:E,data:P,errsCount:A,it:k}){if(A===void 0)throw new Error("ajv implementation error");const S=_.name("err");_.forRange("i",A,n.default.errors,C=>{_.const(S,(0,t._)`${n.default.vErrors}[${C}]`),_.if((0,t._)`${S}.instancePath === undefined`,()=>_.assign((0,t._)`${S}.instancePath`,(0,t.strConcat)(n.default.instancePath,k.errorPath))),_.assign((0,t._)`${S}.schemaPath`,(0,t.str)`${k.errSchemaPath}/${m}`),k.opts.verbose&&(_.assign((0,t._)`${S}.schema`,E),_.assign((0,t._)`${S}.data`,P))})}e.extendErrors=u;function p(_,m){const E=_.const("err",m);_.if((0,t._)`${n.default.vErrors} === null`,()=>_.assign(n.default.vErrors,(0,t._)`[${E}]`),(0,t._)`${n.default.vErrors}.push(${E})`),_.code((0,t._)`${n.default.errors}++`)}function c(_,m){const{gen:E,validateName:P,schemaEnv:A}=_;A.$async?E.throw((0,t._)`new ${_.ValidationError}(${m})`):(E.assign((0,t._)`${P}.errors`,m),E.return(!1))}const i={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function d(_,m,E){const{createErrors:P}=_.it;return P===!1?(0,t._)`{}`:w(_,m,E)}function w(_,m,E={}){const{gen:P,it:A}=_,k=[b(A,E),h(_,E)];return y(_,m,k),P.object(...k)}function b({errorPath:_},{instancePath:m}){const E=m?(0,t.str)`${_}${(0,r.getErrorPath)(m,r.Type.Str)}`:_;return[n.default.instancePath,(0,t.strConcat)(n.default.instancePath,E)]}function h({keyword:_,it:{errSchemaPath:m}},{schemaPath:E,parentSchema:P}){let A=P?m:(0,t.str)`${m}/${_}`;return E&&(A=(0,t.str)`${A}${(0,r.getErrorPath)(E,r.Type.Str)}`),[i.schemaPath,A]}function y(_,{params:m,message:E},P){const{keyword:A,data:k,schemaValue:S,it:C}=_,{opts:M,propertyName:F,topSchemaRef:L,schemaPath:x}=C;P.push([i.keyword,A],[i.params,typeof m=="function"?m(_):m||(0,t._)`{}`]),M.messages&&P.push([i.message,typeof E=="function"?E(_):E]),M.verbose&&P.push([i.schema,S],[i.parentSchema,(0,t._)`${L}${x}`],[n.default.data,k]),F&&P.push([i.propertyName,F])}}(Ut),Object.defineProperty(gt,"__esModule",{value:!0}),gt.boolOrEmptySchema=gt.topBoolOrEmptySchema=void 0;const Ca=Ut,Aa=W,ja=ke,Ia={message:"boolean schema is false"};function Da(e){const{gen:t,schema:r,validateName:n}=e;r===!1?_s(e,!1):typeof r=="object"&&r.$async===!0?t.return(ja.default.data):(t.assign((0,Aa._)`${n}.errors`,null),t.return(!0))}gt.topBoolOrEmptySchema=Da;function ka(e,t){const{gen:r,schema:n}=e;n===!1?(r.var(t,!1),_s(e)):r.var(t,!0)}gt.boolOrEmptySchema=ka;function _s(e,t){const{gen:r,data:n}=e,s={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,Ca.reportError)(s,Ia,void 0,t)}var Vt={},at={};Object.defineProperty(at,"__esModule",{value:!0}),at.getRules=at.isJSONType=void 0;const Ma=["string","number","integer","boolean","null","object","array"],Fa=new Set(Ma);function Ua(e){return typeof e=="string"&&Fa.has(e)}at.isJSONType=Ua;function za(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}at.getRules=za;var Je={};Object.defineProperty(Je,"__esModule",{value:!0}),Je.shouldUseRule=Je.shouldUseGroup=Je.schemaHasRulesForType=void 0;function Va({schema:e,self:t},r){const n=t.RULES.types[r];return n&&n!==!0&&ws(e,n)}Je.schemaHasRulesForType=Va;function ws(e,t){return t.rules.some(r=>bs(e,r))}Je.shouldUseGroup=ws;function bs(e,t){var r;return e[t.keyword]!==void 0||((r=t.definition.implements)===null||r===void 0?void 0:r.some(n=>e[n]!==void 0))}Je.shouldUseRule=bs,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.reportTypeError=e.checkDataTypes=e.checkDataType=e.coerceAndCheckDataType=e.getJSONTypes=e.getSchemaTypes=e.DataType=void 0;const t=at,r=Je,n=Ut,s=W,o=te;var a;(function(P){P[P.Correct=0]="Correct",P[P.Wrong=1]="Wrong"})(a=e.DataType||(e.DataType={}));function u(P){const A=p(P.type);if(A.includes("null")){if(P.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!A.length&&P.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');P.nullable===!0&&A.push("null")}return A}e.getSchemaTypes=u;function p(P){const A=Array.isArray(P)?P:P?[P]:[];if(A.every(t.isJSONType))return A;throw new Error("type must be JSONType or JSONType[]: "+A.join(","))}e.getJSONTypes=p;function c(P,A){const{gen:k,data:S,opts:C}=P,M=d(A,C.coerceTypes),F=A.length>0&&!(M.length===0&&A.length===1&&(0,r.schemaHasRulesForType)(P,A[0]));if(F){const L=y(A,S,C.strictNumbers,a.Wrong);k.if(L,()=>{M.length?w(P,A,M):m(P)})}return F}e.coerceAndCheckDataType=c;const i=new Set(["string","number","integer","boolean","null"]);function d(P,A){return A?P.filter(k=>i.has(k)||A==="array"&&k==="array"):[]}function w(P,A,k){const{gen:S,data:C,opts:M}=P,F=S.let("dataType",(0,s._)`typeof ${C}`),L=S.let("coerced",(0,s._)`undefined`);M.coerceTypes==="array"&&S.if((0,s._)`${F} == 'object' && Array.isArray(${C}) && ${C}.length == 1`,()=>S.assign(C,(0,s._)`${C}[0]`).assign(F,(0,s._)`typeof ${C}`).if(y(A,C,M.strictNumbers),()=>S.assign(L,C))),S.if((0,s._)`${L} !== undefined`);for(const B of k)(i.has(B)||B==="array"&&M.coerceTypes==="array")&&x(B);S.else(),m(P),S.endIf(),S.if((0,s._)`${L} !== undefined`,()=>{S.assign(C,L),b(P,L)});function x(B){switch(B){case"string":S.elseIf((0,s._)`${F} == "number" || ${F} == "boolean"`).assign(L,(0,s._)`"" + ${C}`).elseIf((0,s._)`${C} === null`).assign(L,(0,s._)`""`);return;case"number":S.elseIf((0,s._)`${F} == "boolean" || ${C} === null
              || (${F} == "string" && ${C} && ${C} == +${C})`).assign(L,(0,s._)`+${C}`);return;case"integer":S.elseIf((0,s._)`${F} === "boolean" || ${C} === null
              || (${F} === "string" && ${C} && ${C} == +${C} && !(${C} % 1))`).assign(L,(0,s._)`+${C}`);return;case"boolean":S.elseIf((0,s._)`${C} === "false" || ${C} === 0 || ${C} === null`).assign(L,!1).elseIf((0,s._)`${C} === "true" || ${C} === 1`).assign(L,!0);return;case"null":S.elseIf((0,s._)`${C} === "" || ${C} === 0 || ${C} === false`),S.assign(L,null);return;case"array":S.elseIf((0,s._)`${F} === "string" || ${F} === "number"
              || ${F} === "boolean" || ${C} === null`).assign(L,(0,s._)`[${C}]`)}}}function b({gen:P,parentData:A,parentDataProperty:k},S){P.if((0,s._)`${A} !== undefined`,()=>P.assign((0,s._)`${A}[${k}]`,S))}function h(P,A,k,S=a.Correct){const C=S===a.Correct?s.operators.EQ:s.operators.NEQ;let M;switch(P){case"null":return(0,s._)`${A} ${C} null`;case"array":M=(0,s._)`Array.isArray(${A})`;break;case"object":M=(0,s._)`${A} && typeof ${A} == "object" && !Array.isArray(${A})`;break;case"integer":M=F((0,s._)`!(${A} % 1) && !isNaN(${A})`);break;case"number":M=F();break;default:return(0,s._)`typeof ${A} ${C} ${P}`}return S===a.Correct?M:(0,s.not)(M);function F(L=s.nil){return(0,s.and)((0,s._)`typeof ${A} == "number"`,L,k?(0,s._)`isFinite(${A})`:s.nil)}}e.checkDataType=h;function y(P,A,k,S){if(P.length===1)return h(P[0],A,k,S);let C;const M=(0,o.toHash)(P);if(M.array&&M.object){const F=(0,s._)`typeof ${A} != "object"`;C=M.null?F:(0,s._)`!${A} || ${F}`,delete M.null,delete M.array,delete M.object}else C=s.nil;M.number&&delete M.integer;for(const F in M)C=(0,s.and)(C,h(F,A,k,S));return C}e.checkDataTypes=y;const _={message:({schema:P})=>`must be ${P}`,params:({schema:P,schemaValue:A})=>typeof P=="string"?(0,s._)`{type: ${P}}`:(0,s._)`{type: ${A}}`};function m(P){const A=E(P);(0,n.reportError)(A,_)}e.reportTypeError=m;function E(P){const{gen:A,data:k,schema:S}=P,C=(0,o.schemaRefOrVal)(P,S,"type");return{gen:A,keyword:"type",data:k,schema:S.type,schemaCode:C,schemaValue:C,parentSchema:S,params:{},it:P}}}(Vt);var mr={};Object.defineProperty(mr,"__esModule",{value:!0}),mr.assignDefaults=void 0;const vt=W,La=te;function qa(e,t){const{properties:r,items:n}=e.schema;if(t==="object"&&r)for(const s in r)Es(e,s,r[s].default);else t==="array"&&Array.isArray(n)&&n.forEach((s,o)=>Es(e,o,s.default))}mr.assignDefaults=qa;function Es(e,t,r){const{gen:n,compositeRule:s,data:o,opts:a}=e;if(r===void 0)return;const u=(0,vt._)`${o}${(0,vt.getProperty)(t)}`;if(s){(0,La.checkStrictMode)(e,`default is ignored for: ${u}`);return}let p=(0,vt._)`${u} === undefined`;a.useDefaults==="empty"&&(p=(0,vt._)`${p} || ${u} === null || ${u} === ""`),n.if(p,(0,vt._)`${u} = ${(0,vt.stringify)(r)}`)}var Me={},X={};Object.defineProperty(X,"__esModule",{value:!0}),X.validateUnion=X.validateArray=X.usePattern=X.callValidateCode=X.schemaProperties=X.allSchemaProperties=X.noPropertyInData=X.propertyInData=X.isOwnProperty=X.hasPropFunc=X.reportMissingProp=X.checkMissingProp=X.checkReportMissingProp=void 0;const se=W,rn=te,et=ke,Ha=te;function Ka(e,t){const{gen:r,data:n,it:s}=e;r.if(sn(r,n,t,s.opts.ownProperties),()=>{e.setParams({missingProperty:(0,se._)`${t}`},!0),e.error()})}X.checkReportMissingProp=Ka;function Ba({gen:e,data:t,it:{opts:r}},n,s){return(0,se.or)(...n.map(o=>(0,se.and)(sn(e,t,o,r.ownProperties),(0,se._)`${s} = ${o}`)))}X.checkMissingProp=Ba;function Ga(e,t){e.setParams({missingProperty:t},!0),e.error()}X.reportMissingProp=Ga;function Ss(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,se._)`Object.prototype.hasOwnProperty`})}X.hasPropFunc=Ss;function nn(e,t,r){return(0,se._)`${Ss(e)}.call(${t}, ${r})`}X.isOwnProperty=nn;function Ja(e,t,r,n){const s=(0,se._)`${t}${(0,se.getProperty)(r)} !== undefined`;return n?(0,se._)`${s} && ${nn(e,t,r)}`:s}X.propertyInData=Ja;function sn(e,t,r,n){const s=(0,se._)`${t}${(0,se.getProperty)(r)} === undefined`;return n?(0,se.or)(s,(0,se.not)(nn(e,t,r))):s}X.noPropertyInData=sn;function Ps(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}X.allSchemaProperties=Ps;function Wa(e,t){return Ps(t).filter(r=>!(0,rn.alwaysValidSchema)(e,t[r]))}X.schemaProperties=Wa;function xa({schemaCode:e,data:t,it:{gen:r,topSchemaRef:n,schemaPath:s,errorPath:o},it:a},u,p,c){const i=c?(0,se._)`${e}, ${t}, ${n}${s}`:t,d=[[et.default.instancePath,(0,se.strConcat)(et.default.instancePath,o)],[et.default.parentData,a.parentData],[et.default.parentDataProperty,a.parentDataProperty],[et.default.rootData,et.default.rootData]];a.opts.dynamicRef&&d.push([et.default.dynamicAnchors,et.default.dynamicAnchors]);const w=(0,se._)`${i}, ${r.object(...d)}`;return p!==se.nil?(0,se._)`${u}.call(${p}, ${w})`:(0,se._)`${u}(${w})`}X.callValidateCode=xa;const Xa=(0,se._)`new RegExp`;function Ya({gen:e,it:{opts:t}},r){const n=t.unicodeRegExp?"u":"",{regExp:s}=t.code,o=s(r,n);return e.scopeValue("pattern",{key:o.toString(),ref:o,code:(0,se._)`${s.code==="new RegExp"?Xa:(0,Ha.useFunc)(e,s)}(${r}, ${n})`})}X.usePattern=Ya;function Qa(e){const{gen:t,data:r,keyword:n,it:s}=e,o=t.name("valid");if(s.allErrors){const u=t.let("valid",!0);return a(()=>t.assign(u,!1)),u}return t.var(o,!0),a(()=>t.break()),o;function a(u){const p=t.const("len",(0,se._)`${r}.length`);t.forRange("i",0,p,c=>{e.subschema({keyword:n,dataProp:c,dataPropType:rn.Type.Num},o),t.if((0,se.not)(o),u)})}}X.validateArray=Qa;function Za(e){const{gen:t,schema:r,keyword:n,it:s}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(p=>(0,rn.alwaysValidSchema)(s,p))&&!s.opts.unevaluated)return;const a=t.let("valid",!1),u=t.name("_valid");t.block(()=>r.forEach((p,c)=>{const i=e.subschema({keyword:n,schemaProp:c,compositeRule:!0},u);t.assign(a,(0,se._)`${a} || ${u}`),e.mergeValidEvaluated(i,u)||t.if((0,se.not)(a))})),e.result(a,()=>e.reset(),()=>e.error(!0))}X.validateUnion=Za,Object.defineProperty(Me,"__esModule",{value:!0}),Me.validateKeywordUsage=Me.validSchemaType=Me.funcKeywordCode=Me.macroKeywordCode=void 0;const we=W,it=ke,ei=X,ti=Ut;function ri(e,t){const{gen:r,keyword:n,schema:s,parentSchema:o,it:a}=e,u=t.macro.call(a.self,s,o,a),p=Rs(r,n,u);a.opts.validateSchema!==!1&&a.self.validateSchema(u,!0);const c=r.name("valid");e.subschema({schema:u,schemaPath:we.nil,errSchemaPath:`${a.errSchemaPath}/${n}`,topSchemaRef:p,compositeRule:!0},c),e.pass(c,()=>e.error(!0))}Me.macroKeywordCode=ri;function ni(e,t){var r;const{gen:n,keyword:s,schema:o,parentSchema:a,$data:u,it:p}=e;oi(p,t);const c=!u&&t.compile?t.compile.call(p.self,o,a,p):t.validate,i=Rs(n,s,c),d=n.let("valid");e.block$data(d,w),e.ok((r=t.valid)!==null&&r!==void 0?r:d);function w(){if(t.errors===!1)y(),t.modifying&&Os(e),_(()=>e.error());else{const m=t.async?b():h();t.modifying&&Os(e),_(()=>si(e,m))}}function b(){const m=n.let("ruleErrs",null);return n.try(()=>y((0,we._)`await `),E=>n.assign(d,!1).if((0,we._)`${E} instanceof ${p.ValidationError}`,()=>n.assign(m,(0,we._)`${E}.errors`),()=>n.throw(E))),m}function h(){const m=(0,we._)`${i}.errors`;return n.assign(m,null),y(we.nil),m}function y(m=t.async?(0,we._)`await `:we.nil){const E=p.opts.passContext?it.default.this:it.default.self,P=!("compile"in t&&!u||t.schema===!1);n.assign(d,(0,we._)`${m}${(0,ei.callValidateCode)(e,i,E,P)}`,t.modifying)}function _(m){var E;n.if((0,we.not)((E=t.valid)!==null&&E!==void 0?E:d),m)}}Me.funcKeywordCode=ni;function Os(e){const{gen:t,data:r,it:n}=e;t.if(n.parentData,()=>t.assign(r,(0,we._)`${n.parentData}[${n.parentDataProperty}]`))}function si(e,t){const{gen:r}=e;r.if((0,we._)`Array.isArray(${t})`,()=>{r.assign(it.default.vErrors,(0,we._)`${it.default.vErrors} === null ? ${t} : ${it.default.vErrors}.concat(${t})`).assign(it.default.errors,(0,we._)`${it.default.vErrors}.length`),(0,ti.extendErrors)(e)},()=>e.error())}function oi({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function Rs(e,t,r){if(r===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,we.stringify)(r)})}function ai(e,t,r=!1){return!t.length||t.some(n=>n==="array"?Array.isArray(e):n==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==n||r&&typeof e>"u")}Me.validSchemaType=ai;function ii({schema:e,opts:t,self:r,errSchemaPath:n},s,o){if(Array.isArray(s.keyword)?!s.keyword.includes(o):s.keyword!==o)throw new Error("ajv implementation error");const a=s.dependencies;if(a!=null&&a.some(u=>!Object.prototype.hasOwnProperty.call(e,u)))throw new Error(`parent schema must have dependencies of ${o}: ${a.join(",")}`);if(s.validateSchema&&!s.validateSchema(e[o])){const p=`keyword "${o}" value is invalid at path "${n}": `+r.errorsText(s.validateSchema.errors);if(t.validateSchema==="log")r.logger.error(p);else throw new Error(p)}}Me.validateKeywordUsage=ii;var tt={};Object.defineProperty(tt,"__esModule",{value:!0}),tt.extendSubschemaMode=tt.extendSubschemaData=tt.getSubschema=void 0;const Fe=W,Ns=te;function ci(e,{keyword:t,schemaProp:r,schema:n,schemaPath:s,errSchemaPath:o,topSchemaRef:a}){if(t!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const u=e.schema[t];return r===void 0?{schema:u,schemaPath:(0,Fe._)`${e.schemaPath}${(0,Fe.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:u[r],schemaPath:(0,Fe._)`${e.schemaPath}${(0,Fe.getProperty)(t)}${(0,Fe.getProperty)(r)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,Ns.escapeFragment)(r)}`}}if(n!==void 0){if(s===void 0||o===void 0||a===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:s,topSchemaRef:a,errSchemaPath:o}}throw new Error('either "keyword" or "schema" must be passed')}tt.getSubschema=ci;function ui(e,t,{dataProp:r,dataPropType:n,data:s,dataTypes:o,propertyName:a}){if(s!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:u}=t;if(r!==void 0){const{errorPath:c,dataPathArr:i,opts:d}=t,w=u.let("data",(0,Fe._)`${t.data}${(0,Fe.getProperty)(r)}`,!0);p(w),e.errorPath=(0,Fe.str)`${c}${(0,Ns.getErrorPath)(r,n,d.jsPropertySyntax)}`,e.parentDataProperty=(0,Fe._)`${r}`,e.dataPathArr=[...i,e.parentDataProperty]}if(s!==void 0){const c=s instanceof Fe.Name?s:u.let("data",s,!0);p(c),a!==void 0&&(e.propertyName=a)}o&&(e.dataTypes=o);function p(c){e.data=c,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,c]}}tt.extendSubschemaData=ui;function li(e,{jtdDiscriminator:t,jtdMetadata:r,compositeRule:n,createErrors:s,allErrors:o}){n!==void 0&&(e.compositeRule=n),s!==void 0&&(e.createErrors=s),o!==void 0&&(e.allErrors=o),e.jtdDiscriminator=t,e.jtdMetadata=r}tt.extendSubschemaMode=li;var ve={},Ts=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,s,o;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(s=n;s--!==0;)if(!e(t[s],r[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(o=Object.keys(t),n=o.length,n!==Object.keys(r).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[s]))return!1;for(s=n;s--!==0;){var a=o[s];if(!e(t[a],r[a]))return!1}return!0}return t!==t&&r!==r},on={},di={get exports(){return on},set exports(e){on=e}},rt=di.exports=function(e,t,r){typeof t=="function"&&(r=t,t={}),r=t.cb||r;var n=typeof r=="function"?r:r.pre||function(){},s=r.post||function(){};yr(t,n,s,e,"",e)};rt.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},rt.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},rt.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},rt.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function yr(e,t,r,n,s,o,a,u,p,c){if(n&&typeof n=="object"&&!Array.isArray(n)){t(n,s,o,a,u,p,c);for(var i in n){var d=n[i];if(Array.isArray(d)){if(i in rt.arrayKeywords)for(var w=0;w<d.length;w++)yr(e,t,r,d[w],s+"/"+i+"/"+w,o,s,i,n,w)}else if(i in rt.propsKeywords){if(d&&typeof d=="object")for(var b in d)yr(e,t,r,d[b],s+"/"+i+"/"+fi(b),o,s,i,n,b)}else(i in rt.keywords||e.allKeys&&!(i in rt.skipKeywords))&&yr(e,t,r,d,s+"/"+i,o,s,i,n)}r(n,s,o,a,u,p,c)}}function fi(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}Object.defineProperty(ve,"__esModule",{value:!0}),ve.getSchemaRefs=ve.resolveUrl=ve.normalizeId=ve._getFullPath=ve.getFullPath=ve.inlineRef=void 0;const pi=te,hi=Ts,mi=on,yi=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function gi(e,t=!0){return typeof e=="boolean"?!0:t===!0?!an(e):t?Cs(e)<=t:!1}ve.inlineRef=gi;const vi=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function an(e){for(const t in e){if(vi.has(t))return!0;const r=e[t];if(Array.isArray(r)&&r.some(an)||typeof r=="object"&&an(r))return!0}return!1}function Cs(e){let t=0;for(const r in e){if(r==="$ref")return 1/0;if(t++,!yi.has(r)&&(typeof e[r]=="object"&&(0,pi.eachItem)(e[r],n=>t+=Cs(n)),t===1/0))return 1/0}return t}function As(e,t="",r){r!==!1&&(t=$t(t));const n=e.parse(t);return js(e,n)}ve.getFullPath=As;function js(e,t){return e.serialize(t).split("#")[0]+"#"}ve._getFullPath=js;const $i=/#\/?$/;function $t(e){return e?e.replace($i,""):""}ve.normalizeId=$t;function _i(e,t,r){return r=$t(r),e.resolve(t,r)}ve.resolveUrl=_i;const wi=/^[a-z_][-a-z0-9._]*$/i;function bi(e,t){if(typeof e=="boolean")return{};const{schemaId:r,uriResolver:n}=this.opts,s=$t(e[r]||t),o={"":s},a=As(n,s,!1),u={},p=new Set;return mi(e,{allKeys:!0},(d,w,b,h)=>{if(h===void 0)return;const y=a+w;let _=o[h];typeof d[r]=="string"&&(_=m.call(this,d[r])),E.call(this,d.$anchor),E.call(this,d.$dynamicAnchor),o[w]=_;function m(P){const A=this.opts.uriResolver.resolve;if(P=$t(_?A(_,P):P),p.has(P))throw i(P);p.add(P);let k=this.refs[P];return typeof k=="string"&&(k=this.refs[k]),typeof k=="object"?c(d,k.schema,P):P!==$t(y)&&(P[0]==="#"?(c(d,u[P],P),u[P]=d):this.refs[P]=y),P}function E(P){if(typeof P=="string"){if(!wi.test(P))throw new Error(`invalid anchor "${P}"`);m.call(this,`#${P}`)}}}),u;function c(d,w,b){if(w!==void 0&&!hi(d,w))throw i(b)}function i(d){return new Error(`reference "${d}" resolves to more than one schema`)}}ve.getSchemaRefs=bi,Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.getData=Ae.KeywordCxt=Ae.validateFunctionCode=void 0;const Is=gt,Ds=Vt,cn=Je,gr=Vt,Ei=mr,Lt=Me,un=tt,q=W,G=ke,Si=ve,We=te,qt=Ut;function Pi(e){if(Us(e)&&(zs(e),Fs(e))){Ni(e);return}ks(e,()=>(0,Is.topBoolOrEmptySchema)(e))}Ae.validateFunctionCode=Pi;function ks({gen:e,validateName:t,schema:r,schemaEnv:n,opts:s},o){s.code.es5?e.func(t,(0,q._)`${G.default.data}, ${G.default.valCxt}`,n.$async,()=>{e.code((0,q._)`"use strict"; ${Ms(r,s)}`),Ri(e,s),e.code(o)}):e.func(t,(0,q._)`${G.default.data}, ${Oi(s)}`,n.$async,()=>e.code(Ms(r,s)).code(o))}function Oi(e){return(0,q._)`{${G.default.instancePath}="", ${G.default.parentData}, ${G.default.parentDataProperty}, ${G.default.rootData}=${G.default.data}${e.dynamicRef?(0,q._)`, ${G.default.dynamicAnchors}={}`:q.nil}}={}`}function Ri(e,t){e.if(G.default.valCxt,()=>{e.var(G.default.instancePath,(0,q._)`${G.default.valCxt}.${G.default.instancePath}`),e.var(G.default.parentData,(0,q._)`${G.default.valCxt}.${G.default.parentData}`),e.var(G.default.parentDataProperty,(0,q._)`${G.default.valCxt}.${G.default.parentDataProperty}`),e.var(G.default.rootData,(0,q._)`${G.default.valCxt}.${G.default.rootData}`),t.dynamicRef&&e.var(G.default.dynamicAnchors,(0,q._)`${G.default.valCxt}.${G.default.dynamicAnchors}`)},()=>{e.var(G.default.instancePath,(0,q._)`""`),e.var(G.default.parentData,(0,q._)`undefined`),e.var(G.default.parentDataProperty,(0,q._)`undefined`),e.var(G.default.rootData,G.default.data),t.dynamicRef&&e.var(G.default.dynamicAnchors,(0,q._)`{}`)})}function Ni(e){const{schema:t,opts:r,gen:n}=e;ks(e,()=>{r.$comment&&t.$comment&&Ls(e),Ii(e),n.let(G.default.vErrors,null),n.let(G.default.errors,0),r.unevaluated&&Ti(e),Vs(e),Mi(e)})}function Ti(e){const{gen:t,validateName:r}=e;e.evaluated=t.const("evaluated",(0,q._)`${r}.evaluated`),t.if((0,q._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,q._)`${e.evaluated}.props`,(0,q._)`undefined`)),t.if((0,q._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,q._)`${e.evaluated}.items`,(0,q._)`undefined`))}function Ms(e,t){const r=typeof e=="object"&&e[t.schemaId];return r&&(t.code.source||t.code.process)?(0,q._)`/*# sourceURL=${r} */`:q.nil}function Ci(e,t){if(Us(e)&&(zs(e),Fs(e))){Ai(e,t);return}(0,Is.boolOrEmptySchema)(e,t)}function Fs({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const r in e)if(t.RULES.all[r])return!0;return!1}function Us(e){return typeof e.schema!="boolean"}function Ai(e,t){const{schema:r,gen:n,opts:s}=e;s.$comment&&r.$comment&&Ls(e),Di(e),ki(e);const o=n.const("_errs",G.default.errors);Vs(e,o),n.var(t,(0,q._)`${o} === ${G.default.errors}`)}function zs(e){(0,We.checkUnknownRules)(e),ji(e)}function Vs(e,t){if(e.opts.jtd)return qs(e,[],!1,t);const r=(0,Ds.getSchemaTypes)(e.schema),n=(0,Ds.coerceAndCheckDataType)(e,r);qs(e,r,!n,t)}function ji(e){const{schema:t,errSchemaPath:r,opts:n,self:s}=e;t.$ref&&n.ignoreKeywordsWithRef&&(0,We.schemaHasRulesButRef)(t,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function Ii(e){const{schema:t,opts:r}=e;t.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,We.checkStrictMode)(e,"default is ignored in the schema root")}function Di(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,Si.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function ki(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function Ls({gen:e,schemaEnv:t,schema:r,errSchemaPath:n,opts:s}){const o=r.$comment;if(s.$comment===!0)e.code((0,q._)`${G.default.self}.logger.log(${o})`);else if(typeof s.$comment=="function"){const a=(0,q.str)`${n}/$comment`,u=e.scopeValue("root",{ref:t.root});e.code((0,q._)`${G.default.self}.opts.$comment(${o}, ${a}, ${u}.schema)`)}}function Mi(e){const{gen:t,schemaEnv:r,validateName:n,ValidationError:s,opts:o}=e;r.$async?t.if((0,q._)`${G.default.errors} === 0`,()=>t.return(G.default.data),()=>t.throw((0,q._)`new ${s}(${G.default.vErrors})`)):(t.assign((0,q._)`${n}.errors`,G.default.vErrors),o.unevaluated&&Fi(e),t.return((0,q._)`${G.default.errors} === 0`))}function Fi({gen:e,evaluated:t,props:r,items:n}){r instanceof q.Name&&e.assign((0,q._)`${t}.props`,r),n instanceof q.Name&&e.assign((0,q._)`${t}.items`,n)}function qs(e,t,r,n){const{gen:s,schema:o,data:a,allErrors:u,opts:p,self:c}=e,{RULES:i}=c;if(o.$ref&&(p.ignoreKeywordsWithRef||!(0,We.schemaHasRulesButRef)(o,i))){s.block(()=>Gs(e,"$ref",i.all.$ref.definition));return}p.jtd||Ui(e,t),s.block(()=>{for(const w of i.rules)d(w);d(i.post)});function d(w){(0,cn.shouldUseGroup)(o,w)&&(w.type?(s.if((0,gr.checkDataType)(w.type,a,p.strictNumbers)),Hs(e,w),t.length===1&&t[0]===w.type&&r&&(s.else(),(0,gr.reportTypeError)(e)),s.endIf()):Hs(e,w),u||s.if((0,q._)`${G.default.errors} === ${n||0}`))}}function Hs(e,t){const{gen:r,schema:n,opts:{useDefaults:s}}=e;s&&(0,Ei.assignDefaults)(e,t.type),r.block(()=>{for(const o of t.rules)(0,cn.shouldUseRule)(n,o)&&Gs(e,o.keyword,o.definition,t.type)})}function Ui(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(zi(e,t),e.opts.allowUnionTypes||Vi(e,t),Li(e,e.dataTypes))}function zi(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(r=>{Ks(e.dataTypes,r)||ln(e,`type "${r}" not allowed by context "${e.dataTypes.join(",")}"`)}),Hi(e,t)}}function Vi(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&ln(e,"use allowUnionTypes to allow union type keyword")}function Li(e,t){const r=e.self.RULES.all;for(const n in r){const s=r[n];if(typeof s=="object"&&(0,cn.shouldUseRule)(e.schema,s)){const{type:o}=s.definition;o.length&&!o.some(a=>qi(t,a))&&ln(e,`missing type "${o.join(",")}" for keyword "${n}"`)}}}function qi(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function Ks(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function Hi(e,t){const r=[];for(const n of e.dataTypes)Ks(t,n)?r.push(n):t.includes("integer")&&n==="number"&&r.push("integer");e.dataTypes=r}function ln(e,t){const r=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${r}" (strictTypes)`,(0,We.checkStrictMode)(e,t,e.opts.strictTypes)}class Bs{constructor(t,r,n){if((0,Lt.validateKeywordUsage)(t,r,n),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=n,this.data=t.data,this.schema=t.schema[n],this.$data=r.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,We.schemaRefOrVal)(t,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=r,this.$data)this.schemaCode=t.gen.const("vSchema",Js(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,Lt.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=t.gen.const("_errs",G.default.errors))}result(t,r,n){this.failResult((0,q.not)(t),r,n)}failResult(t,r,n){this.gen.if(t),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,r){this.failResult((0,q.not)(t),void 0,r)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:r}=this;this.fail((0,q._)`${r} !== undefined && (${(0,q.or)(this.invalid$data(),t)})`)}error(t,r,n){if(r){this.setParams(r),this._error(t,n),this.setParams({});return}this._error(t,n)}_error(t,r){(t?qt.reportExtraError:qt.reportError)(this,this.def.error,r)}$dataError(){(0,qt.reportError)(this,this.def.$dataError||qt.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,qt.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,r){r?Object.assign(this.params,t):this.params=t}block$data(t,r,n=q.nil){this.gen.block(()=>{this.check$data(t,n),r()})}check$data(t=q.nil,r=q.nil){if(!this.$data)return;const{gen:n,schemaCode:s,schemaType:o,def:a}=this;n.if((0,q.or)((0,q._)`${s} === undefined`,r)),t!==q.nil&&n.assign(t,!0),(o.length||a.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),t!==q.nil&&n.assign(t,!1)),n.else()}invalid$data(){const{gen:t,schemaCode:r,schemaType:n,def:s,it:o}=this;return(0,q.or)(a(),u());function a(){if(n.length){if(!(r instanceof q.Name))throw new Error("ajv implementation error");const p=Array.isArray(n)?n:[n];return(0,q._)`${(0,gr.checkDataTypes)(p,r,o.opts.strictNumbers,gr.DataType.Wrong)}`}return q.nil}function u(){if(s.validateSchema){const p=t.scopeValue("validate$data",{ref:s.validateSchema});return(0,q._)`!${p}(${r})`}return q.nil}}subschema(t,r){const n=(0,un.getSubschema)(this.it,t);(0,un.extendSubschemaData)(n,this.it,t),(0,un.extendSubschemaMode)(n,t);const s={...this.it,...n,items:void 0,props:void 0};return Ci(s,r),s}mergeEvaluated(t,r){const{it:n,gen:s}=this;n.opts.unevaluated&&(n.props!==!0&&t.props!==void 0&&(n.props=We.mergeEvaluated.props(s,t.props,n.props,r)),n.items!==!0&&t.items!==void 0&&(n.items=We.mergeEvaluated.items(s,t.items,n.items,r)))}mergeValidEvaluated(t,r){const{it:n,gen:s}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return s.if(r,()=>this.mergeEvaluated(t,q.Name)),!0}}Ae.KeywordCxt=Bs;function Gs(e,t,r,n){const s=new Bs(e,r,t);"code"in r?r.code(s,n):s.$data&&r.validate?(0,Lt.funcKeywordCode)(s,r):"macro"in r?(0,Lt.macroKeywordCode)(s,r):(r.compile||r.validate)&&(0,Lt.funcKeywordCode)(s,r)}const Ki=/^\/(?:[^~]|~0|~1)*$/,Bi=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Js(e,{dataLevel:t,dataNames:r,dataPathArr:n}){let s,o;if(e==="")return G.default.rootData;if(e[0]==="/"){if(!Ki.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);s=e,o=G.default.rootData}else{const c=Bi.exec(e);if(!c)throw new Error(`Invalid JSON-pointer: ${e}`);const i=+c[1];if(s=c[2],s==="#"){if(i>=t)throw new Error(p("property/index",i));return n[t-i]}if(i>t)throw new Error(p("data",i));if(o=r[t-i],!s)return o}let a=o;const u=s.split("/");for(const c of u)c&&(o=(0,q._)`${o}${(0,q.getProperty)((0,We.unescapeJsonPointer)(c))}`,a=(0,q._)`${a} && ${o}`);return a;function p(c,i){return`Cannot access ${c} ${i} levels up, current level is ${t}`}}Ae.getData=Js;var Ht={};Object.defineProperty(Ht,"__esModule",{value:!0});class Gi extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}Ht.default=Gi;var Kt={};Object.defineProperty(Kt,"__esModule",{value:!0});const dn=ve;class Ji extends Error{constructor(t,r,n,s){super(s||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,dn.resolveUrl)(t,r,n),this.missingSchema=(0,dn.normalizeId)((0,dn.getFullPath)(t,this.missingRef))}}Kt.default=Ji;var be={};Object.defineProperty(be,"__esModule",{value:!0}),be.resolveSchema=be.getCompilingSchema=be.resolveRef=be.compileSchema=be.SchemaEnv=void 0;const je=W,Wi=Ht,ct=ke,Ie=ve,Ws=te,xi=Ae;class vr{constructor(t){var r;this.refs={},this.dynamicAnchors={};let n;typeof t.schema=="object"&&(n=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(r=t.baseId)!==null&&r!==void 0?r:(0,Ie.normalizeId)(n==null?void 0:n[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=n==null?void 0:n.$async,this.refs={}}}be.SchemaEnv=vr;function fn(e){const t=xs.call(this,e);if(t)return t;const r=(0,Ie.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:n,lines:s}=this.opts.code,{ownProperties:o}=this.opts,a=new je.CodeGen(this.scope,{es5:n,lines:s,ownProperties:o});let u;e.$async&&(u=a.scopeValue("Error",{ref:Wi.default,code:(0,je._)`require("ajv/dist/runtime/validation_error").default`}));const p=a.scopeName("validate");e.validateName=p;const c={gen:a,allErrors:this.opts.allErrors,data:ct.default.data,parentData:ct.default.parentData,parentDataProperty:ct.default.parentDataProperty,dataNames:[ct.default.data],dataPathArr:[je.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:a.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,je.stringify)(e.schema)}:{ref:e.schema}),validateName:p,ValidationError:u,schema:e.schema,schemaEnv:e,rootId:r,baseId:e.baseId||r,schemaPath:je.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,je._)`""`,opts:this.opts,self:this};let i;try{this._compilations.add(e),(0,xi.validateFunctionCode)(c),a.optimize(this.opts.code.optimize);const d=a.toString();i=`${a.scopeRefs(ct.default.scope)}return ${d}`,this.opts.code.process&&(i=this.opts.code.process(i,e));const b=new Function(`${ct.default.self}`,`${ct.default.scope}`,i)(this,this.scope.get());if(this.scope.value(p,{ref:b}),b.errors=null,b.schema=e.schema,b.schemaEnv=e,e.$async&&(b.$async=!0),this.opts.code.source===!0&&(b.source={validateName:p,validateCode:d,scopeValues:a._values}),this.opts.unevaluated){const{props:h,items:y}=c;b.evaluated={props:h instanceof je.Name?void 0:h,items:y instanceof je.Name?void 0:y,dynamicProps:h instanceof je.Name,dynamicItems:y instanceof je.Name},b.source&&(b.source.evaluated=(0,je.stringify)(b.evaluated))}return e.validate=b,e}catch(d){throw delete e.validate,delete e.validateName,i&&this.logger.error("Error compiling schema, function code:",i),d}finally{this._compilations.delete(e)}}be.compileSchema=fn;function Xi(e,t,r){var n;r=(0,Ie.resolveUrl)(this.opts.uriResolver,t,r);const s=e.refs[r];if(s)return s;let o=Zi.call(this,e,r);if(o===void 0){const a=(n=e.localRefs)===null||n===void 0?void 0:n[r],{schemaId:u}=this.opts;a&&(o=new vr({schema:a,schemaId:u,root:e,baseId:t}))}if(o!==void 0)return e.refs[r]=Yi.call(this,o)}be.resolveRef=Xi;function Yi(e){return(0,Ie.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:fn.call(this,e)}function xs(e){for(const t of this._compilations)if(Qi(t,e))return t}be.getCompilingSchema=xs;function Qi(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function Zi(e,t){let r;for(;typeof(r=this.refs[t])=="string";)t=r;return r||this.schemas[t]||$r.call(this,e,t)}function $r(e,t){const r=this.opts.uriResolver.parse(t),n=(0,Ie._getFullPath)(this.opts.uriResolver,r);let s=(0,Ie.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&n===s)return pn.call(this,r,e);const o=(0,Ie.normalizeId)(n),a=this.refs[o]||this.schemas[o];if(typeof a=="string"){const u=$r.call(this,e,a);return typeof(u==null?void 0:u.schema)!="object"?void 0:pn.call(this,r,u)}if(typeof(a==null?void 0:a.schema)=="object"){if(a.validate||fn.call(this,a),o===(0,Ie.normalizeId)(t)){const{schema:u}=a,{schemaId:p}=this.opts,c=u[p];return c&&(s=(0,Ie.resolveUrl)(this.opts.uriResolver,s,c)),new vr({schema:u,schemaId:p,root:e,baseId:s})}return pn.call(this,r,a)}}be.resolveSchema=$r;const ec=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function pn(e,{baseId:t,schema:r,root:n}){var s;if(((s=e.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(const u of e.fragment.slice(1).split("/")){if(typeof r=="boolean")return;const p=r[(0,Ws.unescapeFragment)(u)];if(p===void 0)return;r=p;const c=typeof r=="object"&&r[this.opts.schemaId];!ec.has(u)&&c&&(t=(0,Ie.resolveUrl)(this.opts.uriResolver,t,c))}let o;if(typeof r!="boolean"&&r.$ref&&!(0,Ws.schemaHasRulesButRef)(r,this.RULES)){const u=(0,Ie.resolveUrl)(this.opts.uriResolver,t,r.$ref);o=$r.call(this,n,u)}const{schemaId:a}=this.opts;if(o=o||new vr({schema:r,schemaId:a,root:n,baseId:t}),o.schema!==o.root.schema)return o}const tc={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1};var hn={},_r={},rc={get exports(){return _r},set exports(e){_r=e}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(r,n){n(t)})(Ra,function(r){function n(){for(var g=arguments.length,f=Array(g),$=0;$<g;$++)f[$]=arguments[$];if(f.length>1){f[0]=f[0].slice(0,-1);for(var T=f.length-1,N=1;N<T;++N)f[N]=f[N].slice(1,-1);return f[T]=f[T].slice(1),f.join("")}else return f[0]}function s(g){return"(?:"+g+")"}function o(g){return g===void 0?"undefined":g===null?"null":Object.prototype.toString.call(g).split(" ").pop().split("]").shift().toLowerCase()}function a(g){return g.toUpperCase()}function u(g){return g!=null?g instanceof Array?g:typeof g.length!="number"||g.split||g.setInterval||g.call?[g]:Array.prototype.slice.call(g):[]}function p(g,f){var $=g;if(f)for(var T in f)$[T]=f[T];return $}function c(g){var f="[A-Za-z]",$="[0-9]",T=n($,"[A-Fa-f]"),N=s(s("%[EFef]"+T+"%"+T+T+"%"+T+T)+"|"+s("%[89A-Fa-f]"+T+"%"+T+T)+"|"+s("%"+T+T)),H="[\\:\\/\\?\\#\\[\\]\\@]",K="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",ee=n(H,K),ae=g?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",de=g?"[\\uE000-\\uF8FF]":"[]",Q=n(f,$,"[\\-\\.\\_\\~]",ae);s(f+n(f,$,"[\\+\\-\\.]")+"*"),s(s(N+"|"+n(Q,K,"[\\:]"))+"*");var ne=s(s("25[0-5]")+"|"+s("2[0-4]"+$)+"|"+s("1"+$+$)+"|"+s("0?[1-9]"+$)+"|0?0?"+$),fe=s(ne+"\\."+ne+"\\."+ne+"\\."+ne),J=s(T+"{1,4}"),ie=s(s(J+"\\:"+J)+"|"+fe),me=s(s(J+"\\:")+"{6}"+ie),ce=s("\\:\\:"+s(J+"\\:")+"{5}"+ie),ot=s(s(J)+"?\\:\\:"+s(J+"\\:")+"{4}"+ie),Ke=s(s(s(J+"\\:")+"{0,1}"+J)+"?\\:\\:"+s(J+"\\:")+"{3}"+ie),Be=s(s(s(J+"\\:")+"{0,2}"+J)+"?\\:\\:"+s(J+"\\:")+"{2}"+ie),Mt=s(s(s(J+"\\:")+"{0,3}"+J)+"?\\:\\:"+J+"\\:"+ie),mt=s(s(s(J+"\\:")+"{0,4}"+J)+"?\\:\\:"+ie),Ce=s(s(s(J+"\\:")+"{0,5}"+J)+"?\\:\\:"+J),Ge=s(s(s(J+"\\:")+"{0,6}"+J)+"?\\:\\:"),yt=s([me,ce,ot,Ke,Be,Mt,mt,Ce,Ge].join("|")),Qe=s(s(Q+"|"+N)+"+");s("[vV]"+T+"+\\."+n(Q,K,"[\\:]")+"+"),s(s(N+"|"+n(Q,K))+"*");var pr=s(N+"|"+n(Q,K,"[\\:\\@]"));return s(s(N+"|"+n(Q,K,"[\\@]"))+"+"),s(s(pr+"|"+n("[\\/\\?]",de))+"*"),{NOT_SCHEME:new RegExp(n("[^]",f,$,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(n("[^\\%\\:]",Q,K),"g"),NOT_HOST:new RegExp(n("[^\\%\\[\\]\\:]",Q,K),"g"),NOT_PATH:new RegExp(n("[^\\%\\/\\:\\@]",Q,K),"g"),NOT_PATH_NOSCHEME:new RegExp(n("[^\\%\\/\\@]",Q,K),"g"),NOT_QUERY:new RegExp(n("[^\\%]",Q,K,"[\\:\\@\\/\\?]",de),"g"),NOT_FRAGMENT:new RegExp(n("[^\\%]",Q,K,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(n("[^]",Q,K),"g"),UNRESERVED:new RegExp(Q,"g"),OTHER_CHARS:new RegExp(n("[^\\%]",Q,ee),"g"),PCT_ENCODED:new RegExp(N,"g"),IPV4ADDRESS:new RegExp("^("+fe+")$"),IPV6ADDRESS:new RegExp("^\\[?("+yt+")"+s(s("\\%25|\\%(?!"+T+"{2})")+"("+Qe+")")+"?\\]?$")}}var i=c(!1),d=c(!0),w=function(){function g(f,$){var T=[],N=!0,H=!1,K=void 0;try{for(var ee=f[Symbol.iterator](),ae;!(N=(ae=ee.next()).done)&&(T.push(ae.value),!($&&T.length===$));N=!0);}catch(de){H=!0,K=de}finally{try{!N&&ee.return&&ee.return()}finally{if(H)throw K}}return T}return function(f,$){if(Array.isArray(f))return f;if(Symbol.iterator in Object(f))return g(f,$);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),b=function(g){if(Array.isArray(g)){for(var f=0,$=Array(g.length);f<g.length;f++)$[f]=g[f];return $}else return Array.from(g)},h=2147483647,y=36,_=1,m=26,E=38,P=700,A=72,k=128,S="-",C=/^xn--/,M=/[^\0-\x7E]/,F=/[\x2E\u3002\uFF0E\uFF61]/g,L={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},x=y-_,B=Math.floor,he=String.fromCharCode;function oe(g){throw new RangeError(L[g])}function Ne(g,f){for(var $=[],T=g.length;T--;)$[T]=f(g[T]);return $}function ft(g,f){var $=g.split("@"),T="";$.length>1&&(T=$[0]+"@",g=$[1]),g=g.replace(F,".");var N=g.split("."),H=Ne(N,f).join(".");return T+H}function Nt(g){for(var f=[],$=0,T=g.length;$<T;){var N=g.charCodeAt($++);if(N>=55296&&N<=56319&&$<T){var H=g.charCodeAt($++);(H&64512)==56320?f.push(((N&1023)<<10)+(H&1023)+65536):(f.push(N),$--)}else f.push(N)}return f}var or=function(f){return String.fromCodePoint.apply(String,b(f))},Tt=function(f){return f-48<10?f-22:f-65<26?f-65:f-97<26?f-97:y},U=function(f,$){return f+22+75*(f<26)-(($!=0)<<5)},O=function(f,$,T){var N=0;for(f=T?B(f/P):f>>1,f+=B(f/$);f>x*m>>1;N+=y)f=B(f/x);return B(N+(x+1)*f/(f+E))},D=function(f){var $=[],T=f.length,N=0,H=k,K=A,ee=f.lastIndexOf(S);ee<0&&(ee=0);for(var ae=0;ae<ee;++ae)f.charCodeAt(ae)>=128&&oe("not-basic"),$.push(f.charCodeAt(ae));for(var de=ee>0?ee+1:0;de<T;){for(var Q=N,ne=1,fe=y;;fe+=y){de>=T&&oe("invalid-input");var J=Tt(f.charCodeAt(de++));(J>=y||J>B((h-N)/ne))&&oe("overflow"),N+=J*ne;var ie=fe<=K?_:fe>=K+m?m:fe-K;if(J<ie)break;var me=y-ie;ne>B(h/me)&&oe("overflow"),ne*=me}var ce=$.length+1;K=O(N-Q,ce,Q==0),B(N/ce)>h-H&&oe("overflow"),H+=B(N/ce),N%=ce,$.splice(N++,0,H)}return String.fromCodePoint.apply(String,$)},R=function(f){var $=[];f=Nt(f);var T=f.length,N=k,H=0,K=A,ee=!0,ae=!1,de=void 0;try{for(var Q=f[Symbol.iterator](),ne;!(ee=(ne=Q.next()).done);ee=!0){var fe=ne.value;fe<128&&$.push(he(fe))}}catch(hr){ae=!0,de=hr}finally{try{!ee&&Q.return&&Q.return()}finally{if(ae)throw de}}var J=$.length,ie=J;for(J&&$.push(S);ie<T;){var me=h,ce=!0,ot=!1,Ke=void 0;try{for(var Be=f[Symbol.iterator](),Mt;!(ce=(Mt=Be.next()).done);ce=!0){var mt=Mt.value;mt>=N&&mt<me&&(me=mt)}}catch(hr){ot=!0,Ke=hr}finally{try{!ce&&Be.return&&Be.return()}finally{if(ot)throw Ke}}var Ce=ie+1;me-N>B((h-H)/Ce)&&oe("overflow"),H+=(me-N)*Ce,N=me;var Ge=!0,yt=!1,Qe=void 0;try{for(var pr=f[Symbol.iterator](),ba;!(Ge=(ba=pr.next()).done);Ge=!0){var Ea=ba.value;if(Ea<N&&++H>h&&oe("overflow"),Ea==N){for(var Qr=H,Zr=y;;Zr+=y){var en=Zr<=K?_:Zr>=K+m?m:Zr-K;if(Qr<en)break;var Sa=Qr-en,Pa=y-en;$.push(he(U(en+Sa%Pa,0))),Qr=B(Sa/Pa)}$.push(he(U(Qr,0))),K=O(H,Ce,ie==J),H=0,++ie}}}catch(hr){yt=!0,Qe=hr}finally{try{!Ge&&pr.return&&pr.return()}finally{if(yt)throw Qe}}++H,++N}return $.join("")},l=function(f){return ft(f,function($){return C.test($)?D($.slice(4).toLowerCase()):$})},v=function(f){return ft(f,function($){return M.test($)?"xn--"+R($):$})},j={version:"2.1.0",ucs2:{decode:Nt,encode:or},decode:D,encode:R,toASCII:v,toUnicode:l},z={};function V(g){var f=g.charCodeAt(0),$=void 0;return f<16?$="%0"+f.toString(16).toUpperCase():f<128?$="%"+f.toString(16).toUpperCase():f<2048?$="%"+(f>>6|192).toString(16).toUpperCase()+"%"+(f&63|128).toString(16).toUpperCase():$="%"+(f>>12|224).toString(16).toUpperCase()+"%"+(f>>6&63|128).toString(16).toUpperCase()+"%"+(f&63|128).toString(16).toUpperCase(),$}function Y(g){for(var f="",$=0,T=g.length;$<T;){var N=parseInt(g.substr($+1,2),16);if(N<128)f+=String.fromCharCode(N),$+=3;else if(N>=194&&N<224){if(T-$>=6){var H=parseInt(g.substr($+4,2),16);f+=String.fromCharCode((N&31)<<6|H&63)}else f+=g.substr($,6);$+=6}else if(N>=224){if(T-$>=9){var K=parseInt(g.substr($+4,2),16),ee=parseInt(g.substr($+7,2),16);f+=String.fromCharCode((N&15)<<12|(K&63)<<6|ee&63)}else f+=g.substr($,9);$+=9}else f+=g.substr($,3),$+=3}return f}function Z(g,f){function $(T){var N=Y(T);return N.match(f.UNRESERVED)?N:T}return g.scheme&&(g.scheme=String(g.scheme).replace(f.PCT_ENCODED,$).toLowerCase().replace(f.NOT_SCHEME,"")),g.userinfo!==void 0&&(g.userinfo=String(g.userinfo).replace(f.PCT_ENCODED,$).replace(f.NOT_USERINFO,V).replace(f.PCT_ENCODED,a)),g.host!==void 0&&(g.host=String(g.host).replace(f.PCT_ENCODED,$).toLowerCase().replace(f.NOT_HOST,V).replace(f.PCT_ENCODED,a)),g.path!==void 0&&(g.path=String(g.path).replace(f.PCT_ENCODED,$).replace(g.scheme?f.NOT_PATH:f.NOT_PATH_NOSCHEME,V).replace(f.PCT_ENCODED,a)),g.query!==void 0&&(g.query=String(g.query).replace(f.PCT_ENCODED,$).replace(f.NOT_QUERY,V).replace(f.PCT_ENCODED,a)),g.fragment!==void 0&&(g.fragment=String(g.fragment).replace(f.PCT_ENCODED,$).replace(f.NOT_FRAGMENT,V).replace(f.PCT_ENCODED,a)),g}function ue(g){return g.replace(/^0*(.*)/,"$1")||"0"}function Le(g,f){var $=g.match(f.IPV4ADDRESS)||[],T=w($,2),N=T[1];return N?N.split(".").map(ue).join("."):g}function Ct(g,f){var $=g.match(f.IPV6ADDRESS)||[],T=w($,3),N=T[1],H=T[2];if(N){for(var K=N.toLowerCase().split("::").reverse(),ee=w(K,2),ae=ee[0],de=ee[1],Q=de?de.split(":").map(ue):[],ne=ae.split(":").map(ue),fe=f.IPV4ADDRESS.test(ne[ne.length-1]),J=fe?7:8,ie=ne.length-J,me=Array(J),ce=0;ce<J;++ce)me[ce]=Q[ce]||ne[ie+ce]||"";fe&&(me[J-1]=Le(me[J-1],f));var ot=me.reduce(function(Ce,Ge,yt){if(!Ge||Ge==="0"){var Qe=Ce[Ce.length-1];Qe&&Qe.index+Qe.length===yt?Qe.length++:Ce.push({index:yt,length:1})}return Ce},[]),Ke=ot.sort(function(Ce,Ge){return Ge.length-Ce.length})[0],Be=void 0;if(Ke&&Ke.length>1){var Mt=me.slice(0,Ke.index),mt=me.slice(Ke.index+Ke.length);Be=Mt.join(":")+"::"+mt.join(":")}else Be=me.join(":");return H&&(Be+="%"+H),Be}else return g}var ar=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,ir="".match(/(){0}/)[1]===void 0;function Oe(g){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},$={},T=f.iri!==!1?d:i;f.reference==="suffix"&&(g=(f.scheme?f.scheme+":":"")+"//"+g);var N=g.match(ar);if(N){ir?($.scheme=N[1],$.userinfo=N[3],$.host=N[4],$.port=parseInt(N[5],10),$.path=N[6]||"",$.query=N[7],$.fragment=N[8],isNaN($.port)&&($.port=N[5])):($.scheme=N[1]||void 0,$.userinfo=g.indexOf("@")!==-1?N[3]:void 0,$.host=g.indexOf("//")!==-1?N[4]:void 0,$.port=parseInt(N[5],10),$.path=N[6]||"",$.query=g.indexOf("?")!==-1?N[7]:void 0,$.fragment=g.indexOf("#")!==-1?N[8]:void 0,isNaN($.port)&&($.port=g.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?N[4]:void 0)),$.host&&($.host=Ct(Le($.host,T),T)),$.scheme===void 0&&$.userinfo===void 0&&$.host===void 0&&$.port===void 0&&!$.path&&$.query===void 0?$.reference="same-document":$.scheme===void 0?$.reference="relative":$.fragment===void 0?$.reference="absolute":$.reference="uri",f.reference&&f.reference!=="suffix"&&f.reference!==$.reference&&($.error=$.error||"URI is not a "+f.reference+" reference.");var H=z[(f.scheme||$.scheme||"").toLowerCase()];if(!f.unicodeSupport&&(!H||!H.unicodeSupport)){if($.host&&(f.domainHost||H&&H.domainHost))try{$.host=j.toASCII($.host.replace(T.PCT_ENCODED,Y).toLowerCase())}catch(K){$.error=$.error||"Host's domain name can not be converted to ASCII via punycode: "+K}Z($,i)}else Z($,T);H&&H.parse&&H.parse($,f)}else $.error=$.error||"URI can not be parsed.";return $}function cr(g,f){var $=f.iri!==!1?d:i,T=[];return g.userinfo!==void 0&&(T.push(g.userinfo),T.push("@")),g.host!==void 0&&T.push(Ct(Le(String(g.host),$),$).replace($.IPV6ADDRESS,function(N,H,K){return"["+H+(K?"%25"+K:"")+"]"})),(typeof g.port=="number"||typeof g.port=="string")&&(T.push(":"),T.push(String(g.port))),T.length?T.join(""):void 0}var At=/^\.\.?\//,jt=/^\/\.(\/|$)/,It=/^\/\.\.(\/|$)/,ur=/^\/?(?:.|\n)*?(?=\/|$)/;function qe(g){for(var f=[];g.length;)if(g.match(At))g=g.replace(At,"");else if(g.match(jt))g=g.replace(jt,"/");else if(g.match(It))g=g.replace(It,"/"),f.pop();else if(g==="."||g==="..")g="";else{var $=g.match(ur);if($){var T=$[0];g=g.slice(T.length),f.push(T)}else throw new Error("Unexpected dot segment condition")}return f.join("")}function Pe(g){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},$=f.iri?d:i,T=[],N=z[(f.scheme||g.scheme||"").toLowerCase()];if(N&&N.serialize&&N.serialize(g,f),g.host&&!$.IPV6ADDRESS.test(g.host)){if(f.domainHost||N&&N.domainHost)try{g.host=f.iri?j.toUnicode(g.host):j.toASCII(g.host.replace($.PCT_ENCODED,Y).toLowerCase())}catch(ee){g.error=g.error||"Host's domain name can not be converted to "+(f.iri?"Unicode":"ASCII")+" via punycode: "+ee}}Z(g,$),f.reference!=="suffix"&&g.scheme&&(T.push(g.scheme),T.push(":"));var H=cr(g,f);if(H!==void 0&&(f.reference!=="suffix"&&T.push("//"),T.push(H),g.path&&g.path.charAt(0)!=="/"&&T.push("/")),g.path!==void 0){var K=g.path;!f.absolutePath&&(!N||!N.absolutePath)&&(K=qe(K)),H===void 0&&(K=K.replace(/^\/\//,"/%2F")),T.push(K)}return g.query!==void 0&&(T.push("?"),T.push(g.query)),g.fragment!==void 0&&(T.push("#"),T.push(g.fragment)),T.join("")}function Dt(g,f){var $=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},T=arguments[3],N={};return T||(g=Oe(Pe(g,$),$),f=Oe(Pe(f,$),$)),$=$||{},!$.tolerant&&f.scheme?(N.scheme=f.scheme,N.userinfo=f.userinfo,N.host=f.host,N.port=f.port,N.path=qe(f.path||""),N.query=f.query):(f.userinfo!==void 0||f.host!==void 0||f.port!==void 0?(N.userinfo=f.userinfo,N.host=f.host,N.port=f.port,N.path=qe(f.path||""),N.query=f.query):(f.path?(f.path.charAt(0)==="/"?N.path=qe(f.path):((g.userinfo!==void 0||g.host!==void 0||g.port!==void 0)&&!g.path?N.path="/"+f.path:g.path?N.path=g.path.slice(0,g.path.lastIndexOf("/")+1)+f.path:N.path=f.path,N.path=qe(N.path)),N.query=f.query):(N.path=g.path,f.query!==void 0?N.query=f.query:N.query=g.query),N.userinfo=g.userinfo,N.host=g.host,N.port=g.port),N.scheme=g.scheme),N.fragment=f.fragment,N}function lr(g,f,$){var T=p({scheme:"null"},$);return Pe(Dt(Oe(g,T),Oe(f,T),T,!0),T)}function pt(g,f){return typeof g=="string"?g=Pe(Oe(g,f),f):o(g)==="object"&&(g=Oe(Pe(g,f),f)),g}function dr(g,f,$){return typeof g=="string"?g=Pe(Oe(g,$),$):o(g)==="object"&&(g=Pe(g,$)),typeof f=="string"?f=Pe(Oe(f,$),$):o(f)==="object"&&(f=Pe(f,$)),g===f}function Yr(g,f){return g&&g.toString().replace(!f||!f.iri?i.ESCAPE:d.ESCAPE,V)}function Te(g,f){return g&&g.toString().replace(!f||!f.iri?i.PCT_ENCODED:d.PCT_ENCODED,Y)}var ht={scheme:"http",domainHost:!0,parse:function(f,$){return f.host||(f.error=f.error||"HTTP URIs must have a host."),f},serialize:function(f,$){var T=String(f.scheme).toLowerCase()==="https";return(f.port===(T?443:80)||f.port==="")&&(f.port=void 0),f.path||(f.path="/"),f}},ha={scheme:"https",domainHost:ht.domainHost,parse:ht.parse,serialize:ht.serialize};function ma(g){return typeof g.secure=="boolean"?g.secure:String(g.scheme).toLowerCase()==="wss"}var fr={scheme:"ws",domainHost:!0,parse:function(f,$){var T=f;return T.secure=ma(T),T.resourceName=(T.path||"/")+(T.query?"?"+T.query:""),T.path=void 0,T.query=void 0,T},serialize:function(f,$){if((f.port===(ma(f)?443:80)||f.port==="")&&(f.port=void 0),typeof f.secure=="boolean"&&(f.scheme=f.secure?"wss":"ws",f.secure=void 0),f.resourceName){var T=f.resourceName.split("?"),N=w(T,2),H=N[0],K=N[1];f.path=H&&H!=="/"?H:void 0,f.query=K,f.resourceName=void 0}return f.fragment=void 0,f}},ya={scheme:"wss",domainHost:fr.domainHost,parse:fr.parse,serialize:fr.serialize},Ad={},ga="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",He="[0-9A-Fa-f]",jd=s(s("%[EFef]"+He+"%"+He+He+"%"+He+He)+"|"+s("%[89A-Fa-f]"+He+"%"+He+He)+"|"+s("%"+He+He)),Id="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Dd="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",kd=n(Dd,'[\\"\\\\]'),Md="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Fd=new RegExp(ga,"g"),kt=new RegExp(jd,"g"),Ud=new RegExp(n("[^]",Id,"[\\.]",'[\\"]',kd),"g"),va=new RegExp(n("[^]",ga,Md),"g"),zd=va;function gs(g){var f=Y(g);return f.match(Fd)?f:g}var $a={scheme:"mailto",parse:function(f,$){var T=f,N=T.to=T.path?T.path.split(","):[];if(T.path=void 0,T.query){for(var H=!1,K={},ee=T.query.split("&"),ae=0,de=ee.length;ae<de;++ae){var Q=ee[ae].split("=");switch(Q[0]){case"to":for(var ne=Q[1].split(","),fe=0,J=ne.length;fe<J;++fe)N.push(ne[fe]);break;case"subject":T.subject=Te(Q[1],$);break;case"body":T.body=Te(Q[1],$);break;default:H=!0,K[Te(Q[0],$)]=Te(Q[1],$);break}}H&&(T.headers=K)}T.query=void 0;for(var ie=0,me=N.length;ie<me;++ie){var ce=N[ie].split("@");if(ce[0]=Te(ce[0]),$.unicodeSupport)ce[1]=Te(ce[1],$).toLowerCase();else try{ce[1]=j.toASCII(Te(ce[1],$).toLowerCase())}catch(ot){T.error=T.error||"Email address's domain name can not be converted to ASCII via punycode: "+ot}N[ie]=ce.join("@")}return T},serialize:function(f,$){var T=f,N=u(f.to);if(N){for(var H=0,K=N.length;H<K;++H){var ee=String(N[H]),ae=ee.lastIndexOf("@"),de=ee.slice(0,ae).replace(kt,gs).replace(kt,a).replace(Ud,V),Q=ee.slice(ae+1);try{Q=$.iri?j.toUnicode(Q):j.toASCII(Te(Q,$).toLowerCase())}catch(ie){T.error=T.error||"Email address's domain name can not be converted to "+($.iri?"Unicode":"ASCII")+" via punycode: "+ie}N[H]=de+"@"+Q}T.path=N.join(",")}var ne=f.headers=f.headers||{};f.subject&&(ne.subject=f.subject),f.body&&(ne.body=f.body);var fe=[];for(var J in ne)ne[J]!==Ad[J]&&fe.push(J.replace(kt,gs).replace(kt,a).replace(va,V)+"="+ne[J].replace(kt,gs).replace(kt,a).replace(zd,V));return fe.length&&(T.query=fe.join("&")),T}},Vd=/^([^\:]+)\:(.*)/,_a={scheme:"urn",parse:function(f,$){var T=f.path&&f.path.match(Vd),N=f;if(T){var H=$.scheme||N.scheme||"urn",K=T[1].toLowerCase(),ee=T[2],ae=H+":"+($.nid||K),de=z[ae];N.nid=K,N.nss=ee,N.path=void 0,de&&(N=de.parse(N,$))}else N.error=N.error||"URN can not be parsed.";return N},serialize:function(f,$){var T=$.scheme||f.scheme||"urn",N=f.nid,H=T+":"+($.nid||N),K=z[H];K&&(f=K.serialize(f,$));var ee=f,ae=f.nss;return ee.path=(N||$.nid)+":"+ae,ee}},Ld=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,wa={scheme:"urn:uuid",parse:function(f,$){var T=f;return T.uuid=T.nss,T.nss=void 0,!$.tolerant&&(!T.uuid||!T.uuid.match(Ld))&&(T.error=T.error||"UUID is not valid."),T},serialize:function(f,$){var T=f;return T.nss=(f.uuid||"").toLowerCase(),T}};z[ht.scheme]=ht,z[ha.scheme]=ha,z[fr.scheme]=fr,z[ya.scheme]=ya,z[$a.scheme]=$a,z[_a.scheme]=_a,z[wa.scheme]=wa,r.SCHEMES=z,r.pctEncChar=V,r.pctDecChars=Y,r.parse=Oe,r.removeDotSegments=qe,r.serialize=Pe,r.resolveComponents=Dt,r.resolve=lr,r.normalize=pt,r.equal=dr,r.escapeComponent=Yr,r.unescapeComponent=Te,Object.defineProperty(r,"__esModule",{value:!0})})})(rc,_r),Object.defineProperty(hn,"__esModule",{value:!0});const Xs=_r;Xs.code='require("ajv/dist/runtime/uri").default',hn.default=Xs,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=Ae;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var r=W;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const n=Ht,s=Kt,o=at,a=be,u=W,p=ve,c=Vt,i=te,d=tc,w=hn,b=(U,O)=>new RegExp(U,O);b.code="new RegExp";const h=["removeAdditional","useDefaults","coerceTypes"],y=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),_={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},m={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},E=200;function P(U){var O,D,R,l,v,j,z,V,Y,Z,ue,Le,Ct,ar,ir,Oe,cr,At,jt,It,ur,qe,Pe,Dt,lr;const pt=U.strict,dr=(O=U.code)===null||O===void 0?void 0:O.optimize,Yr=dr===!0||dr===void 0?1:dr||0,Te=(R=(D=U.code)===null||D===void 0?void 0:D.regExp)!==null&&R!==void 0?R:b,ht=(l=U.uriResolver)!==null&&l!==void 0?l:w.default;return{strictSchema:(j=(v=U.strictSchema)!==null&&v!==void 0?v:pt)!==null&&j!==void 0?j:!0,strictNumbers:(V=(z=U.strictNumbers)!==null&&z!==void 0?z:pt)!==null&&V!==void 0?V:!0,strictTypes:(Z=(Y=U.strictTypes)!==null&&Y!==void 0?Y:pt)!==null&&Z!==void 0?Z:"log",strictTuples:(Le=(ue=U.strictTuples)!==null&&ue!==void 0?ue:pt)!==null&&Le!==void 0?Le:"log",strictRequired:(ar=(Ct=U.strictRequired)!==null&&Ct!==void 0?Ct:pt)!==null&&ar!==void 0?ar:!1,code:U.code?{...U.code,optimize:Yr,regExp:Te}:{optimize:Yr,regExp:Te},loopRequired:(ir=U.loopRequired)!==null&&ir!==void 0?ir:E,loopEnum:(Oe=U.loopEnum)!==null&&Oe!==void 0?Oe:E,meta:(cr=U.meta)!==null&&cr!==void 0?cr:!0,messages:(At=U.messages)!==null&&At!==void 0?At:!0,inlineRefs:(jt=U.inlineRefs)!==null&&jt!==void 0?jt:!0,schemaId:(It=U.schemaId)!==null&&It!==void 0?It:"$id",addUsedSchema:(ur=U.addUsedSchema)!==null&&ur!==void 0?ur:!0,validateSchema:(qe=U.validateSchema)!==null&&qe!==void 0?qe:!0,validateFormats:(Pe=U.validateFormats)!==null&&Pe!==void 0?Pe:!0,unicodeRegExp:(Dt=U.unicodeRegExp)!==null&&Dt!==void 0?Dt:!0,int32range:(lr=U.int32range)!==null&&lr!==void 0?lr:!0,uriResolver:ht}}class A{constructor(O={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,O=this.opts={...O,...P(O)};const{es5:D,lines:R}=this.opts.code;this.scope=new u.ValueScope({scope:{},prefixes:y,es5:D,lines:R}),this.logger=B(O.logger);const l=O.validateFormats;O.validateFormats=!1,this.RULES=(0,o.getRules)(),k.call(this,_,O,"NOT SUPPORTED"),k.call(this,m,O,"DEPRECATED","warn"),this._metaOpts=L.call(this),O.formats&&M.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),O.keywords&&F.call(this,O.keywords),typeof O.meta=="object"&&this.addMetaSchema(O.meta),C.call(this),O.validateFormats=l}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:O,meta:D,schemaId:R}=this.opts;let l=d;R==="id"&&(l={...d},l.id=l.$id,delete l.$id),D&&O&&this.addMetaSchema(l,l[R],!1)}defaultMeta(){const{meta:O,schemaId:D}=this.opts;return this.opts.defaultMeta=typeof O=="object"?O[D]||O:void 0}validate(O,D){let R;if(typeof O=="string"){if(R=this.getSchema(O),!R)throw new Error(`no schema with key or ref "${O}"`)}else R=this.compile(O);const l=R(D);return"$async"in R||(this.errors=R.errors),l}compile(O,D){const R=this._addSchema(O,D);return R.validate||this._compileSchemaEnv(R)}compileAsync(O,D){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:R}=this.opts;return l.call(this,O,D);async function l(Z,ue){await v.call(this,Z.$schema);const Le=this._addSchema(Z,ue);return Le.validate||j.call(this,Le)}async function v(Z){Z&&!this.getSchema(Z)&&await l.call(this,{$ref:Z},!0)}async function j(Z){try{return this._compileSchemaEnv(Z)}catch(ue){if(!(ue instanceof s.default))throw ue;return z.call(this,ue),await V.call(this,ue.missingSchema),j.call(this,Z)}}function z({missingSchema:Z,missingRef:ue}){if(this.refs[Z])throw new Error(`AnySchema ${Z} is loaded but ${ue} cannot be resolved`)}async function V(Z){const ue=await Y.call(this,Z);this.refs[Z]||await v.call(this,ue.$schema),this.refs[Z]||this.addSchema(ue,Z,D)}async function Y(Z){const ue=this._loading[Z];if(ue)return ue;try{return await(this._loading[Z]=R(Z))}finally{delete this._loading[Z]}}}addSchema(O,D,R,l=this.opts.validateSchema){if(Array.isArray(O)){for(const j of O)this.addSchema(j,void 0,R,l);return this}let v;if(typeof O=="object"){const{schemaId:j}=this.opts;if(v=O[j],v!==void 0&&typeof v!="string")throw new Error(`schema ${j} must be string`)}return D=(0,p.normalizeId)(D||v),this._checkUnique(D),this.schemas[D]=this._addSchema(O,R,D,l,!0),this}addMetaSchema(O,D,R=this.opts.validateSchema){return this.addSchema(O,D,!0,R),this}validateSchema(O,D){if(typeof O=="boolean")return!0;let R;if(R=O.$schema,R!==void 0&&typeof R!="string")throw new Error("$schema must be a string");if(R=R||this.opts.defaultMeta||this.defaultMeta(),!R)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const l=this.validate(R,O);if(!l&&D){const v="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(v);else throw new Error(v)}return l}getSchema(O){let D;for(;typeof(D=S.call(this,O))=="string";)O=D;if(D===void 0){const{schemaId:R}=this.opts,l=new a.SchemaEnv({schema:{},schemaId:R});if(D=a.resolveSchema.call(this,l,O),!D)return;this.refs[O]=D}return D.validate||this._compileSchemaEnv(D)}removeSchema(O){if(O instanceof RegExp)return this._removeAllSchemas(this.schemas,O),this._removeAllSchemas(this.refs,O),this;switch(typeof O){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const D=S.call(this,O);return typeof D=="object"&&this._cache.delete(D.schema),delete this.schemas[O],delete this.refs[O],this}case"object":{const D=O;this._cache.delete(D);let R=O[this.opts.schemaId];return R&&(R=(0,p.normalizeId)(R),delete this.schemas[R],delete this.refs[R]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(O){for(const D of O)this.addKeyword(D);return this}addKeyword(O,D){let R;if(typeof O=="string")R=O,typeof D=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),D.keyword=R);else if(typeof O=="object"&&D===void 0){if(D=O,R=D.keyword,Array.isArray(R)&&!R.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(oe.call(this,R,D),!D)return(0,i.eachItem)(R,v=>Ne.call(this,v)),this;Nt.call(this,D);const l={...D,type:(0,c.getJSONTypes)(D.type),schemaType:(0,c.getJSONTypes)(D.schemaType)};return(0,i.eachItem)(R,l.type.length===0?v=>Ne.call(this,v,l):v=>l.type.forEach(j=>Ne.call(this,v,l,j))),this}getKeyword(O){const D=this.RULES.all[O];return typeof D=="object"?D.definition:!!D}removeKeyword(O){const{RULES:D}=this;delete D.keywords[O],delete D.all[O];for(const R of D.rules){const l=R.rules.findIndex(v=>v.keyword===O);l>=0&&R.rules.splice(l,1)}return this}addFormat(O,D){return typeof D=="string"&&(D=new RegExp(D)),this.formats[O]=D,this}errorsText(O=this.errors,{separator:D=", ",dataVar:R="data"}={}){return!O||O.length===0?"No errors":O.map(l=>`${R}${l.instancePath} ${l.message}`).reduce((l,v)=>l+D+v)}$dataMetaSchema(O,D){const R=this.RULES.all;O=JSON.parse(JSON.stringify(O));for(const l of D){const v=l.split("/").slice(1);let j=O;for(const z of v)j=j[z];for(const z in R){const V=R[z];if(typeof V!="object")continue;const{$data:Y}=V.definition,Z=j[z];Y&&Z&&(j[z]=Tt(Z))}}return O}_removeAllSchemas(O,D){for(const R in O){const l=O[R];(!D||D.test(R))&&(typeof l=="string"?delete O[R]:l&&!l.meta&&(this._cache.delete(l.schema),delete O[R]))}}_addSchema(O,D,R,l=this.opts.validateSchema,v=this.opts.addUsedSchema){let j;const{schemaId:z}=this.opts;if(typeof O=="object")j=O[z];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof O!="boolean")throw new Error("schema must be object or boolean")}let V=this._cache.get(O);if(V!==void 0)return V;R=(0,p.normalizeId)(j||R);const Y=p.getSchemaRefs.call(this,O,R);return V=new a.SchemaEnv({schema:O,schemaId:z,meta:D,baseId:R,localRefs:Y}),this._cache.set(V.schema,V),v&&!R.startsWith("#")&&(R&&this._checkUnique(R),this.refs[R]=V),l&&this.validateSchema(O,!0),V}_checkUnique(O){if(this.schemas[O]||this.refs[O])throw new Error(`schema with key or id "${O}" already exists`)}_compileSchemaEnv(O){if(O.meta?this._compileMetaSchema(O):a.compileSchema.call(this,O),!O.validate)throw new Error("ajv implementation error");return O.validate}_compileMetaSchema(O){const D=this.opts;this.opts=this._metaOpts;try{a.compileSchema.call(this,O)}finally{this.opts=D}}}e.default=A,A.ValidationError=n.default,A.MissingRefError=s.default;function k(U,O,D,R="error"){for(const l in U){const v=l;v in O&&this.logger[R](`${D}: option ${l}. ${U[v]}`)}}function S(U){return U=(0,p.normalizeId)(U),this.schemas[U]||this.refs[U]}function C(){const U=this.opts.schemas;if(U)if(Array.isArray(U))this.addSchema(U);else for(const O in U)this.addSchema(U[O],O)}function M(){for(const U in this.opts.formats){const O=this.opts.formats[U];O&&this.addFormat(U,O)}}function F(U){if(Array.isArray(U)){this.addVocabulary(U);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const O in U){const D=U[O];D.keyword||(D.keyword=O),this.addKeyword(D)}}function L(){const U={...this.opts};for(const O of h)delete U[O];return U}const x={log(){},warn(){},error(){}};function B(U){if(U===!1)return x;if(U===void 0)return console;if(U.log&&U.warn&&U.error)return U;throw new Error("logger must implement log, warn and error methods")}const he=/^[a-z_$][a-z0-9_$:-]*$/i;function oe(U,O){const{RULES:D}=this;if((0,i.eachItem)(U,R=>{if(D.keywords[R])throw new Error(`Keyword ${R} is already defined`);if(!he.test(R))throw new Error(`Keyword ${R} has invalid name`)}),!!O&&O.$data&&!("code"in O||"validate"in O))throw new Error('$data keyword must have "code" or "validate" function')}function Ne(U,O,D){var R;const l=O==null?void 0:O.post;if(D&&l)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:v}=this;let j=l?v.post:v.rules.find(({type:V})=>V===D);if(j||(j={type:D,rules:[]},v.rules.push(j)),v.keywords[U]=!0,!O)return;const z={keyword:U,definition:{...O,type:(0,c.getJSONTypes)(O.type),schemaType:(0,c.getJSONTypes)(O.schemaType)}};O.before?ft.call(this,j,z,O.before):j.rules.push(z),v.all[U]=z,(R=O.implements)===null||R===void 0||R.forEach(V=>this.addKeyword(V))}function ft(U,O,D){const R=U.rules.findIndex(l=>l.keyword===D);R>=0?U.rules.splice(R,0,O):(U.rules.push(O),this.logger.warn(`rule ${D} is not defined`))}function Nt(U){let{metaSchema:O}=U;O!==void 0&&(U.$data&&this.opts.$data&&(O=Tt(O)),U.validateSchema=this.compile(O,!0))}const or={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function Tt(U){return{anyOf:[U,or]}}}($s);var mn={},yn={},gn={};Object.defineProperty(gn,"__esModule",{value:!0});const nc={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};gn.default=nc;var ut={};Object.defineProperty(ut,"__esModule",{value:!0}),ut.callRef=ut.getValidate=void 0;const sc=Kt,Ys=X,Ee=W,_t=ke,Qs=be,wr=te,oc={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:r,it:n}=e,{baseId:s,schemaEnv:o,validateName:a,opts:u,self:p}=n,{root:c}=o;if((r==="#"||r==="#/")&&s===c.baseId)return d();const i=Qs.resolveRef.call(p,c,s,r);if(i===void 0)throw new sc.default(n.opts.uriResolver,s,r);if(i instanceof Qs.SchemaEnv)return w(i);return b(i);function d(){if(o===c)return br(e,a,o,o.$async);const h=t.scopeValue("root",{ref:c});return br(e,(0,Ee._)`${h}.validate`,c,c.$async)}function w(h){const y=Zs(e,h);br(e,y,h,h.$async)}function b(h){const y=t.scopeValue("schema",u.code.source===!0?{ref:h,code:(0,Ee.stringify)(h)}:{ref:h}),_=t.name("valid"),m=e.subschema({schema:h,dataTypes:[],schemaPath:Ee.nil,topSchemaRef:y,errSchemaPath:r},_);e.mergeEvaluated(m),e.ok(_)}}};function Zs(e,t){const{gen:r}=e;return t.validate?r.scopeValue("validate",{ref:t.validate}):(0,Ee._)`${r.scopeValue("wrapper",{ref:t})}.validate`}ut.getValidate=Zs;function br(e,t,r,n){const{gen:s,it:o}=e,{allErrors:a,schemaEnv:u,opts:p}=o,c=p.passContext?_t.default.this:Ee.nil;n?i():d();function i(){if(!u.$async)throw new Error("async schema referenced by sync schema");const h=s.let("valid");s.try(()=>{s.code((0,Ee._)`await ${(0,Ys.callValidateCode)(e,t,c)}`),b(t),a||s.assign(h,!0)},y=>{s.if((0,Ee._)`!(${y} instanceof ${o.ValidationError})`,()=>s.throw(y)),w(y),a||s.assign(h,!1)}),e.ok(h)}function d(){e.result((0,Ys.callValidateCode)(e,t,c),()=>b(t),()=>w(t))}function w(h){const y=(0,Ee._)`${h}.errors`;s.assign(_t.default.vErrors,(0,Ee._)`${_t.default.vErrors} === null ? ${y} : ${_t.default.vErrors}.concat(${y})`),s.assign(_t.default.errors,(0,Ee._)`${_t.default.vErrors}.length`)}function b(h){var y;if(!o.opts.unevaluated)return;const _=(y=r==null?void 0:r.validate)===null||y===void 0?void 0:y.evaluated;if(o.props!==!0)if(_&&!_.dynamicProps)_.props!==void 0&&(o.props=wr.mergeEvaluated.props(s,_.props,o.props));else{const m=s.var("props",(0,Ee._)`${h}.evaluated.props`);o.props=wr.mergeEvaluated.props(s,m,o.props,Ee.Name)}if(o.items!==!0)if(_&&!_.dynamicItems)_.items!==void 0&&(o.items=wr.mergeEvaluated.items(s,_.items,o.items));else{const m=s.var("items",(0,Ee._)`${h}.evaluated.items`);o.items=wr.mergeEvaluated.items(s,m,o.items,Ee.Name)}}}ut.callRef=br,ut.default=oc,Object.defineProperty(yn,"__esModule",{value:!0});const ac=gn,ic=ut,cc=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",ac.default,ic.default];yn.default=cc;var vn={},$n={};Object.defineProperty($n,"__esModule",{value:!0});const Er=W,nt=Er.operators,Sr={maximum:{okStr:"<=",ok:nt.LTE,fail:nt.GT},minimum:{okStr:">=",ok:nt.GTE,fail:nt.LT},exclusiveMaximum:{okStr:"<",ok:nt.LT,fail:nt.GTE},exclusiveMinimum:{okStr:">",ok:nt.GT,fail:nt.LTE}},uc={message:({keyword:e,schemaCode:t})=>(0,Er.str)`must be ${Sr[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,Er._)`{comparison: ${Sr[e].okStr}, limit: ${t}}`},lc={keyword:Object.keys(Sr),type:"number",schemaType:"number",$data:!0,error:uc,code(e){const{keyword:t,data:r,schemaCode:n}=e;e.fail$data((0,Er._)`${r} ${Sr[t].fail} ${n} || isNaN(${r})`)}};$n.default=lc;var _n={};Object.defineProperty(_n,"__esModule",{value:!0});const Bt=W,dc={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:e})=>(0,Bt.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,Bt._)`{multipleOf: ${e}}`},code(e){const{gen:t,data:r,schemaCode:n,it:s}=e,o=s.opts.multipleOfPrecision,a=t.let("res"),u=o?(0,Bt._)`Math.abs(Math.round(${a}) - ${a}) > 1e-${o}`:(0,Bt._)`${a} !== parseInt(${a})`;e.fail$data((0,Bt._)`(${n} === 0 || (${a} = ${r}/${n}, ${u}))`)}};_n.default=dc;var wn={},bn={};Object.defineProperty(bn,"__esModule",{value:!0});function eo(e){const t=e.length;let r=0,n=0,s;for(;n<t;)r++,s=e.charCodeAt(n++),s>=55296&&s<=56319&&n<t&&(s=e.charCodeAt(n),(s&64512)===56320&&n++);return r}bn.default=eo,eo.code='require("ajv/dist/runtime/ucs2length").default',Object.defineProperty(wn,"__esModule",{value:!0});const lt=W,fc=te,pc=bn,hc={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const r=e==="maxLength"?"more":"fewer";return(0,lt.str)`must NOT have ${r} than ${t} characters`},params:({schemaCode:e})=>(0,lt._)`{limit: ${e}}`},code(e){const{keyword:t,data:r,schemaCode:n,it:s}=e,o=t==="maxLength"?lt.operators.GT:lt.operators.LT,a=s.opts.unicode===!1?(0,lt._)`${r}.length`:(0,lt._)`${(0,fc.useFunc)(e.gen,pc.default)}(${r})`;e.fail$data((0,lt._)`${a} ${o} ${n}`)}};wn.default=hc;var En={};Object.defineProperty(En,"__esModule",{value:!0});const mc=X,Pr=W,yc={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>(0,Pr.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,Pr._)`{pattern: ${e}}`},code(e){const{data:t,$data:r,schema:n,schemaCode:s,it:o}=e,a=o.opts.unicodeRegExp?"u":"",u=r?(0,Pr._)`(new RegExp(${s}, ${a}))`:(0,mc.usePattern)(e,n);e.fail$data((0,Pr._)`!${u}.test(${t})`)}};En.default=yc;var Sn={};Object.defineProperty(Sn,"__esModule",{value:!0});const Gt=W,gc={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const r=e==="maxProperties"?"more":"fewer";return(0,Gt.str)`must NOT have ${r} than ${t} properties`},params:({schemaCode:e})=>(0,Gt._)`{limit: ${e}}`},code(e){const{keyword:t,data:r,schemaCode:n}=e,s=t==="maxProperties"?Gt.operators.GT:Gt.operators.LT;e.fail$data((0,Gt._)`Object.keys(${r}).length ${s} ${n}`)}};Sn.default=gc;var Pn={};Object.defineProperty(Pn,"__esModule",{value:!0});const Jt=X,Wt=W,vc=te,$c={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:e}})=>(0,Wt.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,Wt._)`{missingProperty: ${e}}`},code(e){const{gen:t,schema:r,schemaCode:n,data:s,$data:o,it:a}=e,{opts:u}=a;if(!o&&r.length===0)return;const p=r.length>=u.loopRequired;if(a.allErrors?c():i(),u.strictRequired){const b=e.parentSchema.properties,{definedProperties:h}=e.it;for(const y of r)if((b==null?void 0:b[y])===void 0&&!h.has(y)){const _=a.schemaEnv.baseId+a.errSchemaPath,m=`required property "${y}" is not defined at "${_}" (strictRequired)`;(0,vc.checkStrictMode)(a,m,a.opts.strictRequired)}}function c(){if(p||o)e.block$data(Wt.nil,d);else for(const b of r)(0,Jt.checkReportMissingProp)(e,b)}function i(){const b=t.let("missing");if(p||o){const h=t.let("valid",!0);e.block$data(h,()=>w(b,h)),e.ok(h)}else t.if((0,Jt.checkMissingProp)(e,r,b)),(0,Jt.reportMissingProp)(e,b),t.else()}function d(){t.forOf("prop",n,b=>{e.setParams({missingProperty:b}),t.if((0,Jt.noPropertyInData)(t,s,b,u.ownProperties),()=>e.error())})}function w(b,h){e.setParams({missingProperty:b}),t.forOf(b,n,()=>{t.assign(h,(0,Jt.propertyInData)(t,s,b,u.ownProperties)),t.if((0,Wt.not)(h),()=>{e.error(),t.break()})},Wt.nil)}}};Pn.default=$c;var On={};Object.defineProperty(On,"__esModule",{value:!0});const xt=W,_c={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const r=e==="maxItems"?"more":"fewer";return(0,xt.str)`must NOT have ${r} than ${t} items`},params:({schemaCode:e})=>(0,xt._)`{limit: ${e}}`},code(e){const{keyword:t,data:r,schemaCode:n}=e,s=t==="maxItems"?xt.operators.GT:xt.operators.LT;e.fail$data((0,xt._)`${r}.length ${s} ${n}`)}};On.default=_c;var Rn={},Xt={};Object.defineProperty(Xt,"__esModule",{value:!0});const to=Ts;to.code='require("ajv/dist/runtime/equal").default',Xt.default=to,Object.defineProperty(Rn,"__esModule",{value:!0});const Nn=Vt,$e=W,wc=te,bc=Xt,Ec={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:e,j:t}})=>(0,$e.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,$e._)`{i: ${e}, j: ${t}}`},code(e){const{gen:t,data:r,$data:n,schema:s,parentSchema:o,schemaCode:a,it:u}=e;if(!n&&!s)return;const p=t.let("valid"),c=o.items?(0,Nn.getSchemaTypes)(o.items):[];e.block$data(p,i,(0,$e._)`${a} === false`),e.ok(p);function i(){const h=t.let("i",(0,$e._)`${r}.length`),y=t.let("j");e.setParams({i:h,j:y}),t.assign(p,!0),t.if((0,$e._)`${h} > 1`,()=>(d()?w:b)(h,y))}function d(){return c.length>0&&!c.some(h=>h==="object"||h==="array")}function w(h,y){const _=t.name("item"),m=(0,Nn.checkDataTypes)(c,_,u.opts.strictNumbers,Nn.DataType.Wrong),E=t.const("indices",(0,$e._)`{}`);t.for((0,$e._)`;${h}--;`,()=>{t.let(_,(0,$e._)`${r}[${h}]`),t.if(m,(0,$e._)`continue`),c.length>1&&t.if((0,$e._)`typeof ${_} == "string"`,(0,$e._)`${_} += "_"`),t.if((0,$e._)`typeof ${E}[${_}] == "number"`,()=>{t.assign(y,(0,$e._)`${E}[${_}]`),e.error(),t.assign(p,!1).break()}).code((0,$e._)`${E}[${_}] = ${h}`)})}function b(h,y){const _=(0,wc.useFunc)(t,bc.default),m=t.name("outer");t.label(m).for((0,$e._)`;${h}--;`,()=>t.for((0,$e._)`${y} = ${h}; ${y}--;`,()=>t.if((0,$e._)`${_}(${r}[${h}], ${r}[${y}])`,()=>{e.error(),t.assign(p,!1).break(m)})))}}};Rn.default=Ec;var Tn={};Object.defineProperty(Tn,"__esModule",{value:!0});const Cn=W,Sc=te,Pc=Xt,Oc={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:e})=>(0,Cn._)`{allowedValue: ${e}}`},code(e){const{gen:t,data:r,$data:n,schemaCode:s,schema:o}=e;n||o&&typeof o=="object"?e.fail$data((0,Cn._)`!${(0,Sc.useFunc)(t,Pc.default)}(${r}, ${s})`):e.fail((0,Cn._)`${o} !== ${r}`)}};Tn.default=Oc;var An={};Object.defineProperty(An,"__esModule",{value:!0});const Yt=W,Rc=te,Nc=Xt,Tc={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,Yt._)`{allowedValues: ${e}}`},code(e){const{gen:t,data:r,$data:n,schema:s,schemaCode:o,it:a}=e;if(!n&&s.length===0)throw new Error("enum must have non-empty array");const u=s.length>=a.opts.loopEnum;let p;const c=()=>p??(p=(0,Rc.useFunc)(t,Nc.default));let i;if(u||n)i=t.let("valid"),e.block$data(i,d);else{if(!Array.isArray(s))throw new Error("ajv implementation error");const b=t.const("vSchema",o);i=(0,Yt.or)(...s.map((h,y)=>w(b,y)))}e.pass(i);function d(){t.assign(i,!1),t.forOf("v",o,b=>t.if((0,Yt._)`${c()}(${r}, ${b})`,()=>t.assign(i,!0).break()))}function w(b,h){const y=s[h];return typeof y=="object"&&y!==null?(0,Yt._)`${c()}(${r}, ${b}[${h}])`:(0,Yt._)`${r} === ${y}`}}};An.default=Tc,Object.defineProperty(vn,"__esModule",{value:!0});const Cc=$n,Ac=_n,jc=wn,Ic=En,Dc=Sn,kc=Pn,Mc=On,Fc=Rn,Uc=Tn,zc=An,Vc=[Cc.default,Ac.default,jc.default,Ic.default,Dc.default,kc.default,Mc.default,Fc.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},Uc.default,zc.default];vn.default=Vc;var jn={},wt={};Object.defineProperty(wt,"__esModule",{value:!0}),wt.validateAdditionalItems=void 0;const dt=W,In=te,Lc={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:e}})=>(0,dt.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,dt._)`{limit: ${e}}`},code(e){const{parentSchema:t,it:r}=e,{items:n}=t;if(!Array.isArray(n)){(0,In.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}ro(e,n)}};function ro(e,t){const{gen:r,schema:n,data:s,keyword:o,it:a}=e;a.items=!0;const u=r.const("len",(0,dt._)`${s}.length`);if(n===!1)e.setParams({len:t.length}),e.pass((0,dt._)`${u} <= ${t.length}`);else if(typeof n=="object"&&!(0,In.alwaysValidSchema)(a,n)){const c=r.var("valid",(0,dt._)`${u} <= ${t.length}`);r.if((0,dt.not)(c),()=>p(c)),e.ok(c)}function p(c){r.forRange("i",t.length,u,i=>{e.subschema({keyword:o,dataProp:i,dataPropType:In.Type.Num},c),a.allErrors||r.if((0,dt.not)(c),()=>r.break())})}}wt.validateAdditionalItems=ro,wt.default=Lc;var Dn={},bt={};Object.defineProperty(bt,"__esModule",{value:!0}),bt.validateTuple=void 0;const no=W,Or=te,qc=X,Hc={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:r}=e;if(Array.isArray(t))return so(e,"additionalItems",t);r.items=!0,!(0,Or.alwaysValidSchema)(r,t)&&e.ok((0,qc.validateArray)(e))}};function so(e,t,r=e.schema){const{gen:n,parentSchema:s,data:o,keyword:a,it:u}=e;i(s),u.opts.unevaluated&&r.length&&u.items!==!0&&(u.items=Or.mergeEvaluated.items(n,r.length,u.items));const p=n.name("valid"),c=n.const("len",(0,no._)`${o}.length`);r.forEach((d,w)=>{(0,Or.alwaysValidSchema)(u,d)||(n.if((0,no._)`${c} > ${w}`,()=>e.subschema({keyword:a,schemaProp:w,dataProp:w},p)),e.ok(p))});function i(d){const{opts:w,errSchemaPath:b}=u,h=r.length,y=h===d.minItems&&(h===d.maxItems||d[t]===!1);if(w.strictTuples&&!y){const _=`"${a}" is ${h}-tuple, but minItems or maxItems/${t} are not specified or different at path "${b}"`;(0,Or.checkStrictMode)(u,_,w.strictTuples)}}}bt.validateTuple=so,bt.default=Hc,Object.defineProperty(Dn,"__esModule",{value:!0});const Kc=bt,Bc={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,Kc.validateTuple)(e,"items")};Dn.default=Bc;var kn={};Object.defineProperty(kn,"__esModule",{value:!0});const oo=W,Gc=te,Jc=X,Wc=wt,xc={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:e}})=>(0,oo.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,oo._)`{limit: ${e}}`},code(e){const{schema:t,parentSchema:r,it:n}=e,{prefixItems:s}=r;n.items=!0,!(0,Gc.alwaysValidSchema)(n,t)&&(s?(0,Wc.validateAdditionalItems)(e,s):e.ok((0,Jc.validateArray)(e)))}};kn.default=xc;var Mn={};Object.defineProperty(Mn,"__esModule",{value:!0});const Re=W,Rr=te,Xc={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:e,max:t}})=>t===void 0?(0,Re.str)`must contain at least ${e} valid item(s)`:(0,Re.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,Re._)`{minContains: ${e}}`:(0,Re._)`{minContains: ${e}, maxContains: ${t}}`},code(e){const{gen:t,schema:r,parentSchema:n,data:s,it:o}=e;let a,u;const{minContains:p,maxContains:c}=n;o.opts.next?(a=p===void 0?1:p,u=c):a=1;const i=t.const("len",(0,Re._)`${s}.length`);if(e.setParams({min:a,max:u}),u===void 0&&a===0){(0,Rr.checkStrictMode)(o,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(u!==void 0&&a>u){(0,Rr.checkStrictMode)(o,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,Rr.alwaysValidSchema)(o,r)){let y=(0,Re._)`${i} >= ${a}`;u!==void 0&&(y=(0,Re._)`${y} && ${i} <= ${u}`),e.pass(y);return}o.items=!0;const d=t.name("valid");u===void 0&&a===1?b(d,()=>t.if(d,()=>t.break())):a===0?(t.let(d,!0),u!==void 0&&t.if((0,Re._)`${s}.length > 0`,w)):(t.let(d,!1),w()),e.result(d,()=>e.reset());function w(){const y=t.name("_valid"),_=t.let("count",0);b(y,()=>t.if(y,()=>h(_)))}function b(y,_){t.forRange("i",0,i,m=>{e.subschema({keyword:"contains",dataProp:m,dataPropType:Rr.Type.Num,compositeRule:!0},y),_()})}function h(y){t.code((0,Re._)`${y}++`),u===void 0?t.if((0,Re._)`${y} >= ${a}`,()=>t.assign(d,!0).break()):(t.if((0,Re._)`${y} > ${u}`,()=>t.assign(d,!1).break()),a===1?t.assign(d,!0):t.if((0,Re._)`${y} >= ${a}`,()=>t.assign(d,!0)))}}};Mn.default=Xc;var ao={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=W,r=te,n=X;e.error={message:({params:{property:p,depsCount:c,deps:i}})=>{const d=c===1?"property":"properties";return(0,t.str)`must have ${d} ${i} when property ${p} is present`},params:({params:{property:p,depsCount:c,deps:i,missingProperty:d}})=>(0,t._)`{property: ${p},
    missingProperty: ${d},
    depsCount: ${c},
    deps: ${i}}`};const s={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(p){const[c,i]=o(p);a(p,c),u(p,i)}};function o({schema:p}){const c={},i={};for(const d in p){if(d==="__proto__")continue;const w=Array.isArray(p[d])?c:i;w[d]=p[d]}return[c,i]}function a(p,c=p.schema){const{gen:i,data:d,it:w}=p;if(Object.keys(c).length===0)return;const b=i.let("missing");for(const h in c){const y=c[h];if(y.length===0)continue;const _=(0,n.propertyInData)(i,d,h,w.opts.ownProperties);p.setParams({property:h,depsCount:y.length,deps:y.join(", ")}),w.allErrors?i.if(_,()=>{for(const m of y)(0,n.checkReportMissingProp)(p,m)}):(i.if((0,t._)`${_} && (${(0,n.checkMissingProp)(p,y,b)})`),(0,n.reportMissingProp)(p,b),i.else())}}e.validatePropertyDeps=a;function u(p,c=p.schema){const{gen:i,data:d,keyword:w,it:b}=p,h=i.name("valid");for(const y in c)(0,r.alwaysValidSchema)(b,c[y])||(i.if((0,n.propertyInData)(i,d,y,b.opts.ownProperties),()=>{const _=p.subschema({keyword:w,schemaProp:y},h);p.mergeValidEvaluated(_,h)},()=>i.var(h,!0)),p.ok(h))}e.validateSchemaDeps=u,e.default=s})(ao);var Fn={};Object.defineProperty(Fn,"__esModule",{value:!0});const io=W,Yc=te,Qc={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:e})=>(0,io._)`{propertyName: ${e.propertyName}}`},code(e){const{gen:t,schema:r,data:n,it:s}=e;if((0,Yc.alwaysValidSchema)(s,r))return;const o=t.name("valid");t.forIn("key",n,a=>{e.setParams({propertyName:a}),e.subschema({keyword:"propertyNames",data:a,dataTypes:["string"],propertyName:a,compositeRule:!0},o),t.if((0,io.not)(o),()=>{e.error(!0),s.allErrors||t.break()})}),e.ok(o)}};Fn.default=Qc;var Nr={};Object.defineProperty(Nr,"__esModule",{value:!0});const Tr=X,De=W,Zc=ke,Cr=te,eu={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:e})=>(0,De._)`{additionalProperty: ${e.additionalProperty}}`},code(e){const{gen:t,schema:r,parentSchema:n,data:s,errsCount:o,it:a}=e;if(!o)throw new Error("ajv implementation error");const{allErrors:u,opts:p}=a;if(a.props=!0,p.removeAdditional!=="all"&&(0,Cr.alwaysValidSchema)(a,r))return;const c=(0,Tr.allSchemaProperties)(n.properties),i=(0,Tr.allSchemaProperties)(n.patternProperties);d(),e.ok((0,De._)`${o} === ${Zc.default.errors}`);function d(){t.forIn("key",s,_=>{!c.length&&!i.length?h(_):t.if(w(_),()=>h(_))})}function w(_){let m;if(c.length>8){const E=(0,Cr.schemaRefOrVal)(a,n.properties,"properties");m=(0,Tr.isOwnProperty)(t,E,_)}else c.length?m=(0,De.or)(...c.map(E=>(0,De._)`${_} === ${E}`)):m=De.nil;return i.length&&(m=(0,De.or)(m,...i.map(E=>(0,De._)`${(0,Tr.usePattern)(e,E)}.test(${_})`))),(0,De.not)(m)}function b(_){t.code((0,De._)`delete ${s}[${_}]`)}function h(_){if(p.removeAdditional==="all"||p.removeAdditional&&r===!1){b(_);return}if(r===!1){e.setParams({additionalProperty:_}),e.error(),u||t.break();return}if(typeof r=="object"&&!(0,Cr.alwaysValidSchema)(a,r)){const m=t.name("valid");p.removeAdditional==="failing"?(y(_,m,!1),t.if((0,De.not)(m),()=>{e.reset(),b(_)})):(y(_,m),u||t.if((0,De.not)(m),()=>t.break()))}}function y(_,m,E){const P={keyword:"additionalProperties",dataProp:_,dataPropType:Cr.Type.Str};E===!1&&Object.assign(P,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(P,m)}}};Nr.default=eu;var Un={};Object.defineProperty(Un,"__esModule",{value:!0});const tu=Ae,co=X,zn=te,uo=Nr,ru={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,parentSchema:n,data:s,it:o}=e;o.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&uo.default.code(new tu.KeywordCxt(o,uo.default,"additionalProperties"));const a=(0,co.allSchemaProperties)(r);for(const d of a)o.definedProperties.add(d);o.opts.unevaluated&&a.length&&o.props!==!0&&(o.props=zn.mergeEvaluated.props(t,(0,zn.toHash)(a),o.props));const u=a.filter(d=>!(0,zn.alwaysValidSchema)(o,r[d]));if(u.length===0)return;const p=t.name("valid");for(const d of u)c(d)?i(d):(t.if((0,co.propertyInData)(t,s,d,o.opts.ownProperties)),i(d),o.allErrors||t.else().var(p,!0),t.endIf()),e.it.definedProperties.add(d),e.ok(p);function c(d){return o.opts.useDefaults&&!o.compositeRule&&r[d].default!==void 0}function i(d){e.subschema({keyword:"properties",schemaProp:d,dataProp:d},p)}}};Un.default=ru;var Vn={};Object.defineProperty(Vn,"__esModule",{value:!0});const lo=X,Ar=W,fo=te,po=te,nu={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,data:n,parentSchema:s,it:o}=e,{opts:a}=o,u=(0,lo.allSchemaProperties)(r),p=u.filter(y=>(0,fo.alwaysValidSchema)(o,r[y]));if(u.length===0||p.length===u.length&&(!o.opts.unevaluated||o.props===!0))return;const c=a.strictSchema&&!a.allowMatchingProperties&&s.properties,i=t.name("valid");o.props!==!0&&!(o.props instanceof Ar.Name)&&(o.props=(0,po.evaluatedPropsToName)(t,o.props));const{props:d}=o;w();function w(){for(const y of u)c&&b(y),o.allErrors?h(y):(t.var(i,!0),h(y),t.if(i))}function b(y){for(const _ in c)new RegExp(y).test(_)&&(0,fo.checkStrictMode)(o,`property ${_} matches pattern ${y} (use allowMatchingProperties)`)}function h(y){t.forIn("key",n,_=>{t.if((0,Ar._)`${(0,lo.usePattern)(e,y)}.test(${_})`,()=>{const m=p.includes(y);m||e.subschema({keyword:"patternProperties",schemaProp:y,dataProp:_,dataPropType:po.Type.Str},i),o.opts.unevaluated&&d!==!0?t.assign((0,Ar._)`${d}[${_}]`,!0):!m&&!o.allErrors&&t.if((0,Ar.not)(i),()=>t.break())})})}}};Vn.default=nu;var Ln={};Object.defineProperty(Ln,"__esModule",{value:!0});const su=te,ou={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:r,it:n}=e;if((0,su.alwaysValidSchema)(n,r)){e.fail();return}const s=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),e.failResult(s,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};Ln.default=ou;var qn={};Object.defineProperty(qn,"__esModule",{value:!0});const au={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:X.validateUnion,error:{message:"must match a schema in anyOf"}};qn.default=au;var Hn={};Object.defineProperty(Hn,"__esModule",{value:!0});const jr=W,iu=te,cu={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:e})=>(0,jr._)`{passingSchemas: ${e.passing}}`},code(e){const{gen:t,schema:r,parentSchema:n,it:s}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(s.opts.discriminator&&n.discriminator)return;const o=r,a=t.let("valid",!1),u=t.let("passing",null),p=t.name("_valid");e.setParams({passing:u}),t.block(c),e.result(a,()=>e.reset(),()=>e.error(!0));function c(){o.forEach((i,d)=>{let w;(0,iu.alwaysValidSchema)(s,i)?t.var(p,!0):w=e.subschema({keyword:"oneOf",schemaProp:d,compositeRule:!0},p),d>0&&t.if((0,jr._)`${p} && ${a}`).assign(a,!1).assign(u,(0,jr._)`[${u}, ${d}]`).else(),t.if(p,()=>{t.assign(a,!0),t.assign(u,d),w&&e.mergeEvaluated(w,jr.Name)})})}}};Hn.default=cu;var Kn={};Object.defineProperty(Kn,"__esModule",{value:!0});const uu=te,lu={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:r,it:n}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");const s=t.name("valid");r.forEach((o,a)=>{if((0,uu.alwaysValidSchema)(n,o))return;const u=e.subschema({keyword:"allOf",schemaProp:a},s);e.ok(s),e.mergeEvaluated(u)})}};Kn.default=lu;var Bn={};Object.defineProperty(Bn,"__esModule",{value:!0});const Ir=W,ho=te,du={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:e})=>(0,Ir.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,Ir._)`{failingKeyword: ${e.ifClause}}`},code(e){const{gen:t,parentSchema:r,it:n}=e;r.then===void 0&&r.else===void 0&&(0,ho.checkStrictMode)(n,'"if" without "then" and "else" is ignored');const s=mo(n,"then"),o=mo(n,"else");if(!s&&!o)return;const a=t.let("valid",!0),u=t.name("_valid");if(p(),e.reset(),s&&o){const i=t.let("ifClause");e.setParams({ifClause:i}),t.if(u,c("then",i),c("else",i))}else s?t.if(u,c("then")):t.if((0,Ir.not)(u),c("else"));e.pass(a,()=>e.error(!0));function p(){const i=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},u);e.mergeEvaluated(i)}function c(i,d){return()=>{const w=e.subschema({keyword:i},u);t.assign(a,u),e.mergeValidEvaluated(w,a),d?t.assign(d,(0,Ir._)`${i}`):e.setParams({ifClause:i})}}}};function mo(e,t){const r=e.schema[t];return r!==void 0&&!(0,ho.alwaysValidSchema)(e,r)}Bn.default=du;var Gn={};Object.defineProperty(Gn,"__esModule",{value:!0});const fu=te,pu={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:r}){t.if===void 0&&(0,fu.checkStrictMode)(r,`"${e}" without "if" is ignored`)}};Gn.default=pu,Object.defineProperty(jn,"__esModule",{value:!0});const hu=wt,mu=Dn,yu=bt,gu=kn,vu=Mn,$u=ao,_u=Fn,wu=Nr,bu=Un,Eu=Vn,Su=Ln,Pu=qn,Ou=Hn,Ru=Kn,Nu=Bn,Tu=Gn;function Cu(e=!1){const t=[Su.default,Pu.default,Ou.default,Ru.default,Nu.default,Tu.default,_u.default,wu.default,$u.default,bu.default,Eu.default];return e?t.push(mu.default,gu.default):t.push(hu.default,yu.default),t.push(vu.default),t}jn.default=Cu;var Jn={},Wn={};Object.defineProperty(Wn,"__esModule",{value:!0});const le=W,Au={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>(0,le.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,le._)`{format: ${e}}`},code(e,t){const{gen:r,data:n,$data:s,schema:o,schemaCode:a,it:u}=e,{opts:p,errSchemaPath:c,schemaEnv:i,self:d}=u;if(!p.validateFormats)return;s?w():b();function w(){const h=r.scopeValue("formats",{ref:d.formats,code:p.code.formats}),y=r.const("fDef",(0,le._)`${h}[${a}]`),_=r.let("fType"),m=r.let("format");r.if((0,le._)`typeof ${y} == "object" && !(${y} instanceof RegExp)`,()=>r.assign(_,(0,le._)`${y}.type || "string"`).assign(m,(0,le._)`${y}.validate`),()=>r.assign(_,(0,le._)`"string"`).assign(m,y)),e.fail$data((0,le.or)(E(),P()));function E(){return p.strictSchema===!1?le.nil:(0,le._)`${a} && !${m}`}function P(){const A=i.$async?(0,le._)`(${y}.async ? await ${m}(${n}) : ${m}(${n}))`:(0,le._)`${m}(${n})`,k=(0,le._)`(typeof ${m} == "function" ? ${A} : ${m}.test(${n}))`;return(0,le._)`${m} && ${m} !== true && ${_} === ${t} && !${k}`}}function b(){const h=d.formats[o];if(!h){E();return}if(h===!0)return;const[y,_,m]=P(h);y===t&&e.pass(A());function E(){if(p.strictSchema===!1){d.logger.warn(k());return}throw new Error(k());function k(){return`unknown format "${o}" ignored in schema at path "${c}"`}}function P(k){const S=k instanceof RegExp?(0,le.regexpCode)(k):p.code.formats?(0,le._)`${p.code.formats}${(0,le.getProperty)(o)}`:void 0,C=r.scopeValue("formats",{key:o,ref:k,code:S});return typeof k=="object"&&!(k instanceof RegExp)?[k.type||"string",k.validate,(0,le._)`${C}.validate`]:["string",k,C]}function A(){if(typeof h=="object"&&!(h instanceof RegExp)&&h.async){if(!i.$async)throw new Error("async format in sync schema");return(0,le._)`await ${m}(${n})`}return typeof _=="function"?(0,le._)`${m}(${n})`:(0,le._)`${m}.test(${n})`}}}};Wn.default=Au,Object.defineProperty(Jn,"__esModule",{value:!0});const ju=[Wn.default];Jn.default=ju;var Et={};Object.defineProperty(Et,"__esModule",{value:!0}),Et.contentVocabulary=Et.metadataVocabulary=void 0,Et.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],Et.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"],Object.defineProperty(mn,"__esModule",{value:!0});const Iu=yn,Du=vn,ku=jn,Mu=Jn,yo=Et,Fu=[Iu.default,Du.default,(0,ku.default)(),Mu.default,yo.metadataVocabulary,yo.contentVocabulary];mn.default=Fu;var xn={},go={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DiscrError=void 0,function(t){t.Tag="tag",t.Mapping="mapping"}(e.DiscrError||(e.DiscrError={}))})(go),Object.defineProperty(xn,"__esModule",{value:!0});const St=W,Xn=go,vo=be,Uu=te,zu={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:e,tagName:t}})=>e===Xn.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:r}})=>(0,St._)`{error: ${e}, tag: ${r}, tagValue: ${t}}`},code(e){const{gen:t,data:r,schema:n,parentSchema:s,it:o}=e,{oneOf:a}=s;if(!o.opts.discriminator)throw new Error("discriminator: requires discriminator option");const u=n.propertyName;if(typeof u!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!a)throw new Error("discriminator: requires oneOf keyword");const p=t.let("valid",!1),c=t.const("tag",(0,St._)`${r}${(0,St.getProperty)(u)}`);t.if((0,St._)`typeof ${c} == "string"`,()=>i(),()=>e.error(!1,{discrError:Xn.DiscrError.Tag,tag:c,tagName:u})),e.ok(p);function i(){const b=w();t.if(!1);for(const h in b)t.elseIf((0,St._)`${c} === ${h}`),t.assign(p,d(b[h]));t.else(),e.error(!1,{discrError:Xn.DiscrError.Mapping,tag:c,tagName:u}),t.endIf()}function d(b){const h=t.name("valid"),y=e.subschema({keyword:"oneOf",schemaProp:b},h);return e.mergeEvaluated(y,St.Name),h}function w(){var b;const h={},y=m(s);let _=!0;for(let A=0;A<a.length;A++){let k=a[A];k!=null&&k.$ref&&!(0,Uu.schemaHasRulesButRef)(k,o.self.RULES)&&(k=vo.resolveRef.call(o.self,o.schemaEnv.root,o.baseId,k==null?void 0:k.$ref),k instanceof vo.SchemaEnv&&(k=k.schema));const S=(b=k==null?void 0:k.properties)===null||b===void 0?void 0:b[u];if(typeof S!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${u}"`);_=_&&(y||m(k)),E(S,A)}if(!_)throw new Error(`discriminator: "${u}" must be required`);return h;function m({required:A}){return Array.isArray(A)&&A.includes(u)}function E(A,k){if(A.const)P(A.const,k);else if(A.enum)for(const S of A.enum)P(S,k);else throw new Error(`discriminator: "properties/${u}" must have "const" or "enum"`)}function P(A,k){if(typeof A!="string"||A in h)throw new Error(`discriminator: "${u}" values must be unique strings`);h[A]=k}}}};xn.default=zu;const Vu={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;const r=$s,n=mn,s=xn,o=Vu,a=["/properties"],u="http://json-schema.org/draft-07/schema";class p extends r.default{_addVocabularies(){super._addVocabularies(),n.default.forEach(h=>this.addVocabulary(h)),this.opts.discriminator&&this.addKeyword(s.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const h=this.opts.$data?this.$dataMetaSchema(o,a):o;this.addMetaSchema(h,u,!1),this.refs["http://json-schema.org/schema"]=u}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(u)?u:void 0)}}e.exports=t=p,Object.defineProperty(t,"__esModule",{value:!0}),t.default=p;var c=Ae;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return c.KeywordCxt}});var i=W;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return i._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return i.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return i.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return i.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return i.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return i.CodeGen}});var d=Ht;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return d.default}});var w=Kt;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return w.default}})})(Na,Ft);const $o=vs(Ft);var Dr={},Lu={get exports(){return Dr},set exports(e){Dr=e}},_o={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.formatNames=e.fastFormats=e.fullFormats=void 0;function t(F,L){return{validate:F,compare:L}}e.fullFormats={date:t(o,a),time:t(p,c),"date-time":t(d,w),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:y,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:M,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:m,int32:{type:"number",validate:A},int64:{type:"number",validate:k},float:{type:"number",validate:S},double:{type:"number",validate:S},password:!0,binary:!0},e.fastFormats={...e.fullFormats,date:t(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,a),time:t(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,c),"date-time":t(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,w),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},e.formatNames=Object.keys(e.fullFormats);function r(F){return F%4===0&&(F%100!==0||F%400===0)}const n=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,s=[0,31,28,31,30,31,30,31,31,30,31,30,31];function o(F){const L=n.exec(F);if(!L)return!1;const x=+L[1],B=+L[2],he=+L[3];return B>=1&&B<=12&&he>=1&&he<=(B===2&&r(x)?29:s[B])}function a(F,L){if(F&&L)return F>L?1:F<L?-1:0}const u=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i;function p(F,L){const x=u.exec(F);if(!x)return!1;const B=+x[1],he=+x[2],oe=+x[3],Ne=x[5];return(B<=23&&he<=59&&oe<=59||B===23&&he===59&&oe===60)&&(!L||Ne!=="")}function c(F,L){if(!(F&&L))return;const x=u.exec(F),B=u.exec(L);if(x&&B)return F=x[1]+x[2]+x[3]+(x[4]||""),L=B[1]+B[2]+B[3]+(B[4]||""),F>L?1:F<L?-1:0}const i=/t|\s/i;function d(F){const L=F.split(i);return L.length===2&&o(L[0])&&p(L[1],!0)}function w(F,L){if(!(F&&L))return;const[x,B]=F.split(i),[he,oe]=L.split(i),Ne=a(x,he);if(Ne!==void 0)return Ne||c(B,oe)}const b=/\/|:/,h=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function y(F){return b.test(F)&&h.test(F)}const _=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function m(F){return _.lastIndex=0,_.test(F)}const E=-(2**31),P=2**31-1;function A(F){return Number.isInteger(F)&&F<=P&&F>=E}function k(F){return Number.isInteger(F)}function S(){return!0}const C=/[^\\]\\Z/;function M(F){if(C.test(F))return!1;try{return new RegExp(F),!0}catch{return!1}}})(_o);var wo={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.formatLimitDefinition=void 0;const t=Ft,r=W,n=r.operators,s={formatMaximum:{okStr:"<=",ok:n.LTE,fail:n.GT},formatMinimum:{okStr:">=",ok:n.GTE,fail:n.LT},formatExclusiveMaximum:{okStr:"<",ok:n.LT,fail:n.GTE},formatExclusiveMinimum:{okStr:">",ok:n.GT,fail:n.LTE}},o={message:({keyword:u,schemaCode:p})=>r.str`should be ${s[u].okStr} ${p}`,params:({keyword:u,schemaCode:p})=>r._`{comparison: ${s[u].okStr}, limit: ${p}}`};e.formatLimitDefinition={keyword:Object.keys(s),type:"string",schemaType:"string",$data:!0,error:o,code(u){const{gen:p,data:c,schemaCode:i,keyword:d,it:w}=u,{opts:b,self:h}=w;if(!b.validateFormats)return;const y=new t.KeywordCxt(w,h.RULES.all.format.definition,"format");y.$data?_():m();function _(){const P=p.scopeValue("formats",{ref:h.formats,code:b.code.formats}),A=p.const("fmt",r._`${P}[${y.schemaCode}]`);u.fail$data(r.or(r._`typeof ${A} != "object"`,r._`${A} instanceof RegExp`,r._`typeof ${A}.compare != "function"`,E(A)))}function m(){const P=y.schema,A=h.formats[P];if(!A||A===!0)return;if(typeof A!="object"||A instanceof RegExp||typeof A.compare!="function")throw new Error(`"${d}": format "${P}" does not define "compare" function`);const k=p.scopeValue("formats",{key:P,ref:A,code:b.code.formats?r._`${b.code.formats}${r.getProperty(P)}`:void 0});u.fail$data(E(k))}function E(P){return r._`${P}.compare(${c}, ${i}) ${s[d].fail} 0`}},dependencies:["format"]};const a=u=>(u.addKeyword(e.formatLimitDefinition),u);e.default=a})(wo),function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=_o,n=wo,s=W,o=new s.Name("fullFormats"),a=new s.Name("fastFormats"),u=(c,i={keywords:!0})=>{if(Array.isArray(i))return p(c,i,r.fullFormats,o),c;const[d,w]=i.mode==="fast"?[r.fastFormats,a]:[r.fullFormats,o],b=i.formats||r.formatNames;return p(c,b,d,w),i.keywords&&n.default(c),c};u.get=(c,i="full")=>{const w=(i==="fast"?r.fastFormats:r.fullFormats)[c];if(!w)throw new Error(`Unknown format "${c}"`);return w};function p(c,i,d,w){var b,h;(b=(h=c.opts.code).formats)!==null&&b!==void 0||(h.formats=s._`require("ajv-formats/dist/formats").${w}`);for(const y of i)c.addFormat(y,d[y])}e.exports=t=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u}(Lu,Dr);const bo=vs(Dr);function Yn(e,t){const r={};for(const[n]of Object.entries(t||{}))r[n]=e[n];return r}function qu(e,t){var w,b,h;let r={},n={};const s=e.namespace||"",o=()=>s?t[s]||{}:t;function a(y){return y.replace(/^\//,"").replace(/\//g,".")}const u=(y,_)=>{const m=new $o({allErrors:!0,allowUnionTypes:!0});bo(m);const E=m.compile(y);if(!E(o())){const A=E.errors;if(!A)throw new Error("Unknown error");const k=A[0],S=new Error(k.message);throw S.namespace=s,S.params=k.params,S.property=k.params.missingProperty??a(k.instancePath),S}};if(e.server&&Object.keys(e.server).length>0){try{u(e.server,"server")}catch(_){throw _}const y=Yn(o(),e.server.properties);s?r[s]=y:r=y}if(e.client&&Object.keys(e.client).length>0){try{u(e.client,"client")}catch(_){throw _}const y=Yn(o(),e.client.properties);s?n[s]=y:n=y}if(e["*"]&&Object.keys(e["*"]).length>0){const y=Yn(o(),e["*"].properties);try{u(e["*"],"both")}catch(_){throw _}s?(r[s]={...r[s],...y},n[s]={...n[s],...y}):(r={...r,...y},n={...n,...y})}function p(y){if(y.type==="object"&&("additionalProperties"in y||(y.additionalProperties=!1),y.properties))for(const _ in y.properties)y.properties[_]=p(y.properties[_]);return y}function c(y,_){var A;const m=new $o({allErrors:!0,allowUnionTypes:!0});bo(m);const E=m.compile(p(y));if(E(_))return[];{const k=[];return(A=E.errors)==null||A.forEach(S=>{var C;if(S.keyword==="additionalProperties"){const M=a(S.instancePath),F=M+(M?".":"")+((C=S.params)==null?void 0:C.additionalProperty);k.push(F)}}),k}}const i={...((w=e.server)==null?void 0:w.properties)||{},...((b=e.client)==null?void 0:b.properties)||{},...((h=e["*"])==null?void 0:h.properties)||{}},d=c({type:"object",properties:i},o()).filter(y=>y!=="modules").map(y=>s?`${s}.${y}`:y);return{server:r,client:n,namespace:s,extraProps:d}}const Ue={yellow:e=>e,blue:e=>e,red:e=>e,dim:e=>e},Hu={compilerOptions:{type:"object",properties:{alias:{type:"object",additionalProperties:{type:"string"}},build:{type:"object",properties:{pwaEnabled:{type:"boolean"},assetsPath:{type:"string"},outputDir:{type:"string"},serverUrl:{type:"string"}}},spritesheetDirectories:{type:"array",items:{type:"string"}}}},vite:{type:"object",additionalProperties:!0},modulesRoot:{type:"string"},autostart:{type:"boolean"},spritesheetDirectories:{type:"array",items:{type:"string"}}},Ku={canvas:{type:"object",properties:{transparent:{type:"boolean"},autoDensity:{type:"boolean"},antialias:{type:"boolean"},resolution:{type:"number"},preserveDrawingBuffer:{type:"boolean"},backgroundColor:{type:"number"}}},selector:{type:"string"},selectorGui:{type:"string"},selectorCanvas:{type:"string"},standalone:{type:"boolean"},drawMap:{type:"boolean"},maxFps:{type:"number"},serverFps:{type:"number"}},Bu={express:{type:"object",properties:{static:{type:"string"},port:{type:"integer"},json:{type:"object",additionalProperties:!0},cors:{type:"object",additionalProperties:!0},socketIo:{type:"object",additionalProperties:!0}}}},Gu={vitest:{type:"object",additionalProperties:!0}},Ju={socketIoClient:{type:"object",additionalProperties:!0}},Wu={server:{type:"object",properties:{startMap:{type:"string"},start:{type:"object",properties:{map:{type:"string"},graphic:{type:"string"},hitbox:{type:"array",items:[{type:"integer"},{type:"integer"}],additionalItems:!1,minItems:2,maxItems:2}}},api:{type:"object",properties:{enabled:{type:"boolean"},authSecret:{type:"string"}},required:["enabled","authSecret"]},...Hu,...Bu,...Gu}},client:{type:"object",properties:{shortName:{type:"string"},description:{type:"string"},themeColor:{type:"string"},icons:{type:"array",items:{type:"object",properties:{src:{type:"string"},sizes:{type:"array",items:{type:"number",minimum:0}},type:{type:"string"}}}},themeCss:{type:"string"},matchMakerService:{type:"string"},pwa:{type:"object",additionalProperties:!0},...Ku,...Ju}},"*":{type:"object",properties:{inputs:{type:"object",additionalProperties:{oneOf:[{type:"object",properties:{repeat:{type:"boolean",default:!1},bind:{type:["string","array"]},delay:{type:"object",properties:{duration:{type:"number",minimum:0},otherControls:{type:"array",items:{type:"string"}}},required:["duration"]}},required:["bind"]}]}},name:{type:"string"}}}};function Eo(e,t){for(var r=0,n=e.length-1;n>=0;n--){var s=e[n];s==="."?e.splice(n,1):s===".."?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}var xu=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,Qn=function(e){return xu.exec(e).slice(1)};function Zn(){for(var e="",t=!1,r=arguments.length-1;r>=-1&&!t;r--){var n=r>=0?arguments[r]:"/";if(typeof n!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!n)continue;e=n+"/"+e,t=n.charAt(0)==="/"}return e=Eo(es(e.split("/"),function(s){return!!s}),!t).join("/"),(t?"/":"")+e||"."}function So(e){var t=Po(e),r=nl(e,-1)==="/";return e=Eo(es(e.split("/"),function(n){return!!n}),!t).join("/"),!e&&!t&&(e="."),e&&r&&(e+="/"),(t?"/":"")+e}function Po(e){return e.charAt(0)==="/"}function Xu(){var e=Array.prototype.slice.call(arguments,0);return So(es(e,function(t,r){if(typeof t!="string")throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))}function Yu(e,t){e=Zn(e).substr(1),t=Zn(t).substr(1);function r(c){for(var i=0;i<c.length&&c[i]==="";i++);for(var d=c.length-1;d>=0&&c[d]==="";d--);return i>d?[]:c.slice(i,d-i+1)}for(var n=r(e.split("/")),s=r(t.split("/")),o=Math.min(n.length,s.length),a=o,u=0;u<o;u++)if(n[u]!==s[u]){a=u;break}for(var p=[],u=a;u<n.length;u++)p.push("..");return p=p.concat(s.slice(a)),p.join("/")}var Qu="/",Zu=":";function el(e){var t=Qn(e),r=t[0],n=t[1];return!r&&!n?".":(n&&(n=n.substr(0,n.length-1)),r+n)}function tl(e,t){var r=Qn(e)[2];return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r}function rl(e){return Qn(e)[3]}const ye={extname:rl,basename:tl,dirname:el,sep:Qu,delimiter:Zu,relative:Yu,join:Xu,isAbsolute:Po,normalize:So,resolve:Zn};function es(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}var nl="ab".substr(-1)==="b"?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)};function kr(e){console.log(Ue.yellow(`  Warning - ${e}`))}function sl(e){console.log(Ue.blue(`  Info - ${e}`))}function ol(e){console.log(Ue.red(`  Error - ${e}`))}const al=e=>{ol(`${e.response.status} - ${e.response.data.error}`)};function il(e,t,r){let n={},s={},o=[];const a=r.side=="server",u=(c,i)=>{try{const d=qu(c,t);d.server&&(s={...s,...d.server}),d.client&&(n={...n,...d.client}),d.extraProps&&(o=[...o,...d.extraProps])}catch(d){if(!d.property)throw console.log(d),d;if(!a)return!1;let w=Ue.red(`Invalidate "${i}" module: ${d.message}`),b=`[${d.namespace}]
  ${d.property} = YOUR_VALUE`;throw i||(w=Ue.red(`Invalidate config: ${d.message}`),b=`${d.property} = YOUR_VALUE`),console.log("----------"),console.log(w),d.params.allowedValues&&console.log(`
${Ue.dim(" Authorize values:")} ${Ue.dim(d.params.allowedValues.join(", "))}`),console.log(`${Ue.dim("")} ${Ue.dim(`you need to put the following configuration in rpg.toml:

${b}`)}`),console.log("----------"),d}};u(Wu);let p=[];for(let c of e){let i=c;i[0]!="."&&(i=ye.join("node_modules",i));const d=ye.resolve(process.cwd(),i,"config.json");if(pe.existsSync(d)){const w=pe.readFileSync(d).toString(),b=JSON.parse(w);b.namespace&&p.push(b.namespace),u(b,c)}}if(a){const c=o.filter(i=>p.indexOf(i)==-1);if(c.length>0){kr("In rpg.toml, you put the following properties, but they are not used by the modules. Check the names of the properties.");for(let i of c)console.log(`  - ${Ue.yellow(i)}`)}}return{configClient:n,configServer:s}}const ts=()=>[],cl=e=>[...ts(),...ts(),...ts()],ul=e=>ye.join(e,"assets");function Qt(e){return e.replace(/\\/g,"/")}function Oo(e){const{cwd:t}=process;return Qt("./"+Qt(ye.relative(t(),e)))}function Ro(e,t){const r=e.indexOf(t);if(r===-1)throw new Error("Project path not found in absolute path");return e.substring(r)}function No(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function To(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?No(Object(r),!0).forEach(function(n){ll(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):No(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ll(e,t,r){return t=dl(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dl(e){var t=fl(e,"string");return typeof t=="symbol"?t:String(t)}function fl(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}const Se=Co({});function Co(e){return t.withOptions=r=>Co(To(To({},e),r)),t;function t(r,...n){const s=typeof r=="string"?[r]:r.raw,{escapeSpecialCharacters:o=Array.isArray(r)}=e;let a="";for(let c=0;c<s.length;c++){let i=s[c];o&&(i=i.replace(/\\\n[ \t]*/g,"").replace(/\\`/g,"`").replace(/\\\$/g,"$").replace(/\\{/g,"{")),a+=i,c<n.length&&(a+=n[c])}const u=a.split(`
`);let p=null;for(const c of u){const i=c.match(/^(\s+)\S+/);if(i){const d=i[1].length;p?p=Math.min(p,d):p=d}}if(p!==null){const c=p;a=u.map(i=>i[0]===" "||i[0]==="	"?i.slice(c):i).join(`
`)}return a.trim().replace(/\\n/g,`
`)}}var Ao=Object.freeze,pl=Object.defineProperty,hl=(e,t)=>Ao(pl(e,"raw",{value:Ao(t||e.slice())})),jo;const Zt="virtual-modules",Mr="virtual-config-client",Fr="virtual-config-server",{cwd:er,exit:ml}=process;function Ur(e){return e=e.replace(/\./g,""),e.replace(/[.@\/ -]/g,"_")}function Io(e){return e.startsWith("@rpgjs")||e.startsWith("rpgjs")?"node_modules/"+e:e}function zr(e){const t=[],r=pe.readdirSync(e,{withFileTypes:!0});for(const n of r){const s=ye.join(e,n.name);if(n.isDirectory()){const o=zr(s);t.push(...o)}else t.push(s)}return t}function ze(e,t,r,n,s){let o="",a="";const u=ye.resolve(t,e);return pe.existsSync(u)?{variablesString:zr(u).filter(c=>typeof r=="string"?c.endsWith(r):r.some(i=>c.endsWith(i))).filter(c=>s!=null&&s.customFilter?s.customFilter(c):!0).map(c=>{const i=Oo(c),d=Ur(i);return a=i,o=o+`
import ${d} from '${i}'`,n?n(i,d):d}).join(","),importString:o,folder:u,relativePath:a}:{variablesString:"",importString:"",folder:"",relativePath:""}}function Pt(e,t,r){const n=ye.resolve(er(),Io(e),t+".ts");let s="";return pe.existsSync(n)&&(s=`import ${r||t} from '${e}/${t}.ts'`),s}function Do(e,t,r){var y,_,m;const{modulesCreated:n}=t;n.includes(e)||n.push(e);const s=Pt(e,"player"),o=Pt(e,"server"),a=ze("maps",e,".ts"),u=ze("maps",e,".tmx",(E,P)=>`
            {
                id: '${E.replace(".tmx","")}',
                file: ${P}
            }
        `,{customFilter:E=>{const P=E.replace(".tmx",".ts");return!pe.existsSync(P)}}),p=!!(u!=null&&u.variablesString),c=ze("worlds",e,".world"),i=ze("database",e,".ts"),d=ze("events",e,".ts"),w=(y=r.start)==null?void 0:y.hitbox,b=E=>Se`
        [${E==null?void 0:E.variablesString}].map((val) => {
            if (!val) {
                throw new Error('Do you have "export default" in this file ? :  ${E==null?void 0:E.relativePath}')
            }
            return val
        })
    `;return`
        import { type RpgServer, RpgModule } from '@rpgjs/server'
        ${u==null?void 0:u.importString}
        ${a==null?void 0:a.importString}
        ${c==null?void 0:c.importString}
        ${s||"const player = {}"}
        ${d==null?void 0:d.importString}
        ${i==null?void 0:i.importString}
        ${o}

        ${n.length==1?Se`const _lastConnectedCb = player.onConnected
            player.onConnected = async (player) => {
                if (_lastConnectedCb) await _lastConnectedCb(player)
                if (!player.server.module.customHookExists('server.player.onAuth')) {
                    ${(_=r.start)!=null&&_.graphic?`player.setGraphic('${(m=r.start)==null?void 0:m.graphic}')`:""}
                    ${w?`player.setHitbox(${w[0]}, ${w[1]})`:""}
                    ${r.startMap?`await player.changeMap('${r.startMap}')`:""}
                }
            }`:""}

        @RpgModule<RpgServer>({ 
            player,
            events: ${b(d)},
            ${o?"engine: server,":""}
            database: ${b(i)},
            maps: [${u==null?void 0:u.variablesString}${p?",":""}${a==null?void 0:a.variablesString}],
            worldMaps: [${c==null?void 0:c.variablesString}] 
        })
        export default class RpgServerModuleEngine {} 
    `}function Vr(e,t,r,n=!1){const s=ze(e,t,".ts");let o="";if(s!=null&&s.importString){const a=s.folder;let u="",p="";const c=a.replace(er(),"/");if(zr(a).filter(i=>[".png",".jpg",".jpeg",".gif",".bmp",".webp",".svg"].some(w=>i.toLowerCase().endsWith(w))).forEach(async i=>{const d=ye.basename(i),w=d.replace(ye.extname(i),"");if(r.serveMode===!1){const{outputDir:b="dist"}=r.config.compilerOptions.build,h=ye.join(b,ul(r.type==="rpg"?"":"client"),d);pe.copyFileSync(i,h)}p=i,u+=`"${w}": "${Qt(Ro(i,c.replace(/^\/+/,"")))}",
`}),!p)kr(`No spritesheet image found in ${e} folder`);else{const i=Oa(p);o=`
            ${s==null?void 0:s.variablesString}.images = {
                ${u}
            }
            ${s==null?void 0:s.variablesString}.prototype.width = ${i.width}
            ${s==null?void 0:s.variablesString}.prototype.height = ${i.height}
        `}}else n&&kr(`No spritesheet folder found in ${e} folder`);return{...s,propImagesString:o}}function ko(e,t,r){const n=Pt(e,"scene-map","sceneMap"),s=Pt(e,"sprite"),o=Pt(e,"client","engine"),a=ze("gui",e,[".vue",".tsx",".jsx"]);let u=[];const p={config:r,...t};r.spritesheetDirectories&&(u=r.spritesheetDirectories.map(h=>Vr(h,e,p))),(r.spritesheetDirectories??[]).some(h=>h==="characters")||u.push(Vr("characters",e,p,!1));const c="spritesheets",i=ye.join(e,c);if(pe.existsSync(i)){const h=pe.readdirSync(i,{withFileTypes:!0});for(const y of h)y.isDirectory()&&u.push(Vr(ye.join(c,y.name),e,p))}const d=ze("sounds",e,".ts"),w=ze("sounds",e,[".mp3",".ogg"],void 0,{customFilter:h=>{const y=h.replace(/\.(mp3|ogg)$/,".ts");return!pe.existsSync(y)}}),b=!!(w!=null&&w.variablesString);return u=u.filter(h=>h.importString),Se`
        import { type RpgClient, RpgModule } from '@rpgjs/client'
        ${s}
        ${n}
        ${o}
        ${u.map(h=>h.importString).join(`
`)}
        ${a==null?void 0:a.importString}
        ${w==null?void 0:w.importString}
        ${d==null?void 0:d.importString}

        ${u.map(h=>h.propImagesString).join(`
`)}
        
        @RpgModule<RpgClient>({ 
            spritesheets: [ ${u.map(h=>h.variablesString).join(`,
`)} ],
            sprite: ${s?"sprite":"{}"},
            ${o?"engine,":""}
            scenes: { ${n?"map: sceneMap":""} },
            gui: [${a==null?void 0:a.variablesString}],
            sounds: [${w==null?void 0:w.variablesString}${b?",":""}${d==null?void 0:d.variablesString}]
        })
        export default class RpgClientModuleEngine {}
    `}function Mo(e,t,r,n,s){const o=`virtual-${t}-client.ts`,a=`virtual-${t}-server.ts`;if(e.endsWith(a+"?server"))return Do(r,n,s);if(e.endsWith(o+"?client"))return ko(r,n,s);const u=ye.join(er(),e),p=ye.join(u,"package.json"),c=ye.join(u,"index.ts");if(pe.existsSync(p)){const{main:i}=JSON.parse(pe.readFileSync(p).toString());if(i){const d=Qt(ye.join(e,i));return Se`
                import mod from '@/${d}'
                export default mod
            `}}else if(pe.existsSync(c)){const i=Ro(Qt(c),e);return Se`
            import mod from '@/${i}'
            export default mod
        `}return Se`
        import client from 'client!./${o}'
        import server from 'server!./${a}'
        
        export default {
            client,
            server
        } 
    `}function Fo(e,t,r){return e.endsWith(Fr)?`
            export default ${JSON.stringify(t)}
        `:e.endsWith(Mr)?`
            export default ${JSON.stringify(r)}
        `:null}function rs(e){return e.replace(/^.\//,"")}function yl(e={},t){var p,c;let r=[],n=[];const s=(c=(p=t.vite)==null?void 0:p.build)==null?void 0:c.lib;if(t.modules&&(r=t.modules),t.inputs&&e.server)for(let i in t.inputs){const d=t.inputs[i];(typeof d.bind=="string"?[d.bind]:d.bind).find(w=>["1","2","3","4"].includes(w))&&kr(`Input "${i}" : Note that 1, 2, 3 or 4 designates a direction. Use up, right, bottom or left instead. If you want the number key, use n1, n2, n<number>.`)}let o;try{o=il(r,t,e)}catch{e.side=="server"&&ml()}if(!o)return;const{configClient:a,configServer:u}=o;return{name:"vite-plugin-config-toml",transformIndexHtml:{enforce:"pre",transform(i){const d=ye.resolve(er(),"src","client.ts"),w=pe.existsSync(d)?"mmorpg!./src/client.ts":"mmorpg!virtual-client.ts",b=ye.resolve(er(),"src","standalone.ts"),h=pe.existsSync(b)?"rpg!./src/standalone.ts":"rpg!virtual-standalone.ts";return i.replace("<head>",Se(jo||(jo=hl([`
                <head>
                <script type="module">
                    import '`,`'
                    import '`,`'
                <\/script>`])),w,h))}},handleHotUpdate(){n=[]},async resolveId(i,d){if(i.endsWith(Zt)||i.endsWith(Mr)||i.endsWith(Fr))return i;for(let w of r)if(i===rs(w))return i;if(i.includes("virtual")&&!i.endsWith("virtual-server.ts")&&e.serveMode||i.includes("virtual")&&!e.serveMode)return i},async load(i){const{env:d}=process,w=d.VITE_SERVER_URL,b=d.VITE_GAME_URL,h=`{
                VITE_BUILT: ${d.VITE_BUILT},
                VITE_SERVER_URL: ${w?"'"+w+"'":"undefined"},
                VITE_GAME_URL: ${b?"'"+b+"'":"undefined"},
                VITE_RPG_TYPE: '${e.type??"mmorpg"}',
                VITE_ASSETS_PATH: '${d.VITE_ASSETS_PATH??""}',
                VITE_REACT: ${d.VITE_REACT},
            }`;if(i.endsWith(Zt)){const _=r.reduce((m,E)=>{const P=Ur(E);return m[P]=E,m},{});return`
                ${Object.keys(_).map(m=>`import ${m} from '${rs(_[m])}'`).join(`
`)}

                export default [
                   ${Object.keys(_).join(`,
`)}
                ]
                `}else if(i.endsWith("virtual-client.ts?mmorpg")){const _=Se`
                    import { entryPoint } from '@rpgjs/client'
                    import io from 'socket.io-client'
                    import modules from './${Zt}'
                    import globalConfig from './${Mr}'
                `;return t.autostart?Se`${_}
    
                    document.addEventListener('DOMContentLoaded', function(e) { 
                        entryPoint(modules, { 
                            io,
                            globalConfig,
                            envs: ${h}
                        }).start()
                    });
                    `:Se`${_}
                        window.RpgStandalone = (extraModules = []) => {
                            return entryPoint([
                                ...modules,
                                ...extraModules
                            ], { 
                                io,
                                globalConfig,
                                envs: ${h}
                            }).start()
                        }
                    `}else if(i.endsWith("virtual-standalone.ts?rpg")){const _=Se`
                    import { entryPoint } from '@rpgjs/standalone'
                    import globalConfigClient from './${Mr}'
                    import globalConfigServer from './${Fr}'
                    import modules from './${Zt}'
                `;return t.autostart?Se`${_}

                    ${s?`  window.global ||= window
                     
                        export default (extraModules = []) => {
                            return entryPoint([
                                ...modules,
                                ...extraModules
                            ], {
                                globalConfigClient,
                                globalConfigServer,
                                envs: ${h}
                            })
                        }
                     `:`document.addEventListener('DOMContentLoaded', async function() { 
                            window.RpgStandalone = await entryPoint(modules, {
                                globalConfigClient,
                                globalConfigServer,
                                envs: ${h}
                            }).start()
                        })`}
    
                  `:Se`${_}
                        window.RpgStandalone = (extraModules = []) => {
                            return entryPoint([
                                ...modules,
                                ...extraModules
                            ], {
                                globalConfigClient,
                                globalConfigServer,
                                envs: ${h}
                            }).start()
                        }
                    `}else if(i.endsWith("virtual-server.ts"))return Se`
                import { expressServer } from '@rpgjs/server/express'
                import { RpgWorld } from '@rpgjs/server'
                import * as url from 'url'
                import modules from './${Zt}'
                import globalConfig from './${Fr}'

                const __dirname = url.fileURLToPath(new URL('.', import.meta.url))

                expressServer(modules, {
                    globalConfig,
                    basePath: __dirname,
                    envs: ${h}
                }).then(({ server, game }) => {
                    if (import.meta['hot']) {
                        import.meta['hot'].on("vite:beforeFullReload", () => {
                            server.close();
                            RpgWorld.getPlayers().forEach(player => {
                                player.gameReload();
                            });
                            game.stop();
                        });
                    }
                })
              `;const y=Fo(i,u,a);if(y)return y;for(let _ of r){let m=rs(_),E=Ur(m);if(i.endsWith(m)||i.includes("virtual-"+E))return Mo(i,E,_,{...e,modulesCreated:n},t)}}}}const gl=Object.freeze(Object.defineProperty({__proto__:null,createConfigFiles:Fo,createModuleLoad:Mo,default:yl,formatVariableName:Ur,getAllFiles:zr,importString:Pt,loadClientFiles:ko,loadServerFiles:Do,loadSpriteSheet:Vr,searchFolderAndTransformToImportString:ze,transformPathIfModule:Io},Symbol.toStringTag,{value:"Module"}));function vl(e={}){const{side:t="client",mode:r="development",type:n="mmorpg"}=e;async function s(a,u,p){const c=["client!","server!","rpg!","mmorpg!","production!","development!"];for(const i of c)if(a.startsWith(i)){const d=a.replace(i,""),w=await this.resolve(d,u,{skipSelf:!0,...p});return{...w,id:w.id+`?${i.replace("!","")}`}}}async function o(a,u){let p=a;return r==="test"?{code:p,map:null}:((u.endsWith(t==="client"?"?server":"?client")&&n!=="rpg"||u.endsWith("?production")&&r!=="production"||u.endsWith("?development")&&r!=="development"||u.endsWith("?rpg")&&n!=="rpg"||u.endsWith("?mmorpg")&&n!=="mmorpg")&&(p="export default null;"),{code:p,map:null})}return{name:"transform-flag",resolveId:s,transform:o}}function Uo(e,t){return function(){return e.apply(t,arguments)}}const{toString:$l}=Object.prototype,{getPrototypeOf:ns}=Object,Lr=(e=>t=>{const r=$l.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),xe=e=>(e=e.toLowerCase(),t=>Lr(t)===e),qr=e=>t=>typeof t===e,{isArray:Ot}=Array,tr=qr("undefined");function _l(e){return e!==null&&!tr(e)&&e.constructor!==null&&!tr(e.constructor)&&Xe(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const zo=xe("ArrayBuffer");function wl(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&zo(e.buffer),t}const bl=qr("string"),Xe=qr("function"),Vo=qr("number"),ss=e=>e!==null&&typeof e=="object",El=e=>e===!0||e===!1,Hr=e=>{if(Lr(e)!=="object")return!1;const t=ns(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Sl=xe("Date"),Pl=xe("File"),Ol=xe("Blob"),Rl=xe("FileList"),Nl=e=>ss(e)&&Xe(e.pipe),Tl=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Xe(e.append)&&((t=Lr(e))==="formdata"||t==="object"&&Xe(e.toString)&&e.toString()==="[object FormData]"))},Cl=xe("URLSearchParams"),Al=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function rr(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,s;if(typeof e!="object"&&(e=[e]),Ot(e))for(n=0,s=e.length;n<s;n++)t.call(null,e[n],n,e);else{const o=r?Object.getOwnPropertyNames(e):Object.keys(e),a=o.length;let u;for(n=0;n<a;n++)u=o[n],t.call(null,e[u],u,e)}}function Lo(e,t){t=t.toLowerCase();const r=Object.keys(e);let n=r.length,s;for(;n-- >0;)if(s=r[n],t===s.toLowerCase())return s;return null}const qo=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),Ho=e=>!tr(e)&&e!==qo;function os(){const{caseless:e}=Ho(this)&&this||{},t={},r=(n,s)=>{const o=e&&Lo(t,s)||s;Hr(t[o])&&Hr(n)?t[o]=os(t[o],n):Hr(n)?t[o]=os({},n):Ot(n)?t[o]=n.slice():t[o]=n};for(let n=0,s=arguments.length;n<s;n++)arguments[n]&&rr(arguments[n],r);return t}const jl=(e,t,r,{allOwnKeys:n}={})=>(rr(t,(s,o)=>{r&&Xe(s)?e[o]=Uo(s,r):e[o]=s},{allOwnKeys:n}),e),Il=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Dl=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},kl=(e,t,r,n)=>{let s,o,a;const u={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),o=s.length;o-- >0;)a=s[o],(!n||n(a,e,t))&&!u[a]&&(t[a]=e[a],u[a]=!0);e=r!==!1&&ns(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},Ml=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},Fl=e=>{if(!e)return null;if(Ot(e))return e;let t=e.length;if(!Vo(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},Ul=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&ns(Uint8Array)),zl=(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let s;for(;(s=n.next())&&!s.done;){const o=s.value;t.call(e,o[0],o[1])}},Vl=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},Ll=xe("HTMLFormElement"),ql=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,s){return n.toUpperCase()+s}),Ko=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),Hl=xe("RegExp"),Bo=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};rr(r,(s,o)=>{t(s,o,e)!==!1&&(n[o]=s)}),Object.defineProperties(e,n)},Kl=e=>{Bo(e,(t,r)=>{if(Xe(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(Xe(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Bl=(e,t)=>{const r={},n=s=>{s.forEach(o=>{r[o]=!0})};return Ot(e)?n(e):n(String(e).split(t)),r},Gl=()=>{},Jl=(e,t)=>(e=+e,Number.isFinite(e)?e:t),as="abcdefghijklmnopqrstuvwxyz",Go="0123456789",Jo={DIGIT:Go,ALPHA:as,ALPHA_DIGIT:as+as.toUpperCase()+Go},Wl=(e=16,t=Jo.ALPHA_DIGIT)=>{let r="";const{length:n}=t;for(;e--;)r+=t[Math.random()*n|0];return r};function xl(e){return!!(e&&Xe(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const I={isArray:Ot,isArrayBuffer:zo,isBuffer:_l,isFormData:Tl,isArrayBufferView:wl,isString:bl,isNumber:Vo,isBoolean:El,isObject:ss,isPlainObject:Hr,isUndefined:tr,isDate:Sl,isFile:Pl,isBlob:Ol,isRegExp:Hl,isFunction:Xe,isStream:Nl,isURLSearchParams:Cl,isTypedArray:Ul,isFileList:Rl,forEach:rr,merge:os,extend:jl,trim:Al,stripBOM:Il,inherits:Dl,toFlatObject:kl,kindOf:Lr,kindOfTest:xe,endsWith:Ml,toArray:Fl,forEachEntry:zl,matchAll:Vl,isHTMLForm:Ll,hasOwnProperty:Ko,hasOwnProp:Ko,reduceDescriptors:Bo,freezeMethods:Kl,toObjectSet:Bl,toCamelCase:ql,noop:Gl,toFiniteNumber:Jl,findKey:Lo,global:qo,isContextDefined:Ho,ALPHABET:Jo,generateString:Wl,isSpecCompliantForm:xl,toJSONObject:e=>{const t=new Array(10),r=(n,s)=>{if(ss(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[s]=n;const o=Ot(n)?[]:{};return rr(n,(a,u)=>{const p=r(a,s+1);!tr(p)&&(o[u]=p)}),t[s]=void 0,o}}return n};return r(e,0)}};function re(e,t,r,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),s&&(this.response=s)}I.inherits(re,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:I.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Wo=re.prototype,xo={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{xo[e]={value:e}}),Object.defineProperties(re,xo),Object.defineProperty(Wo,"isAxiosError",{value:!0}),re.from=(e,t,r,n,s,o)=>{const a=Object.create(Wo);return I.toFlatObject(e,a,function(p){return p!==Error.prototype},u=>u!=="isAxiosError"),re.call(a,e.message,t,r,n,s),a.cause=e,a.name=e.name,o&&Object.assign(a,o),a};const Xl=null;function is(e){return I.isPlainObject(e)||I.isArray(e)}function Xo(e){return I.endsWith(e,"[]")?e.slice(0,-2):e}function Yo(e,t,r){return e?e.concat(t).map(function(s,o){return s=Xo(s),!r&&o?"["+s+"]":s}).join(r?".":""):t}function Yl(e){return I.isArray(e)&&!e.some(is)}const Ql=I.toFlatObject(I,{},null,function(t){return/^is[A-Z]/.test(t)});function Kr(e,t,r){if(!I.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=I.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,_){return!I.isUndefined(_[y])});const n=r.metaTokens,s=r.visitor||i,o=r.dots,a=r.indexes,p=(r.Blob||typeof Blob<"u"&&Blob)&&I.isSpecCompliantForm(t);if(!I.isFunction(s))throw new TypeError("visitor must be a function");function c(h){if(h===null)return"";if(I.isDate(h))return h.toISOString();if(!p&&I.isBlob(h))throw new re("Blob is not supported. Use a Buffer instead.");return I.isArrayBuffer(h)||I.isTypedArray(h)?p&&typeof Blob=="function"?new Blob([h]):Buffer.from(h):h}function i(h,y,_){let m=h;if(h&&!_&&typeof h=="object"){if(I.endsWith(y,"{}"))y=n?y:y.slice(0,-2),h=JSON.stringify(h);else if(I.isArray(h)&&Yl(h)||(I.isFileList(h)||I.endsWith(y,"[]"))&&(m=I.toArray(h)))return y=Xo(y),m.forEach(function(P,A){!(I.isUndefined(P)||P===null)&&t.append(a===!0?Yo([y],A,o):a===null?y:y+"[]",c(P))}),!1}return is(h)?!0:(t.append(Yo(_,y,o),c(h)),!1)}const d=[],w=Object.assign(Ql,{defaultVisitor:i,convertValue:c,isVisitable:is});function b(h,y){if(!I.isUndefined(h)){if(d.indexOf(h)!==-1)throw Error("Circular reference detected in "+y.join("."));d.push(h),I.forEach(h,function(m,E){(!(I.isUndefined(m)||m===null)&&s.call(t,m,I.isString(E)?E.trim():E,y,w))===!0&&b(m,y?y.concat(E):[E])}),d.pop()}}if(!I.isObject(e))throw new TypeError("data must be an object");return b(e),t}function Qo(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function cs(e,t){this._pairs=[],e&&Kr(e,this,t)}const Zo=cs.prototype;Zo.append=function(t,r){this._pairs.push([t,r])},Zo.toString=function(t){const r=t?function(n){return t.call(this,n,Qo)}:Qo;return this._pairs.map(function(s){return r(s[0])+"="+r(s[1])},"").join("&")};function Zl(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ea(e,t,r){if(!t)return e;const n=r&&r.encode||Zl,s=r&&r.serialize;let o;if(s?o=s(t,r):o=I.isURLSearchParams(t)?t.toString():new cs(t,r).toString(n),o){const a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class ed{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){I.forEach(this.handlers,function(n){n!==null&&t(n)})}}const ta=ed,ra={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},td=typeof URLSearchParams<"u"?URLSearchParams:cs,rd=typeof FormData<"u"?FormData:null,nd=typeof Blob<"u"?Blob:null,sd=(()=>{let e;return typeof navigator<"u"&&((e=navigator.product)==="ReactNative"||e==="NativeScript"||e==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),od=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Ve={isBrowser:!0,classes:{URLSearchParams:td,FormData:rd,Blob:nd},isStandardBrowserEnv:sd,isStandardBrowserWebWorkerEnv:od,protocols:["http","https","file","blob","url","data"]};function ad(e,t){return Kr(e,new Ve.classes.URLSearchParams,Object.assign({visitor:function(r,n,s,o){return Ve.isNode&&I.isBuffer(r)?(this.append(n,r.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}function id(e){return I.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function cd(e){const t={},r=Object.keys(e);let n;const s=r.length;let o;for(n=0;n<s;n++)o=r[n],t[o]=e[o];return t}function na(e){function t(r,n,s,o){let a=r[o++];const u=Number.isFinite(+a),p=o>=r.length;return a=!a&&I.isArray(s)?s.length:a,p?(I.hasOwnProp(s,a)?s[a]=[s[a],n]:s[a]=n,!u):((!s[a]||!I.isObject(s[a]))&&(s[a]=[]),t(r,n,s[a],o)&&I.isArray(s[a])&&(s[a]=cd(s[a])),!u)}if(I.isFormData(e)&&I.isFunction(e.entries)){const r={};return I.forEachEntry(e,(n,s)=>{t(id(n),s,r,0)}),r}return null}const ud={"Content-Type":void 0};function ld(e,t,r){if(I.isString(e))try{return(t||JSON.parse)(e),I.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const Br={transitional:ra,adapter:["xhr","http"],transformRequest:[function(t,r){const n=r.getContentType()||"",s=n.indexOf("application/json")>-1,o=I.isObject(t);if(o&&I.isHTMLForm(t)&&(t=new FormData(t)),I.isFormData(t))return s&&s?JSON.stringify(na(t)):t;if(I.isArrayBuffer(t)||I.isBuffer(t)||I.isStream(t)||I.isFile(t)||I.isBlob(t))return t;if(I.isArrayBufferView(t))return t.buffer;if(I.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let u;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return ad(t,this.formSerializer).toString();if((u=I.isFileList(t))||n.indexOf("multipart/form-data")>-1){const p=this.env&&this.env.FormData;return Kr(u?{"files[]":t}:t,p&&new p,this.formSerializer)}}return o||s?(r.setContentType("application/json",!1),ld(t)):t}],transformResponse:[function(t){const r=this.transitional||Br.transitional,n=r&&r.forcedJSONParsing,s=this.responseType==="json";if(t&&I.isString(t)&&(n&&!this.responseType||s)){const a=!(r&&r.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(u){if(a)throw u.name==="SyntaxError"?re.from(u,re.ERR_BAD_RESPONSE,this,null,this.response):u}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ve.classes.FormData,Blob:Ve.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};I.forEach(["delete","get","head"],function(t){Br.headers[t]={}}),I.forEach(["post","put","patch"],function(t){Br.headers[t]=I.merge(ud)});const us=Br,dd=I.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),fd=e=>{const t={};let r,n,s;return e&&e.split(`
`).forEach(function(a){s=a.indexOf(":"),r=a.substring(0,s).trim().toLowerCase(),n=a.substring(s+1).trim(),!(!r||t[r]&&dd[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},sa=Symbol("internals");function nr(e){return e&&String(e).trim().toLowerCase()}function Gr(e){return e===!1||e==null?e:I.isArray(e)?e.map(Gr):String(e)}function pd(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const hd=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function ls(e,t,r,n,s){if(I.isFunction(n))return n.call(this,t,r);if(s&&(t=r),!!I.isString(t)){if(I.isString(n))return t.indexOf(n)!==-1;if(I.isRegExp(n))return n.test(t)}}function md(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function yd(e,t){const r=I.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(s,o,a){return this[n].call(this,t,s,o,a)},configurable:!0})})}class Jr{constructor(t){t&&this.set(t)}set(t,r,n){const s=this;function o(u,p,c){const i=nr(p);if(!i)throw new Error("header name must be a non-empty string");const d=I.findKey(s,i);(!d||s[d]===void 0||c===!0||c===void 0&&s[d]!==!1)&&(s[d||p]=Gr(u))}const a=(u,p)=>I.forEach(u,(c,i)=>o(c,i,p));return I.isPlainObject(t)||t instanceof this.constructor?a(t,r):I.isString(t)&&(t=t.trim())&&!hd(t)?a(fd(t),r):t!=null&&o(r,t,n),this}get(t,r){if(t=nr(t),t){const n=I.findKey(this,t);if(n){const s=this[n];if(!r)return s;if(r===!0)return pd(s);if(I.isFunction(r))return r.call(this,s,n);if(I.isRegExp(r))return r.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=nr(t),t){const n=I.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||ls(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let s=!1;function o(a){if(a=nr(a),a){const u=I.findKey(n,a);u&&(!r||ls(n,n[u],u,r))&&(delete n[u],s=!0)}}return I.isArray(t)?t.forEach(o):o(t),s}clear(t){const r=Object.keys(this);let n=r.length,s=!1;for(;n--;){const o=r[n];(!t||ls(this,this[o],o,t,!0))&&(delete this[o],s=!0)}return s}normalize(t){const r=this,n={};return I.forEach(this,(s,o)=>{const a=I.findKey(n,o);if(a){r[a]=Gr(s),delete r[o];return}const u=t?md(o):String(o).trim();u!==o&&delete r[o],r[u]=Gr(s),n[u]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return I.forEach(this,(n,s)=>{n!=null&&n!==!1&&(r[s]=t&&I.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(s=>n.set(s)),n}static accessor(t){const n=(this[sa]=this[sa]={accessors:{}}).accessors,s=this.prototype;function o(a){const u=nr(a);n[u]||(yd(s,a),n[u]=!0)}return I.isArray(t)?t.forEach(o):o(t),this}}Jr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),I.freezeMethods(Jr.prototype),I.freezeMethods(Jr);const Ye=Jr;function ds(e,t){const r=this||us,n=t||r,s=Ye.from(n.headers);let o=n.data;return I.forEach(e,function(u){o=u.call(r,o,s.normalize(),t?t.status:void 0)}),s.normalize(),o}function oa(e){return!!(e&&e.__CANCEL__)}function sr(e,t,r){re.call(this,e??"canceled",re.ERR_CANCELED,t,r),this.name="CanceledError"}I.inherits(sr,re,{__CANCEL__:!0});function gd(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new re("Request failed with status code "+r.status,[re.ERR_BAD_REQUEST,re.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}const vd=Ve.isStandardBrowserEnv?function(){return{write:function(r,n,s,o,a,u){const p=[];p.push(r+"="+encodeURIComponent(n)),I.isNumber(s)&&p.push("expires="+new Date(s).toGMTString()),I.isString(o)&&p.push("path="+o),I.isString(a)&&p.push("domain="+a),u===!0&&p.push("secure"),document.cookie=p.join("; ")},read:function(r){const n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function $d(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function _d(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function aa(e,t){return e&&!$d(t)?_d(e,t):t}const wd=Ve.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");let n;function s(o){let a=o;return t&&(r.setAttribute("href",a),a=r.href),r.setAttribute("href",a),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=s(window.location.href),function(a){const u=I.isString(a)?s(a):a;return u.protocol===n.protocol&&u.host===n.host}}():function(){return function(){return!0}}();function bd(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Ed(e,t){e=e||10;const r=new Array(e),n=new Array(e);let s=0,o=0,a;return t=t!==void 0?t:1e3,function(p){const c=Date.now(),i=n[o];a||(a=c),r[s]=p,n[s]=c;let d=o,w=0;for(;d!==s;)w+=r[d++],d=d%e;if(s=(s+1)%e,s===o&&(o=(o+1)%e),c-a<t)return;const b=i&&c-i;return b?Math.round(w*1e3/b):void 0}}function ia(e,t){let r=0;const n=Ed(50,250);return s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,u=o-r,p=n(u),c=o<=a;r=o;const i={loaded:o,total:a,progress:a?o/a:void 0,bytes:u,rate:p||void 0,estimated:p&&a&&c?(a-o)/p:void 0,event:s};i[t?"download":"upload"]=!0,e(i)}}const Wr={http:Xl,xhr:typeof XMLHttpRequest<"u"&&function(e){return new Promise(function(r,n){let s=e.data;const o=Ye.from(e.headers).normalize(),a=e.responseType;let u;function p(){e.cancelToken&&e.cancelToken.unsubscribe(u),e.signal&&e.signal.removeEventListener("abort",u)}I.isFormData(s)&&(Ve.isStandardBrowserEnv||Ve.isStandardBrowserWebWorkerEnv)&&o.setContentType(!1);let c=new XMLHttpRequest;if(e.auth){const b=e.auth.username||"",h=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.set("Authorization","Basic "+btoa(b+":"+h))}const i=aa(e.baseURL,e.url);c.open(e.method.toUpperCase(),ea(i,e.params,e.paramsSerializer),!0),c.timeout=e.timeout;function d(){if(!c)return;const b=Ye.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders()),y={data:!a||a==="text"||a==="json"?c.responseText:c.response,status:c.status,statusText:c.statusText,headers:b,config:e,request:c};gd(function(m){r(m),p()},function(m){n(m),p()},y),c=null}if("onloadend"in c?c.onloadend=d:c.onreadystatechange=function(){!c||c.readyState!==4||c.status===0&&!(c.responseURL&&c.responseURL.indexOf("file:")===0)||setTimeout(d)},c.onabort=function(){c&&(n(new re("Request aborted",re.ECONNABORTED,e,c)),c=null)},c.onerror=function(){n(new re("Network Error",re.ERR_NETWORK,e,c)),c=null},c.ontimeout=function(){let h=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const y=e.transitional||ra;e.timeoutErrorMessage&&(h=e.timeoutErrorMessage),n(new re(h,y.clarifyTimeoutError?re.ETIMEDOUT:re.ECONNABORTED,e,c)),c=null},Ve.isStandardBrowserEnv){const b=(e.withCredentials||wd(i))&&e.xsrfCookieName&&vd.read(e.xsrfCookieName);b&&o.set(e.xsrfHeaderName,b)}s===void 0&&o.setContentType(null),"setRequestHeader"in c&&I.forEach(o.toJSON(),function(h,y){c.setRequestHeader(y,h)}),I.isUndefined(e.withCredentials)||(c.withCredentials=!!e.withCredentials),a&&a!=="json"&&(c.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&c.addEventListener("progress",ia(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&c.upload&&c.upload.addEventListener("progress",ia(e.onUploadProgress)),(e.cancelToken||e.signal)&&(u=b=>{c&&(n(!b||b.type?new sr(null,e,c):b),c.abort(),c=null)},e.cancelToken&&e.cancelToken.subscribe(u),e.signal&&(e.signal.aborted?u():e.signal.addEventListener("abort",u)));const w=bd(i);if(w&&Ve.protocols.indexOf(w)===-1){n(new re("Unsupported protocol "+w+":",re.ERR_BAD_REQUEST,e));return}c.send(s||null)})}};I.forEach(Wr,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Sd={getAdapter:e=>{e=I.isArray(e)?e:[e];const{length:t}=e;let r,n;for(let s=0;s<t&&(r=e[s],!(n=I.isString(r)?Wr[r.toLowerCase()]:r));s++);if(!n)throw n===!1?new re(`Adapter ${r} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(I.hasOwnProp(Wr,r)?`Adapter '${r}' is not available in the build`:`Unknown adapter '${r}'`);if(!I.isFunction(n))throw new TypeError("adapter is not a function");return n},adapters:Wr};function fs(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new sr(null,e)}function ca(e){return fs(e),e.headers=Ye.from(e.headers),e.data=ds.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Sd.getAdapter(e.adapter||us.adapter)(e).then(function(n){return fs(e),n.data=ds.call(e,e.transformResponse,n),n.headers=Ye.from(n.headers),n},function(n){return oa(n)||(fs(e),n&&n.response&&(n.response.data=ds.call(e,e.transformResponse,n.response),n.response.headers=Ye.from(n.response.headers))),Promise.reject(n)})}const ua=e=>e instanceof Ye?e.toJSON():e;function Rt(e,t){t=t||{};const r={};function n(c,i,d){return I.isPlainObject(c)&&I.isPlainObject(i)?I.merge.call({caseless:d},c,i):I.isPlainObject(i)?I.merge({},i):I.isArray(i)?i.slice():i}function s(c,i,d){if(I.isUndefined(i)){if(!I.isUndefined(c))return n(void 0,c,d)}else return n(c,i,d)}function o(c,i){if(!I.isUndefined(i))return n(void 0,i)}function a(c,i){if(I.isUndefined(i)){if(!I.isUndefined(c))return n(void 0,c)}else return n(void 0,i)}function u(c,i,d){if(d in t)return n(c,i);if(d in e)return n(void 0,c)}const p={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:u,headers:(c,i)=>s(ua(c),ua(i),!0)};return I.forEach(Object.keys(e).concat(Object.keys(t)),function(i){const d=p[i]||s,w=d(e[i],t[i],i);I.isUndefined(w)&&d!==u||(r[i]=w)}),r}const la="1.3.6",ps={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{ps[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const da={};ps.transitional=function(t,r,n){function s(o,a){return"[Axios v"+la+"] Transitional option '"+o+"'"+a+(n?". "+n:"")}return(o,a,u)=>{if(t===!1)throw new re(s(a," has been removed"+(r?" in "+r:"")),re.ERR_DEPRECATED);return r&&!da[a]&&(da[a]=!0,console.warn(s(a," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(o,a,u):!0}};function Pd(e,t,r){if(typeof e!="object")throw new re("options must be an object",re.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let s=n.length;for(;s-- >0;){const o=n[s],a=t[o];if(a){const u=e[o],p=u===void 0||a(u,o,e);if(p!==!0)throw new re("option "+o+" must be "+p,re.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new re("Unknown option "+o,re.ERR_BAD_OPTION)}}const hs={assertOptions:Pd,validators:ps},st=hs.validators;class xr{constructor(t){this.defaults=t,this.interceptors={request:new ta,response:new ta}}request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Rt(this.defaults,r);const{transitional:n,paramsSerializer:s,headers:o}=r;n!==void 0&&hs.assertOptions(n,{silentJSONParsing:st.transitional(st.boolean),forcedJSONParsing:st.transitional(st.boolean),clarifyTimeoutError:st.transitional(st.boolean)},!1),s!=null&&(I.isFunction(s)?r.paramsSerializer={serialize:s}:hs.assertOptions(s,{encode:st.function,serialize:st.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let a;a=o&&I.merge(o.common,o[r.method]),a&&I.forEach(["delete","get","head","post","put","patch","common"],h=>{delete o[h]}),r.headers=Ye.concat(a,o);const u=[];let p=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(r)===!1||(p=p&&y.synchronous,u.unshift(y.fulfilled,y.rejected))});const c=[];this.interceptors.response.forEach(function(y){c.push(y.fulfilled,y.rejected)});let i,d=0,w;if(!p){const h=[ca.bind(this),void 0];for(h.unshift.apply(h,u),h.push.apply(h,c),w=h.length,i=Promise.resolve(r);d<w;)i=i.then(h[d++],h[d++]);return i}w=u.length;let b=r;for(d=0;d<w;){const h=u[d++],y=u[d++];try{b=h(b)}catch(_){y.call(this,_);break}}try{i=ca.call(this,b)}catch(h){return Promise.reject(h)}for(d=0,w=c.length;d<w;)i=i.then(c[d++],c[d++]);return i}getUri(t){t=Rt(this.defaults,t);const r=aa(t.baseURL,t.url);return ea(r,t.params,t.paramsSerializer)}}I.forEach(["delete","get","head","options"],function(t){xr.prototype[t]=function(r,n){return this.request(Rt(n||{},{method:t,url:r,data:(n||{}).data}))}}),I.forEach(["post","put","patch"],function(t){function r(n){return function(o,a,u){return this.request(Rt(u||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:a}))}}xr.prototype[t]=r(),xr.prototype[t+"Form"]=r(!0)});const Xr=xr;class ms{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(o){r=o});const n=this;this.promise.then(s=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](s);n._listeners=null}),this.promise.then=s=>{let o;const a=new Promise(u=>{n.subscribe(u),o=u}).then(s);return a.cancel=function(){n.unsubscribe(o)},a},t(function(o,a,u){n.reason||(n.reason=new sr(o,a,u),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}static source(){let t;return{token:new ms(function(s){t=s}),cancel:t}}}const Od=ms;function Rd(e){return function(r){return e.apply(null,r)}}function Nd(e){return I.isObject(e)&&e.isAxiosError===!0}const ys={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ys).forEach(([e,t])=>{ys[t]=e});const Td=ys;function fa(e){const t=new Xr(e),r=Uo(Xr.prototype.request,t);return I.extend(r,Xr.prototype,t,{allOwnKeys:!0}),I.extend(r,t,null,{allOwnKeys:!0}),r.create=function(s){return fa(Rt(e,s))},r}const ge=fa(us);ge.Axios=Xr,ge.CanceledError=sr,ge.CancelToken=Od,ge.isCancel=oa,ge.VERSION=la,ge.toFormData=Kr,ge.AxiosError=re,ge.Cancel=ge.CanceledError,ge.all=function(t){return Promise.all(t)},ge.spread=Rd,ge.isAxiosError=Nd,ge.mergeConfig=Rt,ge.AxiosHeaders=Ye,ge.formToJSON=e=>na(I.isHTMLForm(e)?new FormData(e):e),ge.HttpStatusCode=Td,ge.default=ge;const pa=ge;pa.interceptors.request.use(function(e){return e.url+="?dev=1",e},function(e){return Promise.reject(e)});function Cd(e){function t(r,n){const s=Oo(n),o=ye.dirname(s);return r.basePath=o,r.id=s,r}return{name:"transform-world",transform(r,n){if(n.endsWith(".world")){const s=t(JSON.parse(r),n);return{code:`export default ${JSON.stringify(s)}`,map:null}}},configureServer(r){r.watcher.add(cl()),r.watcher.on("change",async n=>{if(n.endsWith("world")){sl(`File ${n} changed, updating world...`);const s=pe.readFileSync(n,"utf-8"),o=t(JSON.parse(s),n);pa.put(e+"/api/worlds",{worldId:o.id,data:o}).catch(al)}})}}}Ze.autoLoad=gl,Ze.flagTransform=vl,Ze.worldTransformPlugin=Cd,Object.defineProperty(Ze,Symbol.toStringTag,{value:"Module"})});
