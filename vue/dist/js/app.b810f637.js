(function(){"use strict";var e={5243:function(e,a,t){var s=t(5130),o=t(6768);const i={id:"app"};function r(e,a,t,s,r,n){const l=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)("div",i,[(0,o.bF)(l)])}var n={name:"App"},l=t(1241);const c=(0,l.A)(n,[["render",r]]);var d=c,u=t(1387);const g={id:"game-container"};function m(e,a,t,s,i,r){return(0,o.uX)(),(0,o.CE)("div",g,a[0]||(a[0]=[(0,o.Lk)("iframe",{src:"http://localhost:3000",frameborder:"0",width:"100%",height:"100%"},null,-1)]))}var h={name:"RpgGame",data(){return{gameData:null}},methods:{async saveGameToBackend(e){try{const a=await fetch("http://localhost/api/save-game",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.$store.state.userToken}`},body:JSON.stringify({game_data:e})}),t=await a.json();console.log("Juego guardado en el backend:",t)}catch(a){console.error("Error al guardar la partida:",a)}},async loadGameFromBackend(){try{const e=await fetch("http://localhost/api/load-game",{method:"GET",headers:{Authorization:`Bearer ${this.$store.state.userToken}`}}),a=await e.json();a.game_data?(this.gameData=a.game_data,console.log("Juego cargado desde el backend:",this.gameData)):console.log("No hay juego guardado")}catch(e){console.error("Error al cargar la partida:",e)}}}};const p=(0,l.A)(h,[["render",m],["__scopeId","data-v-43833d0b"]]);var v=p,k=t(4232);const f={class:"menu-container"},b={class:"nav-container"},L={class:"logo"},w={class:"icon"};function y(e,a,t,s,i,r){const n=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",f,[(0,o.Lk)("nav",b,[(0,o.Lk)("div",L,[(0,o.bF)(n,{to:"/",class:"logo-link"},{default:(0,o.k6)((()=>a[0]||(a[0]=[(0,o.eW)("🎮 GameHub")]))),_:1})]),(0,o.Lk)("ul",null,[(0,o.Lk)("li",null,[(0,o.bF)(n,{to:"/juego"},{default:(0,o.k6)((()=>a[1]||(a[1]=[(0,o.Lk)("i",{class:"icon"},"🎮",-1),(0,o.eW)(" Jugar ")]))),_:1})]),(0,o.Lk)("li",null,[(0,o.bF)(n,{to:"/comunidad"},{default:(0,o.k6)((()=>a[2]||(a[2]=[(0,o.Lk)("i",{class:"icon"},"👥",-1),(0,o.eW)(" Comunidad ")]))),_:1})]),(0,o.Lk)("li",null,[(0,o.bF)(n,{to:i.isAuthenticated?"/perfil":"/login"},{default:(0,o.k6)((()=>[(0,o.Lk)("i",w,(0,k.v_)(i.isAuthenticated?"👤":"🔑"),1),(0,o.eW)(" "+(0,k.v_)(i.isAuthenticated?"Perfil":"Login"),1)])),_:1},8,["to"])])])]),a[3]||(a[3]=(0,o.Lk)("div",{class:"title-section"},[(0,o.Lk)("h1",{class:"animated-title"},"Bienvenido a GameHub"),(0,o.Lk)("p",{class:"subtitle"},"¡Tu aventura comienza aquí!")],-1)),a[4]||(a[4]=(0,o.Lk)("div",{class:"video-section"},[(0,o.Lk)("h2",null,"Tráiler destacado"),(0,o.Lk)("iframe",{width:"100%",height:"400",src:"https://www.youtube.com/embed/dQw4w9WgXcQ",title:"Video destacado",frameborder:"0",allowfullscreen:""})],-1)),a[5]||(a[5]=(0,o.Fv)('<div class="reviews-section" data-v-7aaeb940><h2 data-v-7aaeb940>Reseñas de la comunidad</h2><div class="reviews-grid" data-v-7aaeb940><div class="review-card" data-v-7aaeb940><p class="review-text" data-v-7aaeb940>&quot;¡Un juego increíble, no puedo parar de jugar!&quot;</p><span class="review-author" data-v-7aaeb940>- Gamer123</span></div><div class="review-card" data-v-7aaeb940><p class="review-text" data-v-7aaeb940>&quot;Gráficos espectaculares y una historia envolvente.&quot;</p><span class="review-author" data-v-7aaeb940>- ProPlayer99</span></div></div></div><div class="guides-section" data-v-7aaeb940><h2 data-v-7aaeb940>Guías destacadas</h2><div class="guides-grid" data-v-7aaeb940><button class="guide-button" data-v-7aaeb940>Guía para principiantes</button><button class="guide-button" data-v-7aaeb940>Consejos avanzados</button><button class="guide-button" data-v-7aaeb940>Secretos del juego</button></div></div><footer class="footer-section" data-v-7aaeb940><div class="footer-content" data-v-7aaeb940><p data-v-7aaeb940>© 2025 GameHub - Todos los derechos reservados</p><div class="social-links" data-v-7aaeb940><a href="#" class="social-icon" data-v-7aaeb940>🐦</a><a href="#" class="social-icon" data-v-7aaeb940>📘</a><a href="#" class="social-icon" data-v-7aaeb940>📷</a></div></div></footer>',3))])}function C(){const e=localStorage.getItem("auth_token");return!!e}var A={name:"MenuView",data(){return{isAuthenticated:null!==localStorage.getItem("auth_token")}},created(){window.addEventListener("storage",this.updateAuthStatus),this.checkAuthStatus()},beforeUnmount(){window.removeEventListener("storage",this.updateAuthStatus)},methods:{async checkAuthStatus(){this.isAuthenticated=await C()},updateAuthStatus(){this.isAuthenticated=null!==localStorage.getItem("auth_token")}},mounted(){console.log("Vista de menú cargada correctamente")}};const E=(0,l.A)(A,[["render",y],["__scopeId","data-v-7aaeb940"]]);var _=E;const F={class:"login-container"},G={class:"nav-container"},S={class:"logo"},I={class:"login-content"},M={class:"form-group"},U={class:"form-group"},R={key:0,class:"success-message"},$={key:1,class:"error-message"},T=["data-client_id"];function W(e,a,t,i,r,n){const l=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",F,[(0,o.Lk)("nav",G,[(0,o.Lk)("div",S,[(0,o.bF)(l,{to:"/",class:"logo-link"},{default:(0,o.k6)((()=>a[3]||(a[3]=[(0,o.eW)("🎮 GameHub")]))),_:1})]),(0,o.Lk)("ul",null,[(0,o.Lk)("li",null,[(0,o.bF)(l,{to:"/"},{default:(0,o.k6)((()=>a[4]||(a[4]=[(0,o.Lk)("i",{class:"icon"},"🏠",-1),(0,o.eW)(" Volver al Inicio")]))),_:1})]),(0,o.Lk)("li",null,[(0,o.bF)(l,{to:"/register"},{default:(0,o.k6)((()=>a[5]||(a[5]=[(0,o.Lk)("i",{class:"icon"},"✍️",-1),(0,o.eW)(" Registrarse")]))),_:1})]),(0,o.Lk)("li",null,[(0,o.bF)(l,{to:"/about"},{default:(0,o.k6)((()=>a[6]||(a[6]=[(0,o.Lk)("i",{class:"icon"},"ℹ️",-1),(0,o.eW)(" Acerca de")]))),_:1})])])]),(0,o.Lk)("div",I,[a[10]||(a[10]=(0,o.Lk)("h2",{class:"animated-title"},"Iniciar Sesión",-1)),(0,o.Lk)("form",{onSubmit:a[2]||(a[2]=(0,s.D$)(((...e)=>n.handleLogin&&n.handleLogin(...e)),["prevent"])),class:"login-form"},[(0,o.Lk)("div",M,[a[7]||(a[7]=(0,o.Lk)("label",{for:"email"},"Email:",-1)),(0,o.bo)((0,o.Lk)("input",{type:"email",id:"email","onUpdate:modelValue":a[0]||(a[0]=e=>r.email=e),autocomplete:"username",required:""},null,512),[[s.Jo,r.email]])]),(0,o.Lk)("div",U,[a[8]||(a[8]=(0,o.Lk)("label",{for:"password"},"Contraseña:",-1)),(0,o.bo)((0,o.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":a[1]||(a[1]=e=>r.password=e),autocomplete:"current-password",required:""},null,512),[[s.Jo,r.password]])]),a[9]||(a[9]=(0,o.Lk)("button",{type:"submit"},"Iniciar Sesión",-1)),r.successMessage?((0,o.uX)(),(0,o.CE)("p",R,(0,k.v_)(r.successMessage),1)):(0,o.Q3)("",!0),r.errorMessage?((0,o.uX)(),(0,o.CE)("p",$,(0,k.v_)(r.errorMessage),1)):(0,o.Q3)("",!0)],32),(0,o.Lk)("div",{id:"g_id_onload","data-client_id":r.googleClientId,"data-callback":"handleGoogleSignIn","data-auto_prompt":"false"},null,8,T),a[11]||(a[11]=(0,o.Lk)("div",{class:"g_id_signin","data-type":"standard","data-size":"large","data-theme":"outline","data-text":"sign_in_with","data-shape":"rectangular","data-logo_alignment":"left"},null,-1))]),a[12]||(a[12]=(0,o.Fv)('<footer class="footer-section" data-v-802a35c2><div class="footer-content" data-v-802a35c2><p data-v-802a35c2>© 2025 GameHub - Todos los derechos reservados</p><div class="social-links" data-v-802a35c2><a href="#" class="social-icon" data-v-802a35c2>🐦</a><a href="#" class="social-icon" data-v-802a35c2>📘</a><a href="#" class="social-icon" data-v-802a35c2>📷</a></div></div></footer>',1))])}t(4114);var P=t(4373),X={data(){return{email:"",password:"",successMessage:"",errorMessage:"",googleClientId:"916302553196-267v6rqu5djak1t94f9ub0eeqv9oh8rn.apps.googleusercontent.com"}},async created(){P.A.defaults.baseURL="http://localhost:8000",P.A.defaults.withCredentials=!0;try{await P.A.get("/sanctum/csrf-cookie"),console.log("Token CSRF inicializado correctamente")}catch(a){console.error("Error al obtener el token CSRF:",a.message),this.errorMessage="No se pudo conectar con el servidor."}const e=document.createElement("script");e.src="https://accounts.google.com/gsi/client",e.async=!0,e.defer=!0,e.onload=()=>{console.log("Google Identity Services cargado")},e.onerror=()=>{console.error("Error al cargar Google Identity Services"),this.errorMessage="No se pudo cargar Google Sign-In."},document.body.appendChild(e),window.handleGoogleSignIn=this.handleGoogleSignIn},methods:{async handleLogin(){try{const e=await P.A.post("/api/login",{email:this.email,password:this.password});console.log("Respuesta del servidor:",e.data),e.data.token&&(localStorage.setItem("auth_token",e.data.token),this.successMessage="Inicio de sesión exitoso.",this.errorMessage="",setTimeout((()=>this.$router.push("/perfil")),1e3))}catch(e){console.error("Error en login:",e.response?e.response.data:e.message),this.errorMessage=e.response?.data?.message||"Error en inicio de sesión.",this.successMessage=""}},async handleGoogleSignIn(e){try{console.log("Iniciando sesión con Google...",e);const a=e.credential;console.log("ID Token:",a);const t=await P.A.post("/api/google-login",{id_token:a});console.log("Respuesta del servidor:",t.data),t.data.token&&(localStorage.setItem("auth_token",t.data.token),this.successMessage="Inicio de sesión con Google exitoso.",this.errorMessage="",setTimeout((()=>this.$router.push("/perfil")),1e3))}catch(a){console.error("Error al iniciar sesión con Google:",a),this.errorMessage="Error al iniciar sesión con Google.",this.successMessage=""}}}};const x=(0,l.A)(X,[["render",W],["__scopeId","data-v-802a35c2"]]);var N=x;const D={class:"profile-container"},j={class:"nav-container"},q={class:"logo"},V={class:"dropdown","data-testid":"comunidad-item"},z={class:"dropdown-menu"},B={key:0},Q={key:1},H={class:"user-header"},J={class:"user-info"},O={class:"user-details"},K={class:"username"},Y={class:"profile-content"},Z={class:"main-content"},ee={class:"tabs"},ae={class:"content-section"},te={class:"guides-section"},se={key:0,class:"loading-message"},oe={key:1,class:"error-message"},ie={key:2,class:"no-guides-placeholder"},re={key:3,class:"guides-grid"},ne={class:"guide-image"},le=["src"],ce={class:"guide-content"},de={class:"guide-description"},ue={class:"guide-meta"},ge={class:"guide-actions"},me=["onClick"],he=["onClick"],pe=["onClick"],ve={key:4,class:"success-message"},ke={class:"statistics-section"},fe={class:"status"},be={class:"stats"};function Le(e,a,t,s,i,r){const n=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",D,[(0,o.Lk)("nav",j,[(0,o.Lk)("div",q,[(0,o.bF)(n,{to:"/",class:"logo-link"},{default:(0,o.k6)((()=>a[7]||(a[7]=[(0,o.eW)("🎮 GameHub")]))),_:1})]),(0,o.Lk)("ul",null,[(0,o.Lk)("li",null,[(0,o.bF)(n,{to:"/juego"},{default:(0,o.k6)((()=>a[8]||(a[8]=[(0,o.Lk)("i",{class:"icon"},"🎮",-1),(0,o.eW)(" Jugar")]))),_:1})]),(0,o.Lk)("li",V,[(0,o.bF)(n,{to:"/comunidad",class:"dropdown-toggle"},{default:(0,o.k6)((()=>a[9]||(a[9]=[(0,o.Lk)("i",{class:"icon"},"👥",-1),(0,o.eW)(" Comunidad ")]))),_:1}),(0,o.Lk)("ul",z,[(0,o.Lk)("li",null,[(0,o.bF)(n,{to:"/comunidad/guias"},{default:(0,o.k6)((()=>a[10]||(a[10]=[(0,o.eW)("Guías")]))),_:1})]),(0,o.Lk)("li",null,[(0,o.bF)(n,{to:"/artwork"},{default:(0,o.k6)((()=>a[11]||(a[11]=[(0,o.eW)("Artwork")]))),_:1})]),(0,o.Lk)("li",null,[(0,o.bF)(n,{to:"/retransmisiones"},{default:(0,o.k6)((()=>a[12]||(a[12]=[(0,o.eW)("Retransmisiones")]))),_:1})]),(0,o.Lk)("li",null,[(0,o.bF)(n,{to:"/videos"},{default:(0,o.k6)((()=>a[13]||(a[13]=[(0,o.eW)("Videos")]))),_:1})])])]),(0,o.Lk)("li",null,[(0,o.bF)(n,{to:"/perfil",class:"active"},{default:(0,o.k6)((()=>a[14]||(a[14]=[(0,o.Lk)("i",{class:"icon"},"👤",-1),(0,o.eW)(" Perfil ")]))),_:1})]),i.isAuthenticated?((0,o.uX)(),(0,o.CE)("li",B,[(0,o.Lk)("button",{onClick:a[0]||(a[0]=(...e)=>r.logout&&r.logout(...e)),class:"logout-btn"},a[15]||(a[15]=[(0,o.Lk)("i",{class:"icon"},"🚪",-1),(0,o.eW)(" Logout ")]))])):((0,o.uX)(),(0,o.CE)("li",Q,[(0,o.bF)(n,{to:"/login"},{default:(0,o.k6)((()=>a[16]||(a[16]=[(0,o.Lk)("i",{class:"icon"},"🔑",-1),(0,o.eW)(" Login ")]))),_:1})]))])]),(0,o.Lk)("div",H,[a[17]||(a[17]=(0,o.Lk)("div",{class:"user-avatar"},[(0,o.Lk)("i",{class:"avatar-icon"},"👤")],-1)),(0,o.Lk)("div",J,[(0,o.Lk)("div",O,[(0,o.Lk)("h1",K,(0,k.v_)(i.user?.name||"Usuario"),1)]),(0,o.Lk)("button",{class:"edit-profile-btn",onClick:a[1]||(a[1]=(...e)=>r.editProfile&&r.editProfile(...e))}," Editar Perfil ")])]),(0,o.Lk)("div",Y,[(0,o.Lk)("div",Z,[(0,o.Lk)("div",ee,[(0,o.Lk)("button",{class:(0,k.C4)({"active-tab":"characters"===i.activeTab}),onClick:a[2]||(a[2]=e=>i.activeTab="characters")}," Personajes ",2),(0,o.Lk)("button",{class:(0,k.C4)({"active-tab":"matches"===i.activeTab}),onClick:a[3]||(a[3]=e=>i.activeTab="matches")}," Partidas ",2),(0,o.Lk)("button",{class:(0,k.C4)({"active-tab":"achievements"===i.activeTab}),onClick:a[4]||(a[4]=e=>i.activeTab="achievements")}," Logros ",2),(0,o.Lk)("button",{class:(0,k.C4)({"active-tab":"stats"===i.activeTab}),onClick:a[5]||(a[5]=e=>i.activeTab="stats")}," Estadísticas ",2)]),(0,o.Lk)("div",ae,[(0,o.Lk)("div",te,[a[21]||(a[21]=(0,o.Lk)("h2",null,"Mis Guías",-1)),i.loadingGuides?((0,o.uX)(),(0,o.CE)("div",se," Cargando guías... ")):i.errorMessage?((0,o.uX)(),(0,o.CE)("div",oe,(0,k.v_)(i.errorMessage),1)):0===i.userGuides.length?((0,o.uX)(),(0,o.CE)("div",ie,[a[19]||(a[19]=(0,o.Lk)("p",null,"No has creado ninguna guía todavía.",-1)),(0,o.bF)(n,{to:"/comunidad",class:"create-guide-link"},{default:(0,o.k6)((()=>a[18]||(a[18]=[(0,o.eW)(" Crear una Guía ")]))),_:1})])):((0,o.uX)(),(0,o.CE)("div",re,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.userGuides,(e=>((0,o.uX)(),(0,o.CE)("div",{class:"guide-card",key:e.id},[(0,o.Lk)("div",ne,[(0,o.Lk)("img",{src:e.image,alt:"Portada de la guía",onError:a[6]||(a[6]=(...e)=>r.handleImageError&&r.handleImageError(...e))},null,40,le)]),(0,o.Lk)("div",ce,[(0,o.Lk)("h3",null,"Título: "+(0,k.v_)(e.title),1),(0,o.Lk)("p",de,"Descripción: "+(0,k.v_)(r.truncateDescription(e.description,100)),1),(0,o.Lk)("p",ue,[a[20]||(a[20]=(0,o.Lk)("strong",null,"Categoría:",-1)),(0,o.eW)(" "+(0,k.v_)(e.category||"Sin categoría"),1)])]),(0,o.Lk)("div",ge,[(0,o.Lk)("button",{class:"action-btn view-btn",onClick:a=>r.viewGuide(e)},"Ver Guía",8,me),(0,o.Lk)("button",{class:"action-btn edit-btn",onClick:a=>r.editGuide(e)},"Editar",8,he),(0,o.Lk)("button",{class:"action-btn delete-btn",onClick:a=>r.deleteGuide(e.id)},"Eliminar",8,pe)])])))),128))])),i.successMessage?((0,o.uX)(),(0,o.CE)("p",ve,(0,k.v_)(i.successMessage),1)):(0,o.Q3)("",!0)]),a[22]||(a[22]=(0,o.Lk)("div",{class:"comments-section"},[(0,o.Lk)("h2",null,"Comentarios"),(0,o.Lk)("p",null,"Aquí se mostrarían los comentarios del usuario.")],-1))])]),(0,o.Lk)("div",ke,[a[30]||(a[30]=(0,o.Lk)("h3",null,"Estadísticas",-1)),(0,o.Lk)("p",fe,(0,k.v_)(i.user?.status||"En línea"),1),(0,o.Lk)("div",be,[(0,o.Lk)("p",null,[a[23]||(a[23]=(0,o.Lk)("strong",null,"Inventario:",-1)),(0,o.eW)(" "+(0,k.v_)(i.user?.inventory||0),1)]),(0,o.Lk)("p",null,[a[24]||(a[24]=(0,o.Lk)("strong",null,"Capturas:",-1)),(0,o.eW)(" "+(0,k.v_)(i.user?.screenshots||0),1)]),(0,o.Lk)("p",null,[a[25]||(a[25]=(0,o.Lk)("strong",null,"Videos:",-1)),(0,o.eW)(" "+(0,k.v_)(i.user?.videos||0),1)]),(0,o.Lk)("p",null,[a[26]||(a[26]=(0,o.Lk)("strong",null,"Artículos del Workshop:",-1)),(0,o.eW)(" "+(0,k.v_)(i.user?.workshopItems||0),1)]),(0,o.Lk)("p",null,[a[27]||(a[27]=(0,o.Lk)("strong",null,"Reseñas:",-1)),(0,o.eW)(" "+(0,k.v_)(i.user?.reviews||0),1)]),(0,o.Lk)("p",null,[a[28]||(a[28]=(0,o.Lk)("strong",null,"Guías:",-1)),(0,o.eW)(" "+(0,k.v_)(i.userGuides.length),1)]),(0,o.Lk)("p",null,[a[29]||(a[29]=(0,o.Lk)("strong",null,"Artwork:",-1)),(0,o.eW)(" "+(0,k.v_)(i.user?.artwork||0),1)])])])])])}var we={name:"ProfileView",data(){return{isAuthenticated:null!==localStorage.getItem("auth_token"),activeTab:"characters",user:null,guides:[],userGuides:[],loadingGuides:!1,errorMessage:"",successMessage:""}},created(){window.addEventListener("storage",this.updateAuthStatus),this.checkAuthStatus(),this.fetchUserData(),this.fetchGuides()},beforeUnmount(){window.removeEventListener("storage",this.updateAuthStatus)},methods:{async checkAuthStatus(){this.isAuthenticated=await C(),this.isAuthenticated||this.$router.push("/login")},updateAuthStatus(){this.isAuthenticated=null!==localStorage.getItem("auth_token")},async fetchUserData(){try{const e=localStorage.getItem("auth_token");if(!e)return;P.A.defaults.baseURL="http://localhost:8000",P.A.defaults.withCredentials=!0,P.A.defaults.headers.common["Authorization"]=`Bearer ${e}`;const a=await P.A.get("/api/user");this.user={name:a.data.name,email:a.data.email,location:a.data.location||"Ubicación desconocida",level:a.data.level||1,status:a.data.status||"En línea",badges:a.data.badges||0,games:a.data.games||0,inventory:a.data.inventory||0,screenshots:a.data.screenshots||0,videos:a.data.videos||0,workshopItems:a.data.workshopItems||0,reviews:a.data.reviews||0,artwork:a.data.artwork||0}}catch(e){this.errorMessage=e.response?e.response.data.message:e.message}},async fetchGuides(){this.loadingGuides=!0,this.errorMessage="";try{P.A.defaults.baseURL="http://localhost:8000",P.A.defaults.withCredentials=!0,await P.A.get("sanctum/csrf-cookie");const e=localStorage.getItem("auth_token"),a=await P.A.get("/api/guides",{headers:{Authorization:`Bearer ${e}`}});this.userGuides=a.data}catch(e){const a=e.response?`${e.response.status}: ${e.response.data.message||e.response.statusText}`:e.message;this.errorMessage=a,this.userGuides=[]}finally{this.loadingGuides=!1}},viewGuide(e){this.$router.push(`/comunidad/guia/${e.id}`)},editGuide(e){this.$router.push(`/comunidad?editGuide=${e.id}`)},async deleteGuide(e){if(confirm("¿Estás seguro de que quieres eliminar esta guía?"))try{P.A.defaults.baseURL="http://localhost:8000",P.A.defaults.withCredentials=!0,await P.A.get("sanctum/csrf-cookie");const a=localStorage.getItem("auth_token"),t=await P.A.delete(`/api/guides/${e}`,{headers:{Authorization:`Bearer ${a}`}});this.successMessage=t.data.message||"Guía eliminada con éxito",await this.fetchGuides()}catch(a){this.errorMessage=a.response?a.response.data.message:a.message}},handleImageError(e){e.target.style.display="none";const a=document.createElement("div");a.className="no-image-placeholder",a.textContent="Sin imagen",e.target.parentNode.appendChild(a)},truncateDescription(e,a){return e?e.length>a?e.substring(0,a)+"...":e:"Sin descripción"},editProfile(){this.$router.push("/perfil/editar")},async logout(){try{console.log("Starting logout process..."),P.A.defaults.baseURL="http://localhost:8000",P.A.defaults.withCredentials=!0,console.log("Fetching CSRF token..."),await P.A.get("sanctum/csrf-cookie"),console.log("CSRF token fetched successfully.");const e=localStorage.getItem("auth_token");if(!e)return console.log("No auth token found, proceeding with client-side logout."),localStorage.removeItem("auth_token"),this.isAuthenticated=!1,void this.$router.push("/login");console.log("Sending logout request to /api/logout...");const a=await P.A.post("/api/logout",{},{headers:{Authorization:`Bearer ${e}`}});console.log("Logout response:",a.data),localStorage.removeItem("auth_token"),this.isAuthenticated=!1,console.log("Redirecting to /login..."),this.$router.push("/login")}catch(e){console.error("Error during logout:",e),e.response?(console.error("Response data:",e.response.data),console.error("Response status:",e.response.status),this.errorMessage=`Error al cerrar sesión: ${e.response.data.message||e.response.statusText}`):this.errorMessage="Error al cerrar sesión. Por favor, intenta de nuevo.",localStorage.removeItem("auth_token"),this.isAuthenticated=!1,this.$router.push("/login")}}}};const ye=(0,l.A)(we,[["render",Le],["__scopeId","data-v-431461c8"]]);var Ce=ye;const Ae={class:"register-container"},Ee={class:"nav-container"},_e={class:"logo"},Fe={class:"register-content"},Ge={class:"form-group"},Se={class:"form-group"},Ie={class:"form-group"},Me={key:0,class:"success-message"},Ue={key:1,class:"error-message"};function Re(e,a,t,i,r,n){const l=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",Ae,[(0,o.Lk)("nav",Ee,[(0,o.Lk)("div",_e,[(0,o.bF)(l,{to:"/",class:"logo-link"},{default:(0,o.k6)((()=>a[4]||(a[4]=[(0,o.eW)("🎮 GameHub")]))),_:1})]),(0,o.Lk)("ul",null,[(0,o.Lk)("li",null,[(0,o.bF)(l,{to:"/"},{default:(0,o.k6)((()=>a[5]||(a[5]=[(0,o.Lk)("i",{class:"icon"},"🏠",-1),(0,o.eW)(" Volver al Inicio")]))),_:1})]),(0,o.Lk)("li",null,[(0,o.bF)(l,{to:"/login"},{default:(0,o.k6)((()=>a[6]||(a[6]=[(0,o.Lk)("i",{class:"icon"},"🔑",-1),(0,o.eW)(" Iniciar Sesión")]))),_:1})]),(0,o.Lk)("li",null,[(0,o.bF)(l,{to:"/about"},{default:(0,o.k6)((()=>a[7]||(a[7]=[(0,o.Lk)("i",{class:"icon"},"ℹ️",-1),(0,o.eW)(" Acerca de")]))),_:1})])])]),(0,o.Lk)("div",Fe,[a[12]||(a[12]=(0,o.Lk)("h2",{class:"animated-title"},"Registro",-1)),(0,o.Lk)("form",{onSubmit:a[3]||(a[3]=(0,s.D$)(((...e)=>n.handleRegister&&n.handleRegister(...e)),["prevent"])),class:"register-form"},[(0,o.Lk)("div",Ge,[a[8]||(a[8]=(0,o.Lk)("label",{for:"name"},"Nombre:",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",id:"name","onUpdate:modelValue":a[0]||(a[0]=e=>r.name=e),required:""},null,512),[[s.Jo,r.name]])]),(0,o.Lk)("div",Se,[a[9]||(a[9]=(0,o.Lk)("label",{for:"email"},"Email:",-1)),(0,o.bo)((0,o.Lk)("input",{type:"email",id:"email","onUpdate:modelValue":a[1]||(a[1]=e=>r.email=e),autocomplete:"username",required:""},null,512),[[s.Jo,r.email]])]),(0,o.Lk)("div",Ie,[a[10]||(a[10]=(0,o.Lk)("label",{for:"password"},"Contraseña:",-1)),(0,o.bo)((0,o.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":a[2]||(a[2]=e=>r.password=e),autocomplete:"new-password",required:""},null,512),[[s.Jo,r.password]])]),a[11]||(a[11]=(0,o.Lk)("button",{type:"submit"},"Registrarse",-1)),r.successMessage?((0,o.uX)(),(0,o.CE)("p",Me,(0,k.v_)(r.successMessage),1)):(0,o.Q3)("",!0),r.errorMessage?((0,o.uX)(),(0,o.CE)("p",Ue,(0,k.v_)(r.errorMessage),1)):(0,o.Q3)("",!0)],32)]),a[13]||(a[13]=(0,o.Fv)('<footer class="footer-section" data-v-47875ca8><div class="footer-content" data-v-47875ca8><p data-v-47875ca8>© 2025 GameHub - Todos los derechos reservados</p><div class="social-links" data-v-47875ca8><a href="#" class="social-icon" data-v-47875ca8>🐦</a><a href="#" class="social-icon" data-v-47875ca8>📘</a><a href="#" class="social-icon" data-v-47875ca8>📷</a></div></div></footer>',1))])}var $e={async created(){try{await P.A.get("http://localhost:8000/api/sanctum/csrf-cookie"),console.log("Token CSRF inicializado correctamente")}catch(e){console.error("Error al obtener el token CSRF:",e)}},data(){return{name:"",email:"",password:"",successMessage:"",errorMessage:""}},methods:{async handleRegister(){try{console.log("Enviando datos al registro:",{name:this.name,email:this.email,password:this.password});const e=await P.A.post("http://localhost:8000/api/register",{name:this.name,email:this.email,password:this.password},{withCredentials:!0});console.log("Respuesta del servidor:",e.data),e.data&&e.data.message&&(this.successMessage="Registro exitoso. Ahora puedes iniciar sesión.",this.errorMessage="",setTimeout((()=>{this.$router.push("/login")}),2e3))}catch(e){console.error("Error en registro:",e.response?e.response.data:e.message),this.errorMessage=e.response?.data?.message||"Error en registro: No se pudo conectar con el servidor.",this.successMessage=""}}}};const Te=(0,l.A)($e,[["render",Re],["__scopeId","data-v-47875ca8"]]);var We=Te;const Pe={class:"community-container"},Xe={class:"nav-container"},xe={class:"logo"},Ne={class:"dropdown","data-testid":"comunidad-item"},De={class:"dropdown-menu"},je={class:"icon"},qe={class:"main-content"},Ve={class:"content-section"},ze={key:0,class:"guides-content"},Be={class:"guides-header"},Qe={key:0,class:"loading-message"},He={key:1,class:"error-message"},Je={key:2,class:"no-guides-placeholder"},Oe={key:3,class:"guides-list"},Ke=["onClick"],Ye={class:"guide-card-image"},Ze=["src"],ea={key:1,class:"no-image-placeholder"},aa={class:"guide-card-content"},ta={class:"guide-description"},sa={class:"guide-meta"},oa={class:"guide-meta"},ia=["onClick"],ra=["onClick"],na={key:1};function la(e,a,t,i,r,n){const l=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",Pe,[(0,o.Lk)("nav",Xe,[(0,o.Lk)("div",xe,[(0,o.bF)(l,{to:"/",class:"logo-link"},{default:(0,o.k6)((()=>a[2]||(a[2]=[(0,o.eW)("🎮 GameHub")]))),_:1})]),(0,o.Lk)("ul",null,[(0,o.Lk)("li",null,[(0,o.bF)(l,{to:"/juego"},{default:(0,o.k6)((()=>a[3]||(a[3]=[(0,o.Lk)("i",{class:"icon"},"🎮",-1),(0,o.eW)(" Jugar")]))),_:1})]),(0,o.Lk)("li",Ne,[(0,o.bF)(l,{to:"/comunidad",class:"dropdown-toggle"},{default:(0,o.k6)((()=>a[4]||(a[4]=[(0,o.Lk)("i",{class:"icon"},"👥",-1),(0,o.eW)(" Comunidad ")]))),_:1}),(0,o.Lk)("ul",De,[(0,o.Lk)("li",null,[(0,o.bF)(l,{to:"/capturas"},{default:(0,o.k6)((()=>a[5]||(a[5]=[(0,o.eW)("Capturas")]))),_:1})]),(0,o.Lk)("li",null,[(0,o.bF)(l,{to:"/comunidad/guias"},{default:(0,o.k6)((()=>a[6]||(a[6]=[(0,o.eW)("Guias")]))),_:1})]),(0,o.Lk)("li",null,[(0,o.bF)(l,{to:"/retransmisiones"},{default:(0,o.k6)((()=>a[7]||(a[7]=[(0,o.eW)("Retransmisiones")]))),_:1})]),(0,o.Lk)("li",null,[(0,o.bF)(l,{to:"/videos"},{default:(0,o.k6)((()=>a[8]||(a[8]=[(0,o.eW)("Videos")]))),_:1})])])]),(0,o.Lk)("li",null,[(0,o.bF)(l,{to:r.isAuthenticated?"/perfil":"/login"},{default:(0,o.k6)((()=>[(0,o.Lk)("i",je,(0,k.v_)(r.isAuthenticated?"👤":"🔑"),1),(0,o.eW)(" "+(0,k.v_)(r.isAuthenticated?"Perfil":"Login"),1)])),_:1},8,["to"])])])]),(0,o.Lk)("div",qe,[(0,o.Lk)("div",Ve,["/comunidad/guias"===e.$route.path?((0,o.uX)(),(0,o.CE)("div",ze,[(0,o.Lk)("div",Be,[a[10]||(a[10]=(0,o.Lk)("h2",null,"Guías",-1)),a[11]||(a[11]=(0,o.Lk)("p",null,"Explora guías creadas por la comunidad para mejorar tu experiencia de juego.",-1)),r.isAuthenticated?((0,o.uX)(),(0,o.Wv)(l,{key:0,to:"/comunidad/crear-guia",class:"create-guide-btn"},{default:(0,o.k6)((()=>a[9]||(a[9]=[(0,o.Lk)("i",{class:"icon"},"✍️",-1),(0,o.eW)(" Crear Nueva Guía ")]))),_:1})):(0,o.Q3)("",!0)]),r.loadingGuides?((0,o.uX)(),(0,o.CE)("div",Qe," Cargando guías... ")):r.errorMessage?((0,o.uX)(),(0,o.CE)("div",He,(0,k.v_)(r.errorMessage),1)):0===r.guides.length?((0,o.uX)(),(0,o.CE)("div",Je,a[12]||(a[12]=[(0,o.Lk)("div",{class:"placeholder-content"},[(0,o.Lk)("i",{class:"placeholder-icon"},"📖"),(0,o.Lk)("p",null,"No hay guías disponibles todavía."),(0,o.Lk)("p",null,"¡Sé el primero en compartir tus conocimientos con la comunidad!")],-1)]))):((0,o.uX)(),(0,o.CE)("div",Oe,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.guides,(e=>((0,o.uX)(),(0,o.CE)("div",{class:"guide-card",key:e.id,onClick:a=>n.viewGuide(e)},[(0,o.Lk)("div",Ye,[e.image?((0,o.uX)(),(0,o.CE)("img",{key:0,src:e.image,alt:"Portada de la guía",onError:a[0]||(a[0]=(...e)=>n.handleImageError&&n.handleImageError(...e))},null,40,Ze)):((0,o.uX)(),(0,o.CE)("div",ea,"Sin imagen"))]),(0,o.Lk)("div",aa,[(0,o.Lk)("h3",null,"Título: "+(0,k.v_)(e.title),1),(0,o.Lk)("p",ta,"Descripción: "+(0,k.v_)(e.description||"Sin descripción"),1),(0,o.Lk)("p",sa,[a[13]||(a[13]=(0,o.Lk)("strong",null,"Categoría:",-1)),(0,o.eW)(" "+(0,k.v_)(e.category||"Sin categoría"),1)]),(0,o.Lk)("p",oa,[a[14]||(a[14]=(0,o.Lk)("strong",null,"Creado por:",-1)),(0,o.eW)(" "+(0,k.v_)(e.user?.name||"Anónimo"),1)])]),(0,o.Lk)("div",{class:"guide-actions",onClick:a[1]||(a[1]=(0,s.D$)((()=>{}),["stop"]))},[e.user?.name===r.user?.name?((0,o.uX)(),(0,o.CE)("button",{key:0,class:"action-btn edit-btn",onClick:a=>n.editGuide(e)},"Editar",8,ia)):(0,o.Q3)("",!0),e.user?.name===r.user?.name?((0,o.uX)(),(0,o.CE)("button",{key:1,class:"action-btn delete-btn",onClick:a=>n.deleteGuide(e.id)},"Eliminar",8,ra)):(0,o.Q3)("",!0)])],8,Ke)))),128))]))])):((0,o.uX)(),(0,o.CE)("div",na,a[15]||(a[15]=[(0,o.Lk)("h2",null,"Comunidad",-1),(0,o.Lk)("p",null,"Bienvenido a la comunidad de GameHub. Explora guías, artwork, retransmisiones y videos.",-1)])))])]),a[16]||(a[16]=(0,o.Fv)('<footer class="footer-section" data-v-273bb8a0><div class="footer-content" data-v-273bb8a0><p data-v-273bb8a0>© 2025 GameHub - Todos los derechos reservados</p><div class="social-links" data-v-273bb8a0><a href="#" class="social-icon" data-v-273bb8a0>🐦</a><a href="#" class="social-icon" data-v-273bb8a0>📘</a><a href="#" class="social-icon" data-v-273bb8a0>📷</a></div></div></footer>',1))])}var ca={name:"CommunityView",data(){return{isAuthenticated:null!==localStorage.getItem("auth_token"),guides:[],loadingGuides:!1,errorMessage:"",successMessage:"",user:null}},created(){window.addEventListener("storage",this.updateAuthStatus),this.checkAuthStatus(),this.fetchUserData(),"/comunidad/guias"===this.$route.path&&this.fetchGuides()},watch:{$route(e){"/comunidad/guias"===e.path&&this.fetchGuides()}},beforeUnmount(){window.removeEventListener("storage",this.updateAuthStatus)},methods:{async checkAuthStatus(){this.isAuthenticated=await C()},updateAuthStatus(){this.isAuthenticated=null!==localStorage.getItem("auth_token")},async fetchUserData(){try{const e=localStorage.getItem("auth_token");if(!e)return;P.A.defaults.baseURL="http://localhost:8000",P.A.defaults.withCredentials=!0,P.A.defaults.headers.common["Authorization"]=`Bearer ${e}`;const a=await P.A.get("/api/user");this.user={name:a.data.name,email:a.data.email}}catch(e){this.errorMessage=e.response?e.response.data.message:e.message}},async fetchGuides(){this.loadingGuides=!0,this.errorMessage="";try{P.A.defaults.baseURL="http://localhost:8000",P.A.defaults.withCredentials=!0,await P.A.get("sanctum/csrf-cookie");const e=await P.A.get("/api/guides/all");this.guides=e.data}catch(e){const a=e.response?`${e.response.status}: ${e.response.data.message||e.response.statusText}`:e.message;this.errorMessage=a,this.guides=[]}finally{this.loadingGuides=!1}},handleImageError(e){e.target.style.display="none";const a=document.createElement("div");a.className="no-image-placeholder",a.textContent="Sin imagen",e.target.parentNode.appendChild(a)},editGuide(e){this.$router.push(`/comunidad/crear-guia?editGuide=${e.id}`)},async deleteGuide(e){if(confirm("¿Estás seguro de que quieres eliminar esta guía?"))try{const a=await P.A.delete(`/api/guides/${e}`);this.successMessage=a.data.message,await this.fetchGuides()}catch(a){this.errorMessage=a.response?a.response.data.message:a.message}},viewGuide(e){this.$router.push(`/comunidad/guia/${e.id}`)}}};const da=(0,l.A)(ca,[["render",la],["__scopeId","data-v-273bb8a0"]]);var ua=da;const ga={class:"edit-profile-container"},ma={class:"nav-container"},ha={class:"logo"},pa={class:"edit-profile-content"},va={class:"edit-profile-section"},ka={class:"form-group"},fa={class:"form-group"},ba={class:"form-group"},La={key:0,class:"success-message"},wa={key:1,class:"error-message"},ya={key:1},Ca={class:"loading-message"},Aa={class:"back-link"};function Ea(e,a,t,i,r,n){const l=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",ga,[(0,o.Lk)("nav",ma,[(0,o.Lk)("div",ha,[(0,o.bF)(l,{to:"/",class:"logo-link"},{default:(0,o.k6)((()=>a[4]||(a[4]=[(0,o.eW)("🎮 GameHub")]))),_:1})]),(0,o.Lk)("ul",null,[(0,o.Lk)("li",null,[(0,o.bF)(l,{to:"/juego"},{default:(0,o.k6)((()=>a[5]||(a[5]=[(0,o.Lk)("i",{class:"icon"},"🎮",-1),(0,o.eW)(" Jugar")]))),_:1})]),(0,o.Lk)("li",null,[(0,o.bF)(l,{to:"/comunidad"},{default:(0,o.k6)((()=>a[6]||(a[6]=[(0,o.Lk)("i",{class:"icon"},"👥",-1),(0,o.eW)(" Comunidad")]))),_:1})]),(0,o.Lk)("li",null,[(0,o.bF)(l,{to:"/perfil"},{default:(0,o.k6)((()=>a[7]||(a[7]=[(0,o.Lk)("i",{class:"icon"},"👤",-1),(0,o.eW)(" Perfil")]))),_:1})])])]),(0,o.Lk)("div",pa,[a[15]||(a[15]=(0,o.Fv)('<aside class="sidebar" data-v-5210cd78><h3 class="sidebar-title" data-v-5210cd78>Editar Perfil</h3><ul class="sidebar-nav" data-v-5210cd78><li data-v-5210cd78><a href="#" class="active" data-v-5210cd78>General</a></li><li data-v-5210cd78><a href="#" data-v-5210cd78>Avatar</a></li><li data-v-5210cd78><a href="#" data-v-5210cd78>Tema</a></li></ul></aside>',1)),(0,o.Lk)("div",va,[a[13]||(a[13]=(0,o.Lk)("h2",{class:"section-title"},"General",-1)),a[14]||(a[14]=(0,o.Lk)("p",{class:"section-description"}," Configura el nombre y los detalles de tu perfil. Proporcionar información adicional, como tu nombre real, puede ayudar a tus amigos a encontrarte en la comunidad de GameHub. ",-1)),r.user?((0,o.uX)(),(0,o.CE)("form",{key:0,onSubmit:a[3]||(a[3]=(0,s.D$)(((...e)=>n.updateProfile&&n.updateProfile(...e)),["prevent"]))},[(0,o.Lk)("div",ka,[a[8]||(a[8]=(0,o.Lk)("label",{for:"name"},"Nombre de perfil",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",id:"name","onUpdate:modelValue":a[0]||(a[0]=e=>r.editableUser.name=e),placeholder:"Introduce tu nuevo nombre",required:""},null,512),[[s.Jo,r.editableUser.name]])]),(0,o.Lk)("div",fa,[a[9]||(a[9]=(0,o.Lk)("label",{for:"email"},"Correo",-1)),(0,o.bo)((0,o.Lk)("input",{type:"email",id:"email","onUpdate:modelValue":a[1]||(a[1]=e=>r.editableUser.email=e),placeholder:"Introduce tu nuevo correo",required:""},null,512),[[s.Jo,r.editableUser.email]])]),(0,o.Lk)("div",ba,[a[10]||(a[10]=(0,o.Lk)("label",{for:"password"},"Contraseña (dejar en blanco si no deseas cambiarla)",-1)),(0,o.bo)((0,o.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":a[2]||(a[2]=e=>r.editableUser.password=e),placeholder:"Introduce tu nueva contraseña"},null,512),[[s.Jo,r.editableUser.password]])]),a[11]||(a[11]=(0,o.Lk)("button",{type:"submit",class:"save-btn"},"Guardar Cambios",-1)),r.successMessage?((0,o.uX)(),(0,o.CE)("p",La,(0,k.v_)(r.successMessage),1)):(0,o.Q3)("",!0),r.errorMessage?((0,o.uX)(),(0,o.CE)("p",wa,(0,k.v_)(r.errorMessage),1)):(0,o.Q3)("",!0)],32)):((0,o.uX)(),(0,o.CE)("div",ya,[(0,o.Lk)("p",Ca,(0,k.v_)(r.error?"Error: "+r.error:"Cargando datos..."),1)])),(0,o.Lk)("div",Aa,[(0,o.bF)(l,{to:"/perfil"},{default:(0,o.k6)((()=>a[12]||(a[12]=[(0,o.eW)("Regresar a tu perfil")]))),_:1})])])])])}var _a={name:"EditProfileView",data(){return{user:null,editableUser:{name:"",email:"",password:"",realName:"",customUrl:""},error:null,successMessage:"",errorMessage:""}},computed:{profileUrl(){return this.editableUser.customUrl?`https://gamehub.com/profiles/${this.editableUser.customUrl}`:"https://gamehub.com/profiles/[tu-url-personalizada]"}},async created(){await this.fetchUserData()},methods:{async fetchUserData(){try{const e=localStorage.getItem("auth_token");if(!e)return this.error="No estás autenticado.",void this.$router.push("/login");const a=await P.A.get("http://localhost:8000/api/user",{headers:{Authorization:`Bearer ${e}`},withCredentials:!0});this.user=a.data,this.editableUser={name:this.user.name,email:this.user.email,password:"",realName:this.user.realName||"",customUrl:this.user.customUrl||""},this.error=null}catch(e){const a=e.response?`${e.response.status}: ${e.response.data.message||e.response.statusText}`:e.message;console.error("Error al cargar datos:",e.response?e.response:e),this.error=a,setTimeout((()=>this.$router.push("/login")),3e3)}},async updateProfile(){try{const e=localStorage.getItem("auth_token"),a={name:this.editableUser.name,email:this.editableUser.email,realName:this.editableUser.realName,customUrl:this.editableUser.customUrl};this.editableUser.password&&(a.password=this.editableUser.password);const t=await P.A.put("http://localhost:8000/api/user",a,{headers:{Authorization:`Bearer ${e}`},withCredentials:!0});console.log("Perfil actualizado:",t.data),this.successMessage="Perfil actualizado con éxito.",this.errorMessage="",setTimeout((()=>{this.successMessage="",this.$router.push("/perfil")}),2e3)}catch(e){const a=e.response?e.response.data.message||e.response.statusText:e.message;console.error("Error al actualizar perfil:",e.response?e.response:e),this.errorMessage=a,this.successMessage="",setTimeout((()=>this.errorMessage=""),3e3)}}}};const Fa=(0,l.A)(_a,[["render",Ea],["__scopeId","data-v-5210cd78"]]);var Ga=Fa;const Sa={class:"guide-detail-container"},Ia={class:"nav-container"},Ma={class:"logo"},Ua={"data-testid":"volver-item"},Ra={class:"dropdown","data-testid":"comunidad-item"},$a={class:"dropdown-menu"},Ta={class:"icon"},Wa={class:"guide-content-wrapper"},Pa={key:0,class:"loading-message"},Xa={key:1,class:"error-message"},xa={key:2,class:"guide-content"},Na={class:"guide-header"},Da={class:"guide-image-container"},ja=["src"],qa={key:1,class:"no-image-placeholder"},Va={class:"guide-title-container"},za={class:"title-and-actions"},Ba={class:"guide-title"},Qa={key:0,class:"header-actions"},Ha={class:"guide-rating"},Ja={class:"stars"},Oa={class:"rating-text"},Ka={class:"guide-author"},Ya={class:"guide-actions"},Za={class:"icon"},et={class:"guide-main-content"},at={class:"guide-body"},tt={class:"guide-content-text"},st={class:"guide-meta"},ot={class:"meta-item"},it={class:"meta-value"},rt={class:"meta-item"},nt={class:"meta-value"},lt={class:"meta-item"},ct={class:"meta-value"},dt={class:"meta-item"},ut={class:"meta-value"};function gt(e,a,t,s,i,r){const n=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",Sa,[(0,o.Lk)("nav",Ia,[(0,o.Lk)("div",Ma,[(0,o.bF)(n,{to:"/",class:"logo-link"},{default:(0,o.k6)((()=>a[5]||(a[5]=[(0,o.eW)("🎮 GameHub")]))),_:1})]),(0,o.Lk)("ul",null,[(0,o.Lk)("li",Ua,[(0,o.bF)(n,{to:"/comunidad/guias"},{default:(0,o.k6)((()=>a[6]||(a[6]=[(0,o.Lk)("i",{class:"icon"},"📖",-1),(0,o.eW)(" Volver a las guías ")]))),_:1})]),(0,o.Lk)("li",Ra,[(0,o.bF)(n,{to:"/comunidad",class:"dropdown-toggle"},{default:(0,o.k6)((()=>a[7]||(a[7]=[(0,o.Lk)("i",{class:"icon"},"👥",-1),(0,o.eW)(" Comunidad ")]))),_:1}),(0,o.Lk)("ul",$a,[(0,o.Lk)("li",null,[(0,o.bF)(n,{to:"/capturas"},{default:(0,o.k6)((()=>a[8]||(a[8]=[(0,o.eW)("Capturas")]))),_:1})]),(0,o.Lk)("li",null,[(0,o.bF)(n,{to:"/artwork"},{default:(0,o.k6)((()=>a[9]||(a[9]=[(0,o.eW)("Artwork")]))),_:1})]),(0,o.Lk)("li",null,[(0,o.bF)(n,{to:"/retransmisiones"},{default:(0,o.k6)((()=>a[10]||(a[10]=[(0,o.eW)("Retransmisiones")]))),_:1})]),(0,o.Lk)("li",null,[(0,o.bF)(n,{to:"/videos"},{default:(0,o.k6)((()=>a[11]||(a[11]=[(0,o.eW)("Videos")]))),_:1})])])]),(0,o.Lk)("li",null,[(0,o.bF)(n,{to:i.isAuthenticated?"/perfil":"/login"},{default:(0,o.k6)((()=>[(0,o.Lk)("i",Ta,(0,k.v_)(i.isAuthenticated?"👤":"🔑"),1),(0,o.eW)(" "+(0,k.v_)(i.isAuthenticated?"Perfil":"Login"),1)])),_:1},8,["to"])])])]),(0,o.Lk)("div",Wa,[i.loading?((0,o.uX)(),(0,o.CE)("div",Pa,"Cargando guía...")):i.errorMessage?((0,o.uX)(),(0,o.CE)("div",Xa,(0,k.v_)(i.errorMessage),1)):i.guide?((0,o.uX)(),(0,o.CE)("div",xa,[(0,o.Lk)("div",Na,[(0,o.Lk)("div",Da,[i.guide.image?((0,o.uX)(),(0,o.CE)("img",{key:0,src:i.guide.image,alt:"Portada de la guía",onError:a[0]||(a[0]=(...e)=>r.handleImageError&&r.handleImageError(...e))},null,40,ja)):((0,o.uX)(),(0,o.CE)("div",qa,"Sin imagen"))]),(0,o.Lk)("div",Va,[(0,o.Lk)("div",za,[(0,o.Lk)("h1",Ba,(0,k.v_)(i.guide.title),1),i.isAuthenticated&&i.guide.createdBy===i.user?.name?((0,o.uX)(),(0,o.CE)("div",Qa,[(0,o.Lk)("button",{class:"action-btn edit-btn",onClick:a[1]||(a[1]=(...e)=>r.editGuide&&r.editGuide(...e))},a[12]||(a[12]=[(0,o.Lk)("span",{class:"icon"},"✏️",-1),(0,o.eW)(" Editar ")])),(0,o.Lk)("button",{class:"action-btn delete-btn",onClick:a[2]||(a[2]=(...e)=>r.deleteGuide&&r.deleteGuide(...e))},a[13]||(a[13]=[(0,o.Lk)("span",{class:"icon"},"🗑️",-1),(0,o.eW)(" Eliminar ")]))])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",Ha,[(0,o.Lk)("span",Ja,(0,k.v_)(r.displayStars(i.averageRating)),1),(0,o.Lk)("span",Oa,(0,k.v_)(i.averageRating>0?`${i.averageRating.toFixed(1)}/5 (${i.ratings.length} valoraciones)`:"No hay suficientes valoraciones"),1)]),(0,o.Lk)("p",Ka,"Por "+(0,k.v_)(i.guide.createdBy||"Anónimo"),1)])]),(0,o.Lk)("div",Ya,[a[15]||(a[15]=(0,o.Fv)('<button class="action-btn like-btn" data-v-7f85fd7e><span class="icon" data-v-7f85fd7e>👍</span> Me gusta </button><button class="action-btn dislike-btn" data-v-7f85fd7e><span class="icon" data-v-7f85fd7e>👎</span> No me gusta </button><button class="action-btn award-btn" data-v-7f85fd7e><span class="icon" data-v-7f85fd7e>🏆</span> Premiar </button>',3)),(0,o.Lk)("button",{class:"action-btn favorite-btn",onClick:a[3]||(a[3]=(...e)=>r.toggleFavorite&&r.toggleFavorite(...e))},[(0,o.Lk)("span",Za,(0,k.v_)(i.isFavorited?"🌟":"☆"),1),(0,o.eW)(" "+(0,k.v_)(i.isFavorited?"Quitar de Favoritos":"Agregar a Favoritos"),1)]),(0,o.Lk)("button",{class:"action-btn share-btn",onClick:a[4]||(a[4]=(...e)=>r.shareGuide&&r.shareGuide(...e))},a[14]||(a[14]=[(0,o.Lk)("span",{class:"icon"},"🔗",-1),(0,o.eW)(" Compartir ")]))]),(0,o.Lk)("div",et,[(0,o.Lk)("div",at,[(0,o.Lk)("p",tt,(0,k.v_)(i.guide.content),1)]),(0,o.Lk)("div",st,[a[20]||(a[20]=(0,o.Lk)("h3",null,"Detalles",-1)),(0,o.Lk)("div",ot,[a[16]||(a[16]=(0,o.Lk)("span",{class:"meta-label"},"Creado por:",-1)),(0,o.Lk)("span",it,(0,k.v_)(i.guide.createdBy||"Anónimo"),1)]),(0,o.Lk)("div",rt,[a[17]||(a[17]=(0,o.Lk)("span",{class:"meta-label"},"Categoría:",-1)),(0,o.Lk)("span",nt,(0,k.v_)(i.guide.category||"Sin categoría"),1)]),a[21]||(a[21]=(0,o.Lk)("div",{class:"meta-item"},[(0,o.Lk)("span",{class:"meta-label"},"Idioma:"),(0,o.Lk)("span",{class:"meta-value"},"Español")],-1)),(0,o.Lk)("div",lt,[a[18]||(a[18]=(0,o.Lk)("span",{class:"meta-label"},"Publicado:",-1)),(0,o.Lk)("span",ct,(0,k.v_)(r.formatDate(i.guide.created_at)),1)]),(0,o.Lk)("div",dt,[a[19]||(a[19]=(0,o.Lk)("span",{class:"meta-label"},"Actualizado:",-1)),(0,o.Lk)("span",ut,(0,k.v_)(r.formatDate(i.guide.updated_at||i.guide.created_at)),1)])])])])):(0,o.Q3)("",!0)])])}t(8111),t(7588),t(8237);var mt={data(){return{guide:null,loading:!1,errorMessage:"",isAuthenticated:null!==localStorage.getItem("auth_token"),isFavorited:!1,comments:[],newComment:"",ratings:[],userRating:0,userReview:"",averageRating:0,user:null}},created(){window.addEventListener("storage",this.updateAuthStatus),this.checkAuthStatus(),this.fetchGuide(),this.loadComments(),this.loadRatings(),this.fetchUserData()},mounted(){const e=document.querySelectorAll(".dropdown-toggle");e.forEach((e=>{e.addEventListener("click",this.toggleDropdown)})),document.addEventListener("click",this.closeDropdown)},beforeUnmount(){window.removeEventListener("storage",this.updateAuthStatus);const e=document.querySelectorAll(".dropdown-toggle");e.forEach((e=>{e.removeEventListener("click",this.toggleDropdown)})),document.removeEventListener("click",this.closeDropdown)},methods:{async checkAuthStatus(){this.isAuthenticated=await C(),console.log("Estado de autenticación:",this.isAuthenticated)},updateAuthStatus(){this.isAuthenticated=null!==localStorage.getItem("auth_token"),console.log("Estado de autenticación actualizado:",this.isAuthenticated)},async fetchUserData(){try{const e=localStorage.getItem("auth_token");if(!e)return void console.log("No hay token de autenticación, usuario no autenticado");P.A.defaults.baseURL="http://localhost:8000",P.A.defaults.withCredentials=!0,P.A.defaults.headers.common["Authorization"]=`Bearer ${e}`;const a=await P.A.get("/api/user");this.user={name:a.data.name,email:a.data.email},console.log("Datos del usuario cargados:",this.user)}catch(e){this.errorMessage=e.response?e.response.data.message:e.message,console.error("Error al cargar datos del usuario:",e)}},async fetchGuide(){this.loading=!0,this.errorMessage="";try{const e=this.$route.params.id;P.A.defaults.baseURL="http://localhost:8000",P.A.defaults.withCredentials=!0,await P.A.get("sanctum/csrf-cookie");const a=await P.A.get(`/api/guides/${e}`);this.guide=a.data,console.log("Datos de la guía:",this.guide),this.guide.user?this.guide.createdBy=this.guide.user.name||this.guide.user.username||this.guide.user.email||"Anónimo":(console.warn("No user data found for this guide:",this.guide),this.guide.createdBy="Anónimo"),console.log("Creador de la guía:",this.guide.createdBy)}catch(e){this.errorMessage=e.response?.data?.message||"Error al cargar la guía",console.error("Error al cargar la guía:",e)}finally{this.loading=!1}},handleImageError(e){e.target.style.display="none";const a=document.createElement("div");a.className="no-image-placeholder",a.textContent="Sin imagen disponible",e.target.parentNode.appendChild(a)},goBackToGuides(){this.$router.push("/comunidad")},formatDate(e){if(!e)return"Fecha desconocida";const a=new Date(e);return a.toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})},displayStars(e){const a=Math.floor(e),t=5-a;return"★".repeat(a)+"☆".repeat(t)},async loadRatings(){try{const e=this.$route.params.id;P.A.defaults.baseURL="http://localhost:8000",P.A.defaults.withCredentials=!0,await P.A.get("sanctum/csrf-cookie");const a=await P.A.get(`/api/guides/${e}/ratings`);this.ratings=a.data,this.calculateAverageRating()}catch(e){console.error("Error al cargar las valoraciones:",e)}},calculateAverageRating(){if(0===this.ratings.length)return void(this.averageRating=0);const e=this.ratings.reduce(((e,a)=>e+a.rating),0);this.averageRating=e/this.ratings.length},setUserRating(e){this.userRating=e},async submitRating(){if(0!==this.userRating&&this.userReview.trim())try{const e=this.$route.params.id;P.A.defaults.baseURL="http://localhost:8000",P.A.defaults.withCredentials=!0,await P.A.get("sanctum/csrf-cookie");const a=await P.A.post(`/api/guides/${e}/ratings`,{rating:this.userRating,text:this.userReview},{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});this.ratings.push({id:a.data.id,author:this.guide.createdBy||"Usuario",rating:this.userRating,text:this.userReview,created_at:(new Date).toISOString()}),this.userRating=0,this.userReview="",this.calculateAverageRating(),console.log("Valoración enviada:",a.data)}catch(e){console.error("Error al enviar la valoración:",e),alert("Error al enviar la valoración. Por favor, intenta de nuevo.")}},toggleFavorite(){this.isFavorited=!this.isFavorited,console.log(`Guía ${this.isFavorited?"agregada a":"eliminada de"} favoritos`)},shareGuide(){const e=window.location.href;navigator.clipboard.writeText(e).then((()=>{alert("Enlace copiado al portapapeles: "+e)})).catch((a=>{console.error("Error al copiar el enlace:",a),alert("No se pudo copiar el enlace. Por favor, copia manualmente: "+e)}))},loadComments(){},submitComment(){if(!this.newComment.trim())return;const e={id:this.comments.length+1,author:this.isAuthenticated?this.guide?.createdBy||"Usuario":"Anónimo",text:this.newComment,created_at:(new Date).toISOString()};this.comments.push(e),this.newComment="",console.log("Comentario enviado:",e)},editGuide(){this.$router.push(`/comunidad/crear-guia?editGuide=${this.guide.id}`)},async deleteGuide(){if(confirm("¿Estás seguro de que quieres eliminar esta guía?"))try{const e=this.$route.params.id;P.A.defaults.baseURL="http://localhost:8000",P.A.defaults.withCredentials=!0,await P.A.get("sanctum/csrf-cookie");const a=await P.A.delete(`/api/guides/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});console.log("Guía eliminada:",a.data),this.$router.push("/comunidad/guias")}catch(e){this.errorMessage=e.response?e.response.data.message:"Error al eliminar la guía",console.error("Error al eliminar la guía:",e)}},toggleDropdown(e){const a=e.currentTarget.parentElement.querySelector(".dropdown-menu");a&&(a.style.display="block"===a.style.display?"none":"block")},closeDropdown(e){const a=document.querySelectorAll(".dropdown-menu");a.forEach((a=>{e.target.closest(".dropdown")||(a.style.display="none")}))}}};const ht=(0,l.A)(mt,[["render",gt],["__scopeId","data-v-7f85fd7e"]]);var pt=ht;const vt={class:"create-guide-container"},kt={class:"nav-container"},ft={class:"logo"},bt={class:"icon"},Lt={class:"main-content"},wt={class:"guide-form-header"},yt={class:"guide-form-tabs"},Ct={class:"guide-form-content"},At={key:0},Et={class:"form-group"},_t={class:"form-group"},Ft={key:0,class:"error-message"},Gt={key:1,class:"info-message"},St={key:2},It=["src"],Mt={class:"file-placeholder"},Ut={class:"form-group"},Rt={class:"form-group"},$t={class:"form-group"},Tt={key:1},Wt={class:"form-group"},Pt={key:2},Xt={class:"preview-section"},xt={key:0},Nt=["src"],Dt={key:1,class:"no-image-placeholder"},jt=["innerHTML"],qt={class:"form-actions"},Vt={type:"submit"},zt={key:0,class:"success-message"},Bt={key:1,class:"error-message"};function Qt(e,a,t,i,r,n){const l=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",vt,[(0,o.Lk)("nav",kt,[(0,o.Lk)("div",ft,[(0,o.bF)(l,{to:"/",class:"logo-link"},{default:(0,o.k6)((()=>a[13]||(a[13]=[(0,o.eW)("🎮 GameHub")]))),_:1})]),(0,o.Lk)("ul",null,[(0,o.Lk)("li",null,[(0,o.bF)(l,{to:"/juego"},{default:(0,o.k6)((()=>a[14]||(a[14]=[(0,o.Lk)("i",{class:"icon"},"🎮",-1),(0,o.eW)(" Jugar")]))),_:1})]),(0,o.Lk)("li",null,[(0,o.bF)(l,{to:"/comunidad"},{default:(0,o.k6)((()=>a[15]||(a[15]=[(0,o.Lk)("i",{class:"icon"},"👥",-1),(0,o.eW)(" Comunidad")]))),_:1})]),(0,o.Lk)("li",null,[(0,o.bF)(l,{to:r.isAuthenticated?"/perfil":"/login"},{default:(0,o.k6)((()=>[(0,o.Lk)("i",bt,(0,k.v_)(r.isAuthenticated?"👤":"🔑"),1),(0,o.eW)(" "+(0,k.v_)(r.isAuthenticated?"Perfil":"Login"),1)])),_:1},8,["to"])])])]),(0,o.Lk)("div",Lt,[(0,o.Lk)("div",wt,[(0,o.Lk)("h2",null,(0,k.v_)(r.editingGuide?"Editar Guía":"Creando una nueva guía"),1),a[16]||(a[16]=(0,o.Lk)("p",null,"Para empezar con tu guía, rellena los campos de abajo. A continuación, se te pedirá que le añadas secciones.",-1))]),(0,o.Lk)("div",yt,[(0,o.Lk)("button",{class:(0,k.C4)({"active-tab":"basic"===r.activeFormTab}),onClick:a[0]||(a[0]=e=>n.setActiveTab("basic"))}," Información básica de la guía ",2),(0,o.Lk)("button",{class:(0,k.C4)({"active-tab":"content"===r.activeFormTab}),onClick:a[1]||(a[1]=e=>n.setActiveTab("content"))}," Contenido de la guía ",2),(0,o.Lk)("button",{class:(0,k.C4)({"active-tab":"preview"===r.activeFormTab}),onClick:a[2]||(a[2]=e=>n.setActiveTab("preview"))}," Previsualizar guía ",2)]),(0,o.Lk)("div",Ct,[(0,o.Lk)("form",{onSubmit:a[12]||(a[12]=(0,s.D$)(((...e)=>n.saveGuide&&n.saveGuide(...e)),["prevent"]))},["basic"===r.activeFormTab?((0,o.uX)(),(0,o.CE)("div",At,[(0,o.Lk)("div",Et,[a[17]||(a[17]=(0,o.Lk)("label",{for:"title"},"Introduce el título de tu guía",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",id:"title","onUpdate:modelValue":a[3]||(a[3]=e=>r.guideForm.title=e)},null,512),[[s.Jo,r.guideForm.title]])]),(0,o.Lk)("div",_t,[a[18]||(a[18]=(0,o.Lk)("label",{for:"branding-image"},"Selecciona una imagen distintiva (requerido)",-1)),a[19]||(a[19]=(0,o.Lk)("p",null,"Esta imagen representará a tu guía en la comunidad de GameHub. Cuando los usuarios busquen, exploren o filtren en la lista de guías, esta es la imagen que aparecerá junto a tu guía.",-1)),a[20]||(a[20]=(0,o.Lk)("p",null,"Para los mejores resultados, utiliza algo que represente la temática o contenido de la guía.",-1)),a[21]||(a[21]=(0,o.Lk)("p",null,"La imagen debe ser cuadrada y de al menos 196px por 196px. Si es más grande, se redimensionará automáticamente.",-1)),(0,o.Lk)("input",{type:"file",id:"branding-image",onChange:a[4]||(a[4]=(...e)=>n.handleImageUpload&&n.handleImageUpload(...e)),accept:"image/*"},null,32),r.imageError?((0,o.uX)(),(0,o.CE)("p",Ft,(0,k.v_)(r.imageError),1)):(0,o.Q3)("",!0),r.imageInfo?((0,o.uX)(),(0,o.CE)("p",Gt,(0,k.v_)(r.imageInfo),1)):(0,o.Q3)("",!0),r.imagePreview?((0,o.uX)(),(0,o.CE)("p",St,[(0,o.Lk)("img",{src:r.imagePreview,alt:"Vista previa",class:"image-preview",onError:a[5]||(a[5]=(...e)=>n.handleImageError&&n.handleImageError(...e))},null,40,It)])):(0,o.Q3)("",!0),(0,o.Lk)("span",Mt,(0,k.v_)(r.selectedFileName||"Ningún archivo seleccionado"),1)]),(0,o.Lk)("div",Ut,[a[23]||(a[23]=(0,o.Lk)("label",{for:"language"},"Selecciona el idioma",-1)),a[24]||(a[24]=(0,o.Lk)("p",null,"¿En qué idioma está escrita esta guía? Si vas a publicar la misma información en varios idiomas, crea una guía independiente para cada uno.",-1)),(0,o.bo)((0,o.Lk)("select",{id:"language","onUpdate:modelValue":a[6]||(a[6]=e=>r.guideForm.language=e)},a[22]||(a[22]=[(0,o.Fv)('<option value="" data-v-fd8573e8>Selecciona un idioma</option><option value="es-ES" data-v-fd8573e8>Español de España</option><option value="es-MX" data-v-fd8573e8>Español de México</option><option value="en-US" data-v-fd8573e8>English (US)</option><option value="fr-FR" data-v-fd8573e8>Français</option>',5)]),512),[[s.u1,r.guideForm.language]])]),(0,o.Lk)("div",Rt,[a[25]||(a[25]=(0,o.Lk)("label",{for:"description"},"Describe tu guía",-1)),a[26]||(a[26]=(0,o.Lk)("p",null,"Usa este espacio para describir tu guía, qué la hace interesante y cuál es su ámbito. Esto aparecerá como descripción cuando se explore la lista de guías para este juego.",-1)),(0,o.bo)((0,o.Lk)("textarea",{id:"description","onUpdate:modelValue":a[7]||(a[7]=e=>r.guideForm.description=e),rows:"3"},null,512),[[s.Jo,r.guideForm.description]])]),(0,o.Lk)("div",$t,[a[28]||(a[28]=(0,o.Lk)("label",{for:"category"},"Categoría",-1)),(0,o.bo)((0,o.Lk)("select",{id:"category","onUpdate:modelValue":a[8]||(a[8]=e=>r.guideForm.category=e)},a[27]||(a[27]=[(0,o.Fv)('<option value="" data-v-fd8573e8>Selecciona una categoría</option><option value="Misiones" data-v-fd8573e8>Misiones</option><option value="Personajes" data-v-fd8573e8>Personajes</option><option value="Mecánicas" data-v-fd8573e8>Mecánicas</option><option value="Consejos" data-v-fd8573e8>Consejos</option>',5)]),512),[[s.u1,r.guideForm.category]])])])):(0,o.Q3)("",!0),"content"===r.activeFormTab?((0,o.uX)(),(0,o.CE)("div",Tt,[(0,o.Lk)("div",Wt,[a[29]||(a[29]=(0,o.Lk)("label",{for:"content"},"Contenido de la guía",-1)),(0,o.bo)((0,o.Lk)("textarea",{id:"content","onUpdate:modelValue":a[9]||(a[9]=e=>r.guideForm.content=e),rows:"10"},null,512),[[s.Jo,r.guideForm.content]])])])):(0,o.Q3)("",!0),"preview"===r.activeFormTab?((0,o.uX)(),(0,o.CE)("div",Pt,[a[32]||(a[32]=(0,o.Lk)("h3",null,"Vista previa de la guía",-1)),(0,o.Lk)("div",Xt,[(0,o.Lk)("h4",null,(0,k.v_)(r.guideForm.title||"Título no especificado"),1),(0,o.Lk)("p",null,[a[30]||(a[30]=(0,o.Lk)("strong",null,"Idioma:",-1)),(0,o.eW)(" "+(0,k.v_)(r.guideForm.language||"No especificado"),1)]),(0,o.Lk)("p",null,[a[31]||(a[31]=(0,o.Lk)("strong",null,"Categoría:",-1)),(0,o.eW)(" "+(0,k.v_)(r.guideForm.category||"Sin categoría"),1)]),(0,o.Lk)("p",null,(0,k.v_)(r.guideForm.description||"Sin descripción"),1),r.imagePreview?((0,o.uX)(),(0,o.CE)("div",xt,[(0,o.Lk)("img",{src:r.imagePreview,alt:"Portada de la guía",class:"preview-image",onError:a[10]||(a[10]=(...e)=>n.handleImageError&&n.handleImageError(...e))},null,40,Nt)])):((0,o.uX)(),(0,o.CE)("div",Dt,"Sin imagen")),(0,o.Lk)("div",{class:"preview-content",innerHTML:r.guideForm.content||"Sin contenido"},null,8,jt)])])):(0,o.Q3)("",!0),(0,o.Lk)("div",qt,[(0,o.Lk)("button",Vt,(0,k.v_)(r.editingGuide?"Actualizar Guía":"Crear Guía"),1),(0,o.Lk)("button",{type:"button",onClick:a[11]||(a[11]=(...e)=>n.cancelEdit&&n.cancelEdit(...e))},"Cancelar")])],32),r.successMessage?((0,o.uX)(),(0,o.CE)("p",zt,(0,k.v_)(r.successMessage),1)):(0,o.Q3)("",!0),r.errorMessage?((0,o.uX)(),(0,o.CE)("p",Bt,(0,k.v_)(r.errorMessage),1)):(0,o.Q3)("",!0)])]),a[33]||(a[33]=(0,o.Fv)('<footer class="footer-section" data-v-fd8573e8><div class="footer-content" data-v-fd8573e8><p data-v-fd8573e8>© 2025 GameHub - Todos los derechos reservados</p><div class="social-links" data-v-fd8573e8><a href="#" class="social-icon" data-v-fd8573e8>🐦</a><a href="#" class="social-icon" data-v-fd8573e8>📘</a><a href="#" class="social-icon" data-v-fd8573e8>📷</a></div></div></footer>',1))])}t(4603),t(7566),t(8721);var Ht=t(4874),Jt=t.n(Ht),Ot={name:"CreateGuideView",data(){return{isAuthenticated:null!==localStorage.getItem("auth_token"),activeFormTab:"basic",guideForm:{title:"",description:"",content:"",category:"",image:null,language:""},selectedFileName:"",imageError:"",imageInfo:"",imagePreview:null,editingGuide:null,successMessage:"",errorMessage:"",user:null}},computed:{isFormValid(){const e=""!==this.guideForm.title.trim()&&""!==this.guideForm.description.trim()&&""!==this.guideForm.content.trim()&&""!==this.guideForm.language.trim(),a=null!==this.guideForm.image&&(this.guideForm.image instanceof File||"string"===typeof this.guideForm.image);return e&&a},isBasicInfoValid(){return""!==this.guideForm.title.trim()&&""!==this.guideForm.description.trim()&&""!==this.guideForm.language.trim()&&null!==this.guideForm.image&&(this.guideForm.image instanceof File||"string"===typeof this.guideForm.image)}},created(){this.checkAuthStatus(),this.fetchUserData();const e=this.$route.query.editGuide;e&&this.fetchGuide(e)},methods:{async checkAuthStatus(){this.isAuthenticated=await C(),this.isAuthenticated||this.$router.push("/login")},async fetchUserData(){try{const e=localStorage.getItem("auth_token");if(!e)return;P.A.defaults.baseURL="http://localhost:8000",P.A.defaults.withCredentials=!0,P.A.defaults.headers.common["Authorization"]=`Bearer ${e}`;const a=await P.A.get("/api/user");this.user={name:a.data.name,email:a.data.email}}catch(e){this.errorMessage=e.response?e.response.data.message:e.message}},async fetchGuide(e){try{P.A.defaults.baseURL="http://localhost:8000",P.A.defaults.withCredentials=!0,await P.A.get("sanctum/csrf-cookie");const a=await P.A.get(`/api/guides/${e}`),t=a.data;this.editingGuide=t,this.guideForm={title:t.title||"",description:t.description||"",content:t.content||"",category:t.category||"",image:t.image||null,language:t.language||""},this.imagePreview=t.image||null}catch(a){this.errorMessage=a.response?a.response.data.message:a.message}},handleImageUpload(e){const a=e.target.files[0];if(this.imageError="",this.imageInfo="",this.guideForm.image=null,this.selectedFileName="",this.imagePreview=null,!a)return;this.selectedFileName=a.name;const t=new Image;t.src=URL.createObjectURL(a),t.onload=()=>{if(t.width<196||t.height<196)return Jt().fire({icon:"error",title:"Error en la imagen",text:"La imagen debe ser al menos 196x196 píxeles."}),this.selectedFileName="",this.imagePreview=null,void(e.target.value="");t.width>196||t.height>196?this.resizeImage(t,196,196,a.type,(e=>{this.guideForm.image=a,this.imageInfo="Imagen redimensionada a 196x196 píxeles.",this.selectedFileName=a.name,this.imagePreview=e})):(this.guideForm.image=a,this.imagePreview=URL.createObjectURL(a))},t.onerror=()=>{Jt().fire({icon:"error",title:"Error",text:"No se pudo cargar la imagen. Por favor, intenta con otro archivo."}),this.selectedFileName="",this.imagePreview=null,e.target.value=""}},resizeImage(e,a,t,s,o){const i=document.createElement("canvas");i.width=a,i.height=t;const r=i.getContext("2d");r.drawImage(e,0,0,a,t);const n=i.toDataURL(s);o(n)},handleImageError(e){e.target.style.display="none";const a=document.createElement("div");a.className="no-image-placeholder",a.textContent="Sin imagen",e.target.parentNode.appendChild(a)},setActiveTab(e){if(("content"===e||"preview"===e)&&!this.isBasicInfoValid){const e=[];return this.guideForm.title.trim()||e.push("Título"),this.guideForm.description.trim()||e.push("Descripción"),this.guideForm.language.trim()||e.push("Idioma"),this.guideForm.image||e.push("Imagen"),void Jt().fire({icon:"warning",title:"Campos requeridos",html:`Por favor, completa los siguientes campos en "Información básica":<br><strong>${e.join(", ")}</strong>`})}this.activeFormTab=e},async saveGuide(){if(!this.isFormValid){const e=[];return this.guideForm.title.trim()||e.push("Título"),this.guideForm.description.trim()||e.push("Descripción"),this.guideForm.language.trim()||e.push("Idioma"),this.guideForm.image||e.push("Imagen"),this.guideForm.content.trim()||e.push("Contenido"),void Jt().fire({icon:"warning",title:"Campos requeridos",html:`Por favor, completa los siguientes campos:<br><strong>${e.join(", ")}</strong>`})}try{console.log("Fetching CSRF token..."),P.A.defaults.baseURL="http://localhost:8000",P.A.defaults.withCredentials=!0,await P.A.get("sanctum/csrf-cookie"),console.log("CSRF token fetched successfully.");const e=localStorage.getItem("auth_token");if(console.log("Auth token:",e),!e)return this.errorMessage="No estás autenticado. Por favor, inicia sesión.",void this.$router.push("/login");const a=new FormData;if(a.append("title",this.guideForm.title),a.append("description",this.guideForm.description),a.append("content",this.guideForm.content),a.append("category",this.guideForm.category),a.append("language",this.guideForm.language),!this.guideForm.image)return console.log("No image provided"),void(this.errorMessage="Por favor, selecciona una imagen.");this.guideForm.image instanceof File?(console.log("Uploading new image file"),a.append("image",this.guideForm.image)):"string"===typeof this.guideForm.image&&(console.log("Using existing image URL:",this.guideForm.image),a.append("image_url",this.guideForm.image));const t={headers:{Authorization:`Bearer ${e}`,"Content-Type":"multipart/form-data"}};if(this.editingGuide&&this.editingGuide.id){console.log("Updating guide with ID:",this.editingGuide.id),a.append("_method","PUT");const e=await P.A.post(`/api/guides/${this.editingGuide.id}`,a,t);console.log("Update response:",e.data),this.successMessage=e.data.message||"Guía actualizada con éxito"}else{console.log("Creating new guide...");const e=await P.A.post("/api/guides",a,t);console.log("Create response:",e.data),this.successMessage=e.data.message||"Guía creada con éxito"}this.$router.push("/comunidad?tab=guides")}catch(e){console.error("Error saving guide:",e),e.response&&(console.error("Response data:",e.response.data),console.error("Response status:",e.response.status)),this.errorMessage=e.response?e.response.data.message:"Error al guardar la guía"}},cancelEdit(){this.$router.push("/comunidad?tab=guides")}}};const Kt=(0,l.A)(Ot,[["render",Qt],["__scopeId","data-v-fd8573e8"]]);var Yt=Kt;const Zt=[{path:"/",component:_,name:"Home"},{path:"/login",component:N,name:"Login"},{path:"/register",component:We,name:"Register"},{path:"/juego",component:v,name:"Juego"},{path:"/perfil",component:Ce,name:"Perfil"},{path:"/perfil/editar",component:Ga,name:"EditProfile"},{path:"/comunidad",component:ua,name:"Comunidad",children:[{path:"guias",name:"Guias",component:ua}]},{path:"/comunidad/guia/:id",name:"GuideView",component:pt,props:!0},{path:"/comunidad/crear-guia",name:"CreateGuide",component:Yt,meta:{requiresAuth:!0}},{path:"/about",name:"About",component:()=>t.e(603).then(t.bind(t,603))},{path:"/:pathMatch(.*)*",name:"NotFound",component:()=>t.e(303).then(t.bind(t,5303))}],es=(0,u.aE)({history:(0,u.LA)("/"),routes:Zt});var as=es;const ts=(0,s.Ef)(d);ts.use(as),ts.mount("#app"),console.log("Aplicación iniciada con router",as)}},a={};function t(s){var o=a[s];if(void 0!==o)return o.exports;var i=a[s]={exports:{}};return e[s].call(i.exports,i,i.exports,t),i.exports}t.m=e,function(){var e=[];t.O=function(a,s,o,i){if(!s){var r=1/0;for(d=0;d<e.length;d++){s=e[d][0],o=e[d][1],i=e[d][2];for(var n=!0,l=0;l<s.length;l++)(!1&i||r>=i)&&Object.keys(t.O).every((function(e){return t.O[e](s[l])}))?s.splice(l--,1):(n=!1,i<r&&(r=i));if(n){e.splice(d--,1);var c=o();void 0!==c&&(a=c)}}return a}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[s,o,i]}}(),function(){t.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(a,{a:a}),a}}(),function(){t.d=function(e,a){for(var s in a)t.o(a,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:a[s]})}}(),function(){t.f={},t.e=function(e){return Promise.all(Object.keys(t.f).reduce((function(a,s){return t.f[s](e,a),a}),[]))}}(),function(){t.u=function(e){return"js/"+e+"."+{303:"6974cbaa",603:"d6e4e9d7"}[e]+".js"}}(),function(){t.miniCssF=function(e){}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){var e={},a="vue:";t.l=function(s,o,i,r){if(e[s])e[s].push(o);else{var n,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==s||u.getAttribute("data-webpack")==a+i){n=u;break}}n||(l=!0,n=document.createElement("script"),n.charset="utf-8",n.timeout=120,t.nc&&n.setAttribute("nonce",t.nc),n.setAttribute("data-webpack",a+i),n.src=s),e[s]=[o];var g=function(a,t){n.onerror=n.onload=null,clearTimeout(m);var o=e[s];if(delete e[s],n.parentNode&&n.parentNode.removeChild(n),o&&o.forEach((function(e){return e(t)})),a)return a(t)},m=setTimeout(g.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=g.bind(null,n.onerror),n.onload=g.bind(null,n.onload),l&&document.head.appendChild(n)}}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.p="/"}(),function(){var e={524:0};t.f.j=function(a,s){var o=t.o(e,a)?e[a]:void 0;if(0!==o)if(o)s.push(o[2]);else{var i=new Promise((function(t,s){o=e[a]=[t,s]}));s.push(o[2]=i);var r=t.p+t.u(a),n=new Error,l=function(s){if(t.o(e,a)&&(o=e[a],0!==o&&(e[a]=void 0),o)){var i=s&&("load"===s.type?"missing":s.type),r=s&&s.target&&s.target.src;n.message="Loading chunk "+a+" failed.\n("+i+": "+r+")",n.name="ChunkLoadError",n.type=i,n.request=r,o[1](n)}};t.l(r,l,"chunk-"+a,a)}},t.O.j=function(a){return 0===e[a]};var a=function(a,s){var o,i,r=s[0],n=s[1],l=s[2],c=0;if(r.some((function(a){return 0!==e[a]}))){for(o in n)t.o(n,o)&&(t.m[o]=n[o]);if(l)var d=l(t)}for(a&&a(s);c<r.length;c++)i=r[c],t.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return t.O(d)},s=self["webpackChunkvue"]=self["webpackChunkvue"]||[];s.forEach(a.bind(null,0)),s.push=a.bind(null,s.push.bind(s))}();var s=t.O(void 0,[504],(function(){return t(5243)}));s=t.O(s)})();
//# sourceMappingURL=app.b810f637.js.map